<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title></title>
    <link href="/2025/11/14/judge0%E8%B0%83%E7%A0%94/"/>
    <url>/2025/11/14/judge0%E8%B0%83%E7%A0%94/</url>
    
    <content type="html"><![CDATA[<hr><h2 id="base64解码网址：https-base64-us"><a href="#base64解码网址：https-base64-us" class="headerlink" title="base64解码网址：https://base64.us/"></a>base64解码网址：<a href="https://base64.us/">https://base64.us/</a></h2><h1 id="C"><a href="#C" class="headerlink" title="C"></a>C</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">48</span>,<br>    <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;C (GCC 7.4.0)&quot;</span><br>&#125;,<br>&#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">49</span>,<br>    <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;C (GCC 8.3.0)&quot;</span><br>&#125;,<br>&#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">50</span>,<br>    <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;C (GCC 9.2.0)&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;   // 标准输入输出库</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;  // 标准库，用于 exit() 函数</span></span><br><br><span class="hljs-comment">// 函数声明</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printWelcomeMessage</span><span class="hljs-params">()</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printArray</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[], <span class="hljs-keyword">int</span> size)</span></span>;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// 欢迎信息</span><br>    printWelcomeMessage();<br>    <br>    <span class="hljs-comment">// 基本数据类型</span><br>    <span class="hljs-keyword">int</span> num1 = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">int</span> num1 = <span class="hljs-number">3</span>;<br>    <span class="hljs-comment">// 条件判断</span><br>    <span class="hljs-keyword">if</span> (num1 == num2) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;两个数相等!\n&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (num1 &gt; num2) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;第一个数大于第二个数\n&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;第一个数小于第二个数\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// 调用函数：加法运算</span><br>    <span class="hljs-keyword">int</span> result = add(num1, num2);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;两个数的和是: %d\n&quot;</span>, result);<br><br>    <span class="hljs-comment">// 数组操作</span><br>    <span class="hljs-keyword">int</span> arr[] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;  <span class="hljs-comment">// 定义一个数组</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;数组的元素: &quot;</span>);<br>    printArray(arr, <span class="hljs-number">5</span>);  <span class="hljs-comment">// 打印数组中的元素</span><br><br>    <span class="hljs-comment">// 循环：打印1到10</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;1到10的数字: &quot;</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, i);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><br>    <span class="hljs-comment">// 程序结束</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;感谢使用C语言教程!\n&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// 程序正常结束</span><br>&#125;<br><br><span class="hljs-comment">// 打印欢迎信息的函数</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printWelcomeMessage</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;欢迎来到C语言基础教学!\n&quot;</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;这是一个简单的C语言示例程序。\n\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// 加法函数</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-comment">// 打印数组元素的函数</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printArray</span><span class="hljs-params">(<span class="hljs-keyword">int</span> arr[], <span class="hljs-keyword">int</span> size)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, arr[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">I2luY2x1ZGUgPHN0ZGlvLmg</span>+ICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>qCH<span class="hljs-number">5</span>YeG<span class="hljs-number">6</span>L<span class="hljs-number">6</span>T<span class="hljs-number">5</span>YWl<span class="hljs-number">6</span>L<span class="hljs-number">6</span>T<span class="hljs-number">5</span>Ye<span class="hljs-number">65</span>bqTCiNpbmNsdWRlIDxzdGRsaWIuaD<span class="hljs-number">4</span>gIC<span class="hljs-number">8</span>vIOagh+WHhuW<span class="hljs-number">6</span>k++<span class="hljs-number">8</span>jOeUqOS<span class="hljs-number">6</span>jiBleGl<span class="hljs-number">0</span>KCkg<span class="hljs-number">5</span>Ye<span class="hljs-number">95</span>pWwCgovLyDlh<span class="hljs-number">73</span>mlbDlo<span class="hljs-number">7</span>DmmI<span class="hljs-number">4</span>Kdm<span class="hljs-number">9</span>pZCBwcmludFdlbGNvbWVNZXNzYWdlKCk<span class="hljs-number">7</span>CmludCBhZGQoaW<span class="hljs-number">50</span>IGEsIGludCBiKTsKdm<span class="hljs-number">9</span>pZCBwcmludEFycmF<span class="hljs-number">5</span>KGludCBhcnJbXSwgaW<span class="hljs-number">50</span>IHNpemUpOwoKaW<span class="hljs-number">50</span>IG<span class="hljs-number">1</span>haW<span class="hljs-number">4</span>oKSB<span class="hljs-number">7</span>CiAgICAvLyDmrKLov<span class="hljs-number">47</span>kv<span class="hljs-number">6</span>Hmga<span class="hljs-number">8</span>KICAgIHByaW<span class="hljs-number">50</span>V<span class="hljs-number">2</span>VsY<span class="hljs-number">29</span>tZU<span class="hljs-number">1</span>lc<span class="hljs-number">3</span>NhZ<span class="hljs-number">2</span>UoKTsKICAgIAogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>Z+<span class="hljs-number">65</span>pys<span class="hljs-number">5</span>pWw<span class="hljs-number">5</span>o<span class="hljs-number">2</span>u<span class="hljs-number">57</span>G<span class="hljs-number">75</span>Z<span class="hljs-number">6</span>LCiAgICBpbnQgbnVtMSA<span class="hljs-number">9</span>IDI<span class="hljs-number">7</span>CiAgICBpbnQgbnVtMiA<span class="hljs-number">9</span>IDQ<span class="hljs-number">7</span>CiAgICBwcmludGYoIuivt+i+k+WFpeesrOS<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>quaVtOaVsDogIik<span class="hljs-number">7</span>CiAgICBwcmludGYoIuivt+i+k+WFpeesrOS<span class="hljs-number">6</span>jOS<span class="hljs-number">4</span>quaVtOaVsDogIik<span class="hljs-number">7</span>CgogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>p<span class="hljs-number">2</span>h<span class="hljs-number">5</span>Lu<span class="hljs-number">25</span>Yik<span class="hljs-number">5</span>patCiAgICBpZiAobnVtMSA<span class="hljs-number">9</span>PSBudW<span class="hljs-number">0</span>yKSB<span class="hljs-number">7</span>CiAgICAgICAgcHJpbnRmKCLkuKTkuKrmlbDnm<span class="hljs-number">7</span>jnrYkhXG<span class="hljs-number">4</span>iKTsKICAgIH<span class="hljs-number">0</span>gZWxzZSBpZiAobnVtMSA+IG<span class="hljs-number">51</span>bTIpIHsKICAgICAgICBwcmludGYoIuesrOS<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>quaVsOWkp+S<span class="hljs-number">6</span>juesrOS<span class="hljs-number">6</span>jOS<span class="hljs-number">4</span>quaVsFxuIik<span class="hljs-number">7</span>CiAgICB<span class="hljs-number">9</span>IGVsc<span class="hljs-number">2</span>UgewogICAgICAgIHByaW<span class="hljs-number">50</span>Zigi<span class="hljs-number">56</span>ys<span class="hljs-number">5</span>LiA<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">5</span>bCP<span class="hljs-number">5</span>LqO<span class="hljs-number">56</span>ys<span class="hljs-number">5</span>LqM<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWwXG<span class="hljs-number">4</span>iKTsKICAgIH<span class="hljs-number">0</span>KCiAgICAvLyDosIPnlKjlh<span class="hljs-number">73</span>mlbDvvJrliqDms<span class="hljs-number">5</span>Xov<span class="hljs-number">5</span>DnrpcKICAgIGludCByZXN<span class="hljs-number">1</span>bHQgPSBhZGQobnVtMSwgbnVtMik<span class="hljs-number">7</span>CiAgICBwcmludGYoIuS<span class="hljs-number">4</span>pOS<span class="hljs-number">4</span>quaVsOeahOWSjOaYrzogJWRcbiIsIHJlc<span class="hljs-number">3</span>VsdCk<span class="hljs-number">7</span>CgogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>pWw<span class="hljs-number">57</span>uE<span class="hljs-number">5</span>pON<span class="hljs-number">5</span>L<span class="hljs-number">2</span>cCiAgICBpbnQgYXJyW<span class="hljs-number">10</span>gPSB<span class="hljs-number">7</span>MSwgMiwgMywgNCwgNX<span class="hljs-number">07</span>ICAvLyDlrprkuYnkuIDkuKrmlbDnu<span class="hljs-number">4</span>QKICAgIHByaW<span class="hljs-number">50</span>Zigi<span class="hljs-number">5</span>pWw<span class="hljs-number">57</span>uE<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>YWD<span class="hljs-number">57</span>SgOiAiKTsKICAgIHByaW<span class="hljs-number">50</span>QXJyYXkoYXJyLCA<span class="hljs-number">1</span>KTsgIC<span class="hljs-number">8</span>vIOaJk+WNsOaVsOe<span class="hljs-number">7</span>hOS<span class="hljs-number">4</span>reeahOWFg+e<span class="hljs-number">0</span>oAoKICAgIC<span class="hljs-number">8</span>vIOW+queOr++<span class="hljs-number">8</span>muaJk+WNsDHliLAxMAogICAgcHJpbnRmKCIx<span class="hljs-number">5</span>YiwMTDnmoTmlbDlrZc<span class="hljs-number">6</span>ICIpOwogICAgZm<span class="hljs-number">9</span>yIChpbnQgaSA<span class="hljs-number">9</span>IDE<span class="hljs-number">7</span>IGkgPD<span class="hljs-number">0</span>gMTA<span class="hljs-number">7</span>IGkrKykgewogICAgICAgIHByaW<span class="hljs-number">50</span>ZigiJWQgIiwgaSk<span class="hljs-number">7</span>CiAgICB<span class="hljs-number">9</span>CiAgICBwcmludGYoIlxuIik<span class="hljs-number">7</span>CgogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">56</span>iL<span class="hljs-number">5</span>bqP<span class="hljs-number">57</span>uT<span class="hljs-number">5</span>p<span class="hljs-number">2</span>fCiAgICBwcmludGYoIuaEn+iwouS<span class="hljs-number">9</span>v+eUqEPor<span class="hljs-number">63</span>oqIDmlZnnqIshXG<span class="hljs-number">4</span>iKTsKICAgIHJldHVybiAwOyAgLy<span class="hljs-number">8</span>g<span class="hljs-number">56</span>iL<span class="hljs-number">5</span>bqP<span class="hljs-number">5</span>q<span class="hljs-number">2</span>j<span class="hljs-number">5</span>bi<span class="hljs-number">457</span>uT<span class="hljs-number">5</span>p<span class="hljs-number">2</span>fCn<span class="hljs-number">0</span>KCi<span class="hljs-number">8</span>vIOaJk+WNsOasoui/juS/oeaBr+eahOWHveaVsAp<span class="hljs-number">2</span>b<span class="hljs-number">2</span>lkIHByaW<span class="hljs-number">50</span>V<span class="hljs-number">2</span>VsY<span class="hljs-number">29</span>tZU<span class="hljs-number">1</span>lc<span class="hljs-number">3</span>NhZ<span class="hljs-number">2</span>UoKSB<span class="hljs-number">7</span>CiAgICBwcmludGYoIuasoui/juadpeWIsEPor<span class="hljs-number">63</span>oqIDln<span class="hljs-number">7</span>rnoYDmlZnlraYhXG<span class="hljs-number">4</span>iKTsKICAgIHByaW<span class="hljs-number">50</span>Zigi<span class="hljs-number">6</span>L+Z<span class="hljs-number">5</span>piv<span class="hljs-number">5</span>LiA<span class="hljs-number">5</span>Liq<span class="hljs-number">566</span>A<span class="hljs-number">5</span>Y<span class="hljs-number">2</span>V<span class="hljs-number">55</span>qEQ+ivreiogOekuuS+i+eoi+W<span class="hljs-number">6</span>j+OAglxuXG<span class="hljs-number">4</span>iKTsKfQoKLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>Yqg<span class="hljs-number">5</span>rOV<span class="hljs-number">5</span>Ye<span class="hljs-number">95</span>pWwCmludCBhZGQoaW<span class="hljs-number">50</span>IGEsIGludCBiKSB<span class="hljs-number">7</span>CiAgICByZXR<span class="hljs-number">1</span>cm<span class="hljs-number">4</span>gYSArIGI<span class="hljs-number">7</span>Cn<span class="hljs-number">0</span>KCi<span class="hljs-number">8</span>vIOaJk+WNsOaVsOe<span class="hljs-number">7</span>hOWFg+e<span class="hljs-number">0</span>oOeahOWHveaVsAp<span class="hljs-number">2</span>b<span class="hljs-number">2</span>lkIHByaW<span class="hljs-number">50</span>QXJyYXkoaW<span class="hljs-number">50</span>IGFycltdLCBpbnQgc<span class="hljs-number">2</span>l<span class="hljs-number">6</span>ZSkgewogICAgZm<span class="hljs-number">9</span>yIChpbnQgaSA<span class="hljs-number">9</span>IDA<span class="hljs-number">7</span>IGkgPCBzaXplOyBpKyspIHsKICAgICAgICBwcmludGYoIiVkICIsIGFycltpXSk<span class="hljs-number">7</span>CiAgICB<span class="hljs-number">9</span>CiAgICBwcmludGYoIlxuIik<span class="hljs-number">7</span>Cn<span class="hljs-number">0</span>=<br></code></pre></td></tr></table></figure><h2 id="结果输出"><a href="#结果输出" class="headerlink" title="结果输出"></a>结果输出</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">5qyi6L</span>+O<span class="hljs-number">5</span>p<span class="hljs-number">2</span>l<span class="hljs-number">5</span>YiwQ+ivreiogOWfuuehgOaVmeWtpiEK<span class="hljs-number">6</span>L+Z<span class="hljs-number">5</span>piv<span class="hljs-number">5</span>LiA<span class="hljs-number">5</span>Liq\n<span class="hljs-number">566</span>A<span class="hljs-number">5</span>Y<span class="hljs-number">2</span>V<span class="hljs-number">55</span>qEQ+ivreiogOekuuS+i+eoi+W<span class="hljs-number">6</span>j+OAggoK<span class="hljs-number">6</span>K+<span class="hljs-number">36</span>L<span class="hljs-number">6</span>T<span class="hljs-number">5</span>YWl<span class="hljs-number">56</span>ys\n<span class="hljs-number">5</span>LiA<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pW<span class="hljs-number">05</span>pWwOiDor<span class="hljs-number">7</span>fovpPlhaXnrKzkuozkuKrmlbTmlbA<span class="hljs-number">6</span>IOesrOS<span class="hljs-number">4</span>\ngOS<span class="hljs-number">4</span>quaVsOWwj+S<span class="hljs-number">6</span>juesrOS<span class="hljs-number">6</span>jOS<span class="hljs-number">4</span>quaVsArkuKTkuKrmlbDnmoTlkozmmK<span class="hljs-number">86</span>\nIDYK<span class="hljs-number">5</span>pWw<span class="hljs-number">57</span>uE<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>YWD<span class="hljs-number">57</span>SgOiAxIDIgMyA<span class="hljs-number">0</span>IDUgCjHliLAxMOeahOaVsOWt\nlzogMSAyIDMgNCA<span class="hljs-number">1</span>IDYgNyA<span class="hljs-number">4</span>IDkgMTAgCuaEn+iwouS<span class="hljs-number">9</span>v+eUqEPor<span class="hljs-number">63</span>oqIDm\nlZnnqIshCg==\n<br></code></pre></td></tr></table></figure><h1 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">62</span>,<br>    <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Java (OpenJDK 13.0.1)&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">import</span> java.security.SecureRandom;<br><span class="hljs-keyword">import</span> java.util.Random;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> &#123;</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SecureRandom DEFAULT_NUMBER_GENERATOR = <span class="hljs-keyword">new</span> SecureRandom();<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">char</span>[] DEFAULT_ALPHABET = <span class="hljs-string">&quot;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span>.toCharArray();<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> DEFAULT_SIZE = <span class="hljs-number">21</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">String</span>[] args)</span> </span>&#123;<br>        System.out.<span class="hljs-built_in">println</span>(randomNanoId());<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">String</span> <span class="hljs-title">randomNanoId</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> randomNanoId(DEFAULT_NUMBER_GENERATOR, DEFAULT_ALPHABET, DEFAULT_SIZE);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">String</span> <span class="hljs-title">randomNanoIdWithSize</span><span class="hljs-params">(<span class="hljs-keyword">int</span> <span class="hljs-built_in">size</span>)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> randomNanoId(DEFAULT_NUMBER_GENERATOR, DEFAULT_ALPHABET, <span class="hljs-built_in">size</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">String</span> <span class="hljs-title">randomNanoId</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Random <span class="hljs-built_in">random</span>, <span class="hljs-keyword">final</span> <span class="hljs-keyword">char</span>[] alphabet, <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> <span class="hljs-built_in">size</span>)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">random</span> == null) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;random cannot be null.&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (alphabet == null) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;alphabet cannot be null.&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (alphabet.length == <span class="hljs-number">0</span> || alphabet.length &gt;= <span class="hljs-number">256</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;alphabet must contain between 1 and 255 symbols.&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">size</span> &lt;= <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;size must be greater than zero.&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> mask = (<span class="hljs-number">2</span> &lt;&lt; (<span class="hljs-keyword">int</span>) Math.<span class="hljs-built_in">floor</span>(Math.<span class="hljs-built_in">log</span>(alphabet.length - <span class="hljs-number">1</span>) / Math.<span class="hljs-built_in">log</span>(<span class="hljs-number">2</span>))) - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> <span class="hljs-built_in">step</span> = (<span class="hljs-keyword">int</span>) Math.<span class="hljs-built_in">ceil</span>(<span class="hljs-number">1.6</span> * mask * <span class="hljs-built_in">size</span> / alphabet.length);<br><br>        <span class="hljs-keyword">final</span> StringBuilder idBuilder = <span class="hljs-keyword">new</span> StringBuilder(<span class="hljs-built_in">size</span>);<br>        <span class="hljs-keyword">final</span> <span class="hljs-keyword">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-built_in">step</span>];<br><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-built_in">random</span>.nextBytes(bytes);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">step</span>; i++) &#123;<br>                <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> alphabetIndex = bytes[i] &amp; mask;<br>                <span class="hljs-keyword">if</span> (alphabetIndex &lt; alphabet.length) &#123;<br>                    idBuilder.append(alphabet[alphabetIndex]);<br>                    <span class="hljs-keyword">if</span> (idBuilder.length() == <span class="hljs-built_in">size</span>) &#123;<br>                        <span class="hljs-keyword">return</span> idBuilder.toString();<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="编码-1"><a href="#编码-1" class="headerlink" title="编码"></a>编码</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">aW1wb3J0IGphdmEuc2VjdXJpdHkuU2VjdXJlUmFuZG9tOwppbXBvcnQgamF2YS51dGlsLlJhbmRvbTsKCgpwdWJsaWMgZmluYWwgY2xhc3MgTWFpbiB7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFNlY3VyZVJhbmRvbSBERUZBVUxUX05VTUJFUl9HRU5FUkFUT1IgPSBuZXcgU2VjdXJlUmFuZG9tKCk7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGNoYXJbXSBERUZBVUxUX0FMUEhBQkVUID0gIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaIi50b0NoYXJBcnJheSgpOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgREVGQVVMVF9TSVpFID0gMjE7CgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihyYW5kb21OYW5vSWQoKSk7CiAgICB9CiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyByYW5kb21OYW5vSWQoKSB7CiAgICAgICAgcmV0dXJuIHJhbmRvbU5hbm9JZChERUZBVUxUX05VTUJFUl9HRU5FUkFUT1IsIERFRkFVTFRfQUxQSEFCRVQsIERFRkFVTFRfU0laRSk7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyBTdHJpbmcgcmFuZG9tTmFub0lkV2l0aFNpemUoaW50IHNpemUpIHsKICAgICAgICByZXR1cm4gcmFuZG9tTmFub0lkKERFRkFVTFRfTlVNQkVSX0dFTkVSQVRPUiwgREVGQVVMVF9BTFBIQUJFVCwgc2l6ZSk7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyBTdHJpbmcgcmFuZG9tTmFub0lkKGZpbmFsIFJhbmRvbSByYW5kb20sIGZpbmFsIGNoYXJbXSBhbHBoYWJldCwgZmluYWwgaW50IHNpemUpIHsKICAgICAgICBpZiAocmFuZG9tID09IG51bGwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigicmFuZG9tIGNhbm5vdCBiZSBudWxsLiIpOwogICAgICAgIH0KICAgICAgICBpZiAoYWxwaGFiZXQgPT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJhbHBoYWJldCBjYW5ub3QgYmUgbnVsbC4iKTsKICAgICAgICB9CiAgICAgICAgaWYgKGFscGhhYmV0Lmxlbmd0aCA9PSAwIHx8IGFscGhhYmV0Lmxlbmd0aCA</span>+PSAyNTYpIHsKICAgICAgICAgICAgdGhyb<span class="hljs-number">3</span>cgbmV<span class="hljs-number">3</span>IElsbGVnYWxBcmd<span class="hljs-number">1</span>bWVudEV<span class="hljs-number">4</span>Y<span class="hljs-number">2</span>VwdGlvbigiYWxwaGFiZXQgbXVzdCBjb<span class="hljs-number">250</span>YWluIGJldHdlZW<span class="hljs-number">4</span>gMSBhbmQgMjU<span class="hljs-number">1</span>IHN<span class="hljs-number">5</span>bWJvbHMuIik<span class="hljs-number">7</span>CiAgICAgICAgfQogICAgICAgIGlmIChzaXplIDw<span class="hljs-number">9</span>IDApIHsKICAgICAgICAgICAgdGhyb<span class="hljs-number">3</span>cgbmV<span class="hljs-number">3</span>IElsbGVnYWxBcmd<span class="hljs-number">1</span>bWVudEV<span class="hljs-number">4</span>Y<span class="hljs-number">2</span>VwdGlvbigic<span class="hljs-number">2</span>l<span class="hljs-number">6</span>ZSBtdXN<span class="hljs-number">0</span>IGJlIGdyZWF<span class="hljs-number">0</span>ZXIgdGhhbiB<span class="hljs-number">6</span>ZXJvLiIpOwogICAgICAgIH<span class="hljs-number">0</span>KICAgICAgICBmaW<span class="hljs-number">5</span>hbCBpbnQgbWFzayA<span class="hljs-number">9</span>ICgyIDw<span class="hljs-number">8</span>IChpbnQpIE<span class="hljs-number">1</span>hdGguZmxvb<span class="hljs-number">3</span>IoTWF<span class="hljs-number">0</span>aC<span class="hljs-number">5</span>sb<span class="hljs-number">2</span>coYWxwaGFiZXQubGVuZ<span class="hljs-number">3</span>RoIC<span class="hljs-number">0</span>gMSkgLyBNYXRoLmxvZygyKSkpIC<span class="hljs-number">0</span>gMTsKICAgICAgICBmaW<span class="hljs-number">5</span>hbCBpbnQgc<span class="hljs-number">3</span>RlcCA<span class="hljs-number">9</span>IChpbnQpIE<span class="hljs-number">1</span>hdGguY<span class="hljs-number">2</span>VpbCgxLjYgKiBtYXNrICogc<span class="hljs-number">2</span>l<span class="hljs-number">6</span>ZSAvIGFscGhhYmV<span class="hljs-number">0</span>Lmxlbmd<span class="hljs-number">0</span>aCk<span class="hljs-number">7</span>CgogICAgICAgIGZpbmFsIFN<span class="hljs-number">0</span>cmluZ<span class="hljs-number">0</span>J<span class="hljs-number">1</span>aWxkZXIgaWRCdWlsZGVyID<span class="hljs-number">0</span>gbmV<span class="hljs-number">3</span>IFN<span class="hljs-number">0</span>cmluZ<span class="hljs-number">0</span>J<span class="hljs-number">1</span>aWxkZXIoc<span class="hljs-number">2</span>l<span class="hljs-number">6</span>ZSk<span class="hljs-number">7</span>CiAgICAgICAgZmluYWwgYnl<span class="hljs-number">0</span>ZVtdIGJ<span class="hljs-number">5</span>dGVzID<span class="hljs-number">0</span>gbmV<span class="hljs-number">3</span>IGJ<span class="hljs-number">5</span>dGVbc<span class="hljs-number">3</span>RlcF<span class="hljs-number">07</span>CgogICAgICAgIHdoaWxlICh<span class="hljs-number">0</span>cnVlKSB<span class="hljs-number">7</span>CiAgICAgICAgICAgIHJhbmRvbS<span class="hljs-number">5</span>uZXh<span class="hljs-number">0</span>Qnl<span class="hljs-number">0</span>ZXMoYnl<span class="hljs-number">0</span>ZXMpOwogICAgICAgICAgICBmb<span class="hljs-number">3</span>IgKGludCBpID<span class="hljs-number">0</span>gMDsgaSA<span class="hljs-number">8</span>IHN<span class="hljs-number">0</span>ZXA<span class="hljs-number">7</span>IGkrKykgewogICAgICAgICAgICAgICAgZmluYWwgaW<span class="hljs-number">50</span>IGFscGhhYmV<span class="hljs-number">0</span>SW<span class="hljs-number">5</span>kZXggPSBieXRlc<span class="hljs-number">1</span>tpXSAmIG<span class="hljs-number">1</span>hc<span class="hljs-number">2</span>s<span class="hljs-number">7</span>CiAgICAgICAgICAgICAgICBpZiAoYWxwaGFiZXRJbmRleCA<span class="hljs-number">8</span>IGFscGhhYmV<span class="hljs-number">0</span>Lmxlbmd<span class="hljs-number">0</span>aCkgewogICAgICAgICAgICAgICAgICAgIGlkQnVpbGRlci<span class="hljs-number">5</span>hcHBlbmQoYWxwaGFiZXRbYWxwaGFiZXRJbmRleF<span class="hljs-number">0</span>pOwogICAgICAgICAgICAgICAgICAgIGlmIChpZEJ<span class="hljs-number">1</span>aWxkZXIubGVuZ<span class="hljs-number">3</span>RoKCkgPT<span class="hljs-number">0</span>gc<span class="hljs-number">2</span>l<span class="hljs-number">6</span>ZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR<span class="hljs-number">1</span>cm<span class="hljs-number">4</span>gaWRCdWlsZGVyLnRvU<span class="hljs-number">3</span>RyaW<span class="hljs-number">5</span>nKCk<span class="hljs-number">7</span>CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB<span class="hljs-number">9</span>CiAgICAgICAgfQogICAgfQp<span class="hljs-number">9</span>Cg==<br></code></pre></td></tr></table></figure><h2 id="结果输出-1"><a href="#结果输出-1" class="headerlink" title="结果输出"></a>结果输出</h2><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">TnFCRGpBU1RiUWU4MzRUbk55T0UxCg</span>==\n<br></code></pre></td></tr></table></figure><h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">63</span>,<br>    <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;JavaScript (Node.js 12.14.0)&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 教学函数：打印欢迎信息</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printWelcomeMessage</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;欢迎来到 Node.js 基础教学!&quot;</span>);<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;这是一个简单的 Node.js 示例程序。\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// 加法函数</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">a, b</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-comment">// 打印数组函数</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printArray</span>(<span class="hljs-params">arr</span>) </span>&#123;<br>    arr.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>        process.stdout.write(item + <span class="hljs-string">&quot; &quot;</span>);  <span class="hljs-comment">// 输出而不换行</span><br>    &#125;);<br>    <span class="hljs-built_in">console</span>.log();  <span class="hljs-comment">// 换行</span><br>&#125;<br><br><span class="hljs-comment">// 主程序</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span>(<span class="hljs-params">num1, num2</span>) </span>&#123;<br>    <span class="hljs-comment">// 欢迎信息</span><br>    printWelcomeMessage();<br><br>    <span class="hljs-comment">// 条件判断</span><br>    <span class="hljs-keyword">if</span> (num1 === num2) &#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;两个数相等!&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (num1 &gt; num2) &#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;第一个数大于第二个数&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;第一个数小于第二个数&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// 调用加法函数</span><br>    <span class="hljs-keyword">const</span> result = add(num1, num2);<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`两个数的和是: <span class="hljs-subst">$&#123;result&#125;</span>`</span>);<br><br>    <span class="hljs-comment">// 数组操作</span><br>    <span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;数组的元素: &quot;</span>);<br>    printArray(arr);<br><br>    <span class="hljs-comment">// 循环打印 1 到 10</span><br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;1到10的数字: &quot;</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) &#123;<br>        process.stdout.write(i + <span class="hljs-string">&quot; &quot;</span>);  <span class="hljs-comment">// 输出而不换行</span><br>    &#125;<br>    <span class="hljs-built_in">console</span>.log();  <span class="hljs-comment">// 换行</span><br><br>    <span class="hljs-comment">// 程序结束</span><br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;感谢使用 Node.js 教程!&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// 调用主程序，传递参数代替用户输入</span><br>main(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>);<br><br></code></pre></td></tr></table></figure><h2 id="编码-2"><a href="#编码-2" class="headerlink" title="编码"></a>编码</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Ly8g5pWZ5a2m5Ye95pWw77ya5omT5Y2w5qyi6L</span>+O<span class="hljs-number">5</span>L+h<span class="hljs-number">5</span>oGvCmZ<span class="hljs-number">1</span>bmN<span class="hljs-number">0</span>aW<span class="hljs-number">9</span>uIHByaW<span class="hljs-number">50</span>V<span class="hljs-number">2</span>VsY<span class="hljs-number">29</span>tZU<span class="hljs-number">1</span>lc<span class="hljs-number">3</span>NhZ<span class="hljs-number">2</span>UoKSB<span class="hljs-number">7</span>CiAgICBjb<span class="hljs-number">25</span>zb<span class="hljs-number">2</span>xlLmxvZygi<span class="hljs-number">5</span>qyi<span class="hljs-number">6</span>L+O<span class="hljs-number">5</span>p<span class="hljs-number">2</span>l<span class="hljs-number">5</span>YiwIE<span class="hljs-number">5</span>vZGUuanMg<span class="hljs-number">5</span>Z+<span class="hljs-number">656</span>GA<span class="hljs-number">5</span>pWZ<span class="hljs-number">5</span>a<span class="hljs-number">2</span>mISIpOwogICAgY<span class="hljs-number">29</span>uc<span class="hljs-number">29</span>sZS<span class="hljs-number">5</span>sb<span class="hljs-number">2</span>coIui/meaYr+S<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>queugOWNleeahCBOb<span class="hljs-number">2</span>RlLmpzIOekuuS+i+eoi+W<span class="hljs-number">6</span>j+OAglxuIik<span class="hljs-number">7</span>Cn<span class="hljs-number">0</span>KCi<span class="hljs-number">8</span>vIOWKoOazleWHveaVsApmdW<span class="hljs-number">5</span>jdGlvbiBhZGQoYSwgYikgewogICAgcmV<span class="hljs-number">0</span>dXJuIGEgKyBiOwp<span class="hljs-number">9</span>CgovLyDmiZPljbDmlbDnu<span class="hljs-number">4</span>Tlh<span class="hljs-number">73</span>mlbAKZnVuY<span class="hljs-number">3</span>Rpb<span class="hljs-number">24</span>gcHJpbnRBcnJheShhcnIpIHsKICAgIGFyci<span class="hljs-number">5</span>mb<span class="hljs-number">3</span>JFYWNoKGl<span class="hljs-number">0</span>ZW<span class="hljs-number">0</span>gPT<span class="hljs-number">4</span>gewogICAgICAgIHByb<span class="hljs-number">2</span>Nlc<span class="hljs-number">3</span>Muc<span class="hljs-number">3</span>Rkb<span class="hljs-number">3</span>V<span class="hljs-number">0</span>LndyaXRlKGl<span class="hljs-number">0</span>ZW<span class="hljs-number">0</span>gKyAiICIpOyAgLy<span class="hljs-number">8</span>g<span class="hljs-number">6</span>L<span class="hljs-number">6</span>T<span class="hljs-number">5</span>Ye<span class="hljs-number">66</span>ICM<span class="hljs-number">5</span>LiN<span class="hljs-number">5</span>o<span class="hljs-number">2</span>i<span class="hljs-number">6</span>KGMCiAgICB<span class="hljs-number">9</span>KTsKICAgIGNvbnNvbGUubG<span class="hljs-number">9</span>nKCk<span class="hljs-number">7</span>ICAvLyDmjaLooYwKfQoKLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>Li<span class="hljs-number">756</span>iL<span class="hljs-number">5</span>bqPCmZ<span class="hljs-number">1</span>bmN<span class="hljs-number">0</span>aW<span class="hljs-number">9</span>uIG<span class="hljs-number">1</span>haW<span class="hljs-number">4</span>obnVtMSwgbnVtMikgewogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>qyi<span class="hljs-number">6</span>L+O<span class="hljs-number">5</span>L+h<span class="hljs-number">5</span>oGvCiAgICBwcmludFdlbGNvbWVNZXNzYWdlKCk<span class="hljs-number">7</span>CgogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>p<span class="hljs-number">2</span>h<span class="hljs-number">5</span>Lu<span class="hljs-number">25</span>Yik<span class="hljs-number">5</span>patCiAgICBpZiAobnVtMSA<span class="hljs-number">9</span>PT<span class="hljs-number">0</span>gbnVtMikgewogICAgICAgIGNvbnNvbGUubG<span class="hljs-number">9</span>nKCLkuKTkuKrmlbDnm<span class="hljs-number">7</span>jnrYkhIik<span class="hljs-number">7</span>CiAgICB<span class="hljs-number">9</span>IGVsc<span class="hljs-number">2</span>UgaWYgKG<span class="hljs-number">51</span>bTEgPiBudW<span class="hljs-number">0</span>yKSB<span class="hljs-number">7</span>CiAgICAgICAgY<span class="hljs-number">29</span>uc<span class="hljs-number">29</span>sZS<span class="hljs-number">5</span>sb<span class="hljs-number">2</span>coIuesrOS<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>quaVsOWkp+S<span class="hljs-number">6</span>juesrOS<span class="hljs-number">6</span>jOS<span class="hljs-number">4</span>quaVsCIpOwogICAgfSBlbHNlIHsKICAgICAgICBjb<span class="hljs-number">25</span>zb<span class="hljs-number">2</span>xlLmxvZygi<span class="hljs-number">56</span>ys<span class="hljs-number">5</span>LiA<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">5</span>bCP<span class="hljs-number">5</span>LqO<span class="hljs-number">56</span>ys<span class="hljs-number">5</span>LqM<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWwIik<span class="hljs-number">7</span>CiAgICB<span class="hljs-number">9</span>CgogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">6</span>LCD<span class="hljs-number">55</span>So<span class="hljs-number">5</span>Yqg<span class="hljs-number">5</span>rOV<span class="hljs-number">5</span>Ye<span class="hljs-number">95</span>pWwCiAgICBjb<span class="hljs-number">25</span>zdCByZXN<span class="hljs-number">1</span>bHQgPSBhZGQobnVtMSwgbnVtMik<span class="hljs-number">7</span>CiAgICBjb<span class="hljs-number">25</span>zb<span class="hljs-number">2</span>xlLmxvZyhg<span class="hljs-number">5</span>Lik<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>ZKM<span class="hljs-number">5</span>pivOiAke<span class="hljs-number">3</span>Jlc<span class="hljs-number">3</span>VsdH<span class="hljs-number">1</span>gKTsKCiAgICAvLyDmlbDnu<span class="hljs-number">4</span>Tmk<span class="hljs-number">43</span>kvZwKICAgIGNvbnN<span class="hljs-number">0</span>IGFyciA<span class="hljs-number">9</span>IFsxLCAyLCAzLCA<span class="hljs-number">0</span>LCA<span class="hljs-number">1</span>XTsKICAgIGNvbnNvbGUubG<span class="hljs-number">9</span>nKCLmlbDnu<span class="hljs-number">4</span>TnmoTlhYPntKA<span class="hljs-number">6</span>ICIpOwogICAgcHJpbnRBcnJheShhcnIpOwoKICAgIC<span class="hljs-number">8</span>vIOW+queOr+aJk+WNsCAxIOWIsCAxMAogICAgY<span class="hljs-number">29</span>uc<span class="hljs-number">29</span>sZS<span class="hljs-number">5</span>sb<span class="hljs-number">2</span>coIjHliLAxMOeahOaVsOWtlzogIik<span class="hljs-number">7</span>CiAgICBmb<span class="hljs-number">3</span>IgKGxldCBpID<span class="hljs-number">0</span>gMTsgaSA<span class="hljs-number">8</span>PSAxMDsgaSsrKSB<span class="hljs-number">7</span>CiAgICAgICAgcHJvY<span class="hljs-number">2</span>Vzcy<span class="hljs-number">5</span>zdGRvdXQud<span class="hljs-number">3</span>JpdGUoaSArICIgIik<span class="hljs-number">7</span>ICAvLyDovpPlh<span class="hljs-number">7</span>rogIzkuI<span class="hljs-number">3</span>mjaLooYwKICAgIH<span class="hljs-number">0</span>KICAgIGNvbnNvbGUubG<span class="hljs-number">9</span>nKCk<span class="hljs-number">7</span>ICAvLyDmjaLooYwKCiAgICAvLyDnqIvluo/nu<span class="hljs-number">5</span>PmnZ<span class="hljs-number">8</span>KICAgIGNvbnNvbGUubG<span class="hljs-number">9</span>nKCLmhJ/osKLkvb/nlKggTm<span class="hljs-number">9</span>kZS<span class="hljs-number">5</span>qcyDmlZnnqIshIik<span class="hljs-number">7</span>Cn<span class="hljs-number">0</span>KCi<span class="hljs-number">8</span>vIOiwg+eUqOS<span class="hljs-number">4</span>u+eoi+W<span class="hljs-number">6</span>j++<span class="hljs-number">8</span>jOS<span class="hljs-number">8</span>oOmAkuWPguaVsOS<span class="hljs-number">7</span>o+abv+eUqOaIt+i+k+WFpQptYWluKDUsIDMpOwo=<br></code></pre></td></tr></table></figure><h2 id="输出结果"><a href="#输出结果" class="headerlink" title="输出结果"></a>输出结果</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">5qyi6L</span>+O<span class="hljs-number">5</span>p<span class="hljs-number">2</span>l<span class="hljs-number">5</span>YiwIE<span class="hljs-number">5</span>vZGUuanMg<span class="hljs-number">5</span>Z+<span class="hljs-number">656</span>GA<span class="hljs-number">5</span>pWZ<span class="hljs-number">5</span>a<span class="hljs-number">2</span>mIQrov<span class="hljs-number">5</span>nmmK/kuIDk\nuKrnroDljZXnmoQgTm<span class="hljs-number">9</span>kZS<span class="hljs-number">5</span>qcyDnpLrkvovnqIvluo/jgIIKCuesrOS<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>\nquaVsOWkp+S<span class="hljs-number">6</span>juesrOS<span class="hljs-number">6</span>jOS<span class="hljs-number">4</span>quaVsArkuKTkuKrmlbDnmoTlkozmmK<span class="hljs-number">86</span>IDgK\n<span class="hljs-number">5</span>pWw<span class="hljs-number">57</span>uE<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>YWD<span class="hljs-number">57</span>SgOiAKMSAyIDMgNCA<span class="hljs-number">1</span>IAox<span class="hljs-number">5</span>YiwMTDnmoTmlbDlrZc<span class="hljs-number">6</span>\nIAoxIDIgMyA<span class="hljs-number">0</span>IDUgNiA<span class="hljs-number">3</span>IDggOSAxMCAK<span class="hljs-number">5</span>oSf<span class="hljs-number">6</span>LCi<span class="hljs-number">5</span>L<span class="hljs-number">2</span>/<span class="hljs-number">55</span>SoIE<span class="hljs-number">5</span>vZGUuanMg\n<span class="hljs-number">5</span>pWZ<span class="hljs-number">56</span>iLIQo=\n<br></code></pre></td></tr></table></figure><h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs 1c">&#123;<br>    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">70</span>,<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Python (2.7.17)&quot;</span><br>&#125;,<br>&#123;<br>    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">71</span>,<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Python (3.8.1)&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>Python (3.8.1)</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># 欢迎信息函数</span><br>def print_welcome_message():<br>    <span class="hljs-builtin-name">print</span>(<span class="hljs-string">&quot;欢迎来到 Python 基础教学!&quot;</span>)<br>    <span class="hljs-builtin-name">print</span>(<span class="hljs-string">&quot;这是一个简单的 Python 示例程序。\n&quot;</span>)<br><br><span class="hljs-comment"># 加法函数</span><br>def <span class="hljs-builtin-name">add</span>(a, b):<br>    return a + b<br><br><span class="hljs-comment"># 打印列表函数</span><br>def print_list(lst):<br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> lst:<br>        <span class="hljs-builtin-name">print</span>(item, <span class="hljs-attribute">end</span>=<span class="hljs-string">&quot; &quot;</span>)<br>    <span class="hljs-builtin-name">print</span>()  # 换行<br><br><span class="hljs-comment"># 主程序</span><br>def main():<br>    # 欢迎信息<br>    print_welcome_message()<br><br>    # 基本输入输出<br>    num1 = 1<br>    num2 = 2<br><br>    # 条件判断<br>    <span class="hljs-keyword">if</span> num1 == num2:<br>        <span class="hljs-builtin-name">print</span>(<span class="hljs-string">&quot;两个数相等!&quot;</span>)<br>    elif num1 &gt; num2:<br>        <span class="hljs-builtin-name">print</span>(<span class="hljs-string">&quot;第一个数大于第二个数&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-builtin-name">print</span>(<span class="hljs-string">&quot;第一个数小于第二个数&quot;</span>)<br><br>    # 调用加法函数<br>    result = <span class="hljs-builtin-name">add</span>(num1, num2)<br>    <span class="hljs-builtin-name">print</span>(f<span class="hljs-string">&quot;两个数的和是: &#123;result&#125;&quot;</span>)<br><br>    # 列表操作<br>    my_list = [1, 2, 3, 4, 5]<br>    <span class="hljs-builtin-name">print</span>(<span class="hljs-string">&quot;列表的元素: &quot;</span>, <span class="hljs-attribute">end</span>=<span class="hljs-string">&quot;&quot;</span>)<br>    print_list(my_list)  # 打印列表中的元素<br><br>    # 循环打印 1 到 10<br>    <span class="hljs-builtin-name">print</span>(<span class="hljs-string">&quot;1到10的数字: &quot;</span>, <span class="hljs-attribute">end</span>=<span class="hljs-string">&quot;&quot;</span>)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(1, 11):<br>        <span class="hljs-builtin-name">print</span>(i, <span class="hljs-attribute">end</span>=<span class="hljs-string">&quot; &quot;</span>)<br>    <span class="hljs-builtin-name">print</span>()  # 换行<br><br>    # 程序结束<br>    <span class="hljs-builtin-name">print</span>(<span class="hljs-string">&quot;感谢使用 Python 教程!&quot;</span>)<br><br><span class="hljs-comment"># 调用主程序</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br></code></pre></td></tr></table></figure><h2 id="编码-3"><a href="#编码-3" class="headerlink" title="编码"></a>编码</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">IyDmrKLov47kv6Hmga</span>/lh<span class="hljs-number">73</span>mlbAKZGVmIHByaW<span class="hljs-number">50</span>X<span class="hljs-number">3</span>dlbGNvbWVfbWVzc<span class="hljs-number">2</span>FnZSgpOgogICAgcHJpbnQoIuasoui/juadpeWIsCBQeXRob<span class="hljs-number">24</span>g<span class="hljs-number">5</span>Z+<span class="hljs-number">656</span>GA<span class="hljs-number">5</span>pWZ<span class="hljs-number">5</span>a<span class="hljs-number">2</span>mISIpCiAgICBwcmludCgi<span class="hljs-number">6</span>L+Z<span class="hljs-number">5</span>piv<span class="hljs-number">5</span>LiA<span class="hljs-number">5</span>Liq<span class="hljs-number">566</span>A<span class="hljs-number">5</span>Y<span class="hljs-number">2</span>V<span class="hljs-number">55</span>qEIFB<span class="hljs-number">5</span>dGhvbiDnpLrkvovnqIvluo/jgIJcbiIpCgojIOWKoOazleWHveaVsApkZWYgYWRkKGEsIGIpOgogICAgcmV<span class="hljs-number">0</span>dXJuIGEgKyBiCgojIOaJk+WNsOWIl+ihqOWHveaVsApkZWYgcHJpbnRfbGlzdChsc<span class="hljs-number">3</span>QpOgogICAgZm<span class="hljs-number">9</span>yIGl<span class="hljs-number">0</span>ZW<span class="hljs-number">0</span>gaW<span class="hljs-number">4</span>gbHN<span class="hljs-number">0</span>OgogICAgICAgIHByaW<span class="hljs-number">50</span>KGl<span class="hljs-number">0</span>ZW<span class="hljs-number">0</span>sIGVuZD<span class="hljs-number">0</span>iICIpCiAgICBwcmludCgpICAjIOaNouihjAoKIyDkuLvnqIvluo<span class="hljs-number">8</span>KZGVmIG<span class="hljs-number">1</span>haW<span class="hljs-number">4</span>oKToKICAgICMg<span class="hljs-number">5</span>qyi<span class="hljs-number">6</span>L+O<span class="hljs-number">5</span>L+h<span class="hljs-number">5</span>oGvCiAgICBwcmludF<span class="hljs-number">93</span>ZWxjb<span class="hljs-number">21</span>lX<span class="hljs-number">21</span>lc<span class="hljs-number">3</span>NhZ<span class="hljs-number">2</span>UoKQoKICAgICMg<span class="hljs-number">5</span>Z+<span class="hljs-number">65</span>pys<span class="hljs-number">6</span>L<span class="hljs-number">6</span>T<span class="hljs-number">5</span>YWl<span class="hljs-number">6</span>L<span class="hljs-number">6</span>T<span class="hljs-number">5</span>Ye<span class="hljs-number">6</span>CiAgICBudW<span class="hljs-number">0</span>xID<span class="hljs-number">0</span>gMQogICAgbnVtMiA<span class="hljs-number">9</span>IDIKCiAgICAjIOadoeS<span class="hljs-number">7</span>tuWIpOaWrQogICAgaWYgbnVtMSA<span class="hljs-number">9</span>PSBudW<span class="hljs-number">0</span>yOgogICAgICAgIHByaW<span class="hljs-number">50</span>KCLkuKTkuKrmlbDnm<span class="hljs-number">7</span>jnrYkhIikKICAgIGVsaWYgbnVtMSA+IG<span class="hljs-number">51</span>bTI<span class="hljs-number">6</span>CiAgICAgICAgcHJpbnQoIuesrOS<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>quaVsOWkp+S<span class="hljs-number">6</span>juesrOS<span class="hljs-number">6</span>jOS<span class="hljs-number">4</span>quaVsCIpCiAgICBlbHNlOgogICAgICAgIHByaW<span class="hljs-number">50</span>KCLnrKzkuIDkuKrmlbDlsI/kuo<span class="hljs-number">7</span>nrKzkuozkuKrmlbAiKQoKICAgICMg<span class="hljs-number">6</span>LCD<span class="hljs-number">55</span>So<span class="hljs-number">5</span>Yqg<span class="hljs-number">5</span>rOV<span class="hljs-number">5</span>Ye<span class="hljs-number">95</span>pWwCiAgICByZXN<span class="hljs-number">1</span>bHQgPSBhZGQobnVtMSwgbnVtMikKICAgIHByaW<span class="hljs-number">50</span>KGYi<span class="hljs-number">5</span>Lik<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>ZKM<span class="hljs-number">5</span>pivOiB<span class="hljs-number">7</span>cmVzdWx<span class="hljs-number">0</span>fSIpCgogICAgIyDliJfooajmk<span class="hljs-number">43</span>kvZwKICAgIG<span class="hljs-number">15</span>X<span class="hljs-number">2</span>xpc<span class="hljs-number">3</span>QgPSBbMSwgMiwgMywgNCwgNV<span class="hljs-number">0</span>KICAgIHByaW<span class="hljs-number">50</span>KCLliJfooajnmoTlhYPntKA<span class="hljs-number">6</span>ICIsIGVuZD<span class="hljs-number">0</span>iIikKICAgIHByaW<span class="hljs-number">50</span>X<span class="hljs-number">2</span>xpc<span class="hljs-number">3</span>QobXlfbGlzdCkgICMg<span class="hljs-number">5</span>omT<span class="hljs-number">5</span>Y<span class="hljs-number">2</span>w<span class="hljs-number">5</span>YiX<span class="hljs-number">6</span>KGo<span class="hljs-number">5</span>Lit<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>YWD<span class="hljs-number">57</span>SgCgogICAgIyDlvqrnjq/miZPljbAgMSDliLAgMTAKICAgIHByaW<span class="hljs-number">50</span>KCIx<span class="hljs-number">5</span>YiwMTDnmoTmlbDlrZc<span class="hljs-number">6</span>ICIsIGVuZD<span class="hljs-number">0</span>iIikKICAgIGZvciBpIGluIHJhbmdlKDEsIDExKToKICAgICAgICBwcmludChpLCBlbmQ<span class="hljs-number">9</span>IiAiKQogICAgcHJpbnQoKSAgIyDmjaLooYwKCiAgICAjIOeoi+W<span class="hljs-number">6</span>j+e<span class="hljs-number">7</span>k+adnwogICAgcHJpbnQoIuaEn+iwouS<span class="hljs-number">9</span>v+eUqCBQeXRob<span class="hljs-number">24</span>g<span class="hljs-number">5</span>pWZ<span class="hljs-number">56</span>iLISIpCgojIOiwg+eUqOS<span class="hljs-number">4</span>u+eoi+W<span class="hljs-number">6</span>jwppZiBfX<span class="hljs-number">25</span>hbWVfXyA<span class="hljs-number">9</span>PSAiX<span class="hljs-number">19</span>tYWluX<span class="hljs-number">18</span>iOgogICAgbWFpbigpCg==<br></code></pre></td></tr></table></figure><h2 id="结果输出-2"><a href="#结果输出-2" class="headerlink" title="结果输出"></a>结果输出</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">5qyi6L</span>+O<span class="hljs-number">5</span>p<span class="hljs-number">2</span>l<span class="hljs-number">5</span>YiwIFB<span class="hljs-number">5</span>dGhvbiDln<span class="hljs-number">7</span>rnoYDmlZnlraYhCui/meaYr+S<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>\nqueugOWNleeahCBQeXRob<span class="hljs-number">24</span>g<span class="hljs-number">56</span>S<span class="hljs-number">65</span>L<span class="hljs-number">6</span>L<span class="hljs-number">56</span>iL<span class="hljs-number">5</span>bqP<span class="hljs-number">44</span>CCCgrnrKzkuIDkuKrm\nlbDlsI/kuo<span class="hljs-number">7</span>nrKzkuozkuKrmlbAK<span class="hljs-number">5</span>Lik<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>ZKM<span class="hljs-number">5</span>pivOiAzCuWI\nl+ihqOeahOWFg+e<span class="hljs-number">0</span>oDogMSAyIDMgNCA<span class="hljs-number">1</span>IAox<span class="hljs-number">5</span>YiwMTDnmoTmlbDlrZc<span class="hljs-number">6</span>IDEg\nMiAzIDQgNSA<span class="hljs-number">2</span>IDcgOCA<span class="hljs-number">5</span>IDEwIArmhJ/osKLkvb/nlKggUHl<span class="hljs-number">0</span>aG<span class="hljs-number">9</span>uIOaVmeeo\niyEK\n<br></code></pre></td></tr></table></figure><p><strong>Python (2.7.17)</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><br><span class="hljs-comment"># 欢迎信息函数</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_welcome_message</span>():</span><br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;欢迎来到 Python 基础教学!&quot;</span><br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;这是一个简单的 Python 示例程序。\n&quot;</span><br><br><span class="hljs-comment"># 加法函数</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span>(<span class="hljs-params">a, b</span>):</span><br>    <span class="hljs-keyword">return</span> a + b<br><br><span class="hljs-comment"># 打印列表函数</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_list</span>(<span class="hljs-params">lst</span>):</span><br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> lst:<br>        <span class="hljs-keyword">print</span> item,  <span class="hljs-comment"># 使用逗号避免换行</span><br>    <span class="hljs-keyword">print</span>  <span class="hljs-comment"># 输出一个换行</span><br><br><span class="hljs-comment"># 主程序</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-comment"># 欢迎信息</span><br>    print_welcome_message()<br><br>    <span class="hljs-comment"># 基本输入输出</span><br>    num1 = <span class="hljs-number">1</span><br>    num2 = <span class="hljs-number">2</span><br><br>    <span class="hljs-comment"># 条件判断</span><br>    <span class="hljs-keyword">if</span> num1 == num2:<br>        <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;两个数相等!&quot;</span><br>    <span class="hljs-keyword">elif</span> num1 &gt; num2:<br>        <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;第一个数大于第二个数&quot;</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;第一个数小于第二个数&quot;</span><br><br>    <span class="hljs-comment"># 调用加法函数</span><br>    result = add(num1, num2)<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;两个数的和是: &#123;&#125;&quot;</span>.format(result)<br><br>    <span class="hljs-comment"># 列表操作</span><br>    my_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;列表的元素: &quot;</span>,<br>    print_list(my_list)  <span class="hljs-comment"># 打印列表中的元素</span><br><br>    <span class="hljs-comment"># 循环打印 1 到 10</span><br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;1到10的数字: &quot;</span>,<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>):<br>        <span class="hljs-keyword">print</span> i,  <span class="hljs-comment"># 输出数字，不换行</span><br>    <span class="hljs-keyword">print</span>  <span class="hljs-comment"># 输出一个换行</span><br><br>    <span class="hljs-comment"># 程序结束</span><br>    <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;感谢使用 Python 教程!&quot;</span><br><br><span class="hljs-comment"># 调用主程序</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br></code></pre></td></tr></table></figure><h2 id="编码-4"><a href="#编码-4" class="headerlink" title="编码"></a>编码</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KCiMg5qyi6L</span>+O<span class="hljs-number">5</span>L+h<span class="hljs-number">5</span>oGv<span class="hljs-number">5</span>Ye<span class="hljs-number">95</span>pWwCmRlZiBwcmludF<span class="hljs-number">93</span>ZWxjb<span class="hljs-number">21</span>lX<span class="hljs-number">21</span>lc<span class="hljs-number">3</span>NhZ<span class="hljs-number">2</span>UoKToKICAgIHByaW<span class="hljs-number">50</span>ICLmrKLov<span class="hljs-number">47</span>mnaXliLAgUHl<span class="hljs-number">0</span>aG<span class="hljs-number">9</span>uIOWfuuehgOaVmeWtpiEiCiAgICBwcmludCAi<span class="hljs-number">6</span>L+Z<span class="hljs-number">5</span>piv<span class="hljs-number">5</span>LiA<span class="hljs-number">5</span>Liq<span class="hljs-number">566</span>A<span class="hljs-number">5</span>Y<span class="hljs-number">2</span>V<span class="hljs-number">55</span>qEIFB<span class="hljs-number">5</span>dGhvbiDnpLrkvovnqIvluo/jgIJcbiIKCiMg<span class="hljs-number">5</span>Yqg<span class="hljs-number">5</span>rOV<span class="hljs-number">5</span>Ye<span class="hljs-number">95</span>pWwCmRlZiBhZGQoYSwgYik<span class="hljs-number">6</span>CiAgICByZXR<span class="hljs-number">1</span>cm<span class="hljs-number">4</span>gYSArIGIKCiMg<span class="hljs-number">5</span>omT<span class="hljs-number">5</span>Y<span class="hljs-number">2</span>w<span class="hljs-number">5</span>YiX<span class="hljs-number">6</span>KGo<span class="hljs-number">5</span>Ye<span class="hljs-number">95</span>pWwCmRlZiBwcmludF<span class="hljs-number">9</span>saXN<span class="hljs-number">0</span>KGxzdCk<span class="hljs-number">6</span>CiAgICBmb<span class="hljs-number">3</span>IgaXRlbSBpbiBsc<span class="hljs-number">3</span>Q<span class="hljs-number">6</span>CiAgICAgICAgcHJpbnQgaXRlbSwgICMg<span class="hljs-number">5</span>L<span class="hljs-number">2</span>/<span class="hljs-number">55</span>So<span class="hljs-number">6</span>YCX<span class="hljs-number">5</span>Y+<span class="hljs-number">36</span>YG/<span class="hljs-number">5</span>YWN<span class="hljs-number">5</span>o<span class="hljs-number">2</span>i<span class="hljs-number">6</span>KGMCiAgICBwcmludCAgIyDovpPlh<span class="hljs-number">7</span>rkuIDkuKrmjaLooYwKCiMg<span class="hljs-number">5</span>Li<span class="hljs-number">756</span>iL<span class="hljs-number">5</span>bqPCmRlZiBtYWluKCk<span class="hljs-number">6</span>CiAgICAjIOasoui/juS/oeaBrwogICAgcHJpbnRfd<span class="hljs-number">2</span>VsY<span class="hljs-number">29</span>tZV<span class="hljs-number">9</span>tZXNzYWdlKCkKCiAgICAjIOWfuuacrOi+k+WFpei+k+WHugogICAgbnVtMSA<span class="hljs-number">9</span>IDEKICAgIG<span class="hljs-number">51</span>bTIgPSAyCgogICAgIyDmnaHku<span class="hljs-number">7</span>bliKTmlq<span class="hljs-number">0</span>KICAgIGlmIG<span class="hljs-number">51</span>bTEgPT<span class="hljs-number">0</span>gbnVtMjoKICAgICAgICBwcmludCAi<span class="hljs-number">5</span>Lik<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">55</span>u<span class="hljs-number">4562</span>JISIKICAgIGVsaWYgbnVtMSA+IG<span class="hljs-number">51</span>bTI<span class="hljs-number">6</span>CiAgICAgICAgcHJpbnQgIuesrOS<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>quaVsOWkp+S<span class="hljs-number">6</span>juesrOS<span class="hljs-number">6</span>jOS<span class="hljs-number">4</span>quaVsCIKICAgIGVsc<span class="hljs-number">2</span>U<span class="hljs-number">6</span>CiAgICAgICAgcHJpbnQgIuesrOS<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>quaVsOWwj+S<span class="hljs-number">6</span>juesrOS<span class="hljs-number">6</span>jOS<span class="hljs-number">4</span>quaVsCIKCiAgICAjIOiwg+eUqOWKoOazleWHveaVsAogICAgcmVzdWx<span class="hljs-number">0</span>ID<span class="hljs-number">0</span>gYWRkKG<span class="hljs-number">51</span>bTEsIG<span class="hljs-number">51</span>bTIpCiAgICBwcmludCAi<span class="hljs-number">5</span>Lik<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>ZKM<span class="hljs-number">5</span>pivOiB<span class="hljs-number">7</span>fSIuZm<span class="hljs-number">9</span>ybWF<span class="hljs-number">0</span>KHJlc<span class="hljs-number">3</span>VsdCkKCiAgICAjIOWIl+ihqOaTjeS<span class="hljs-number">9</span>nAogICAgbXlfbGlzdCA<span class="hljs-number">9</span>IFsxLCAyLCAzLCA<span class="hljs-number">0</span>LCA<span class="hljs-number">1</span>XQogICAgcHJpbnQgIuWIl+ihqOeahOWFg+e<span class="hljs-number">0</span>oDogIiwKICAgIHByaW<span class="hljs-number">50</span>X<span class="hljs-number">2</span>xpc<span class="hljs-number">3</span>QobXlfbGlzdCkgICMg<span class="hljs-number">5</span>omT<span class="hljs-number">5</span>Y<span class="hljs-number">2</span>w<span class="hljs-number">5</span>YiX<span class="hljs-number">6</span>KGo<span class="hljs-number">5</span>Lit<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>YWD<span class="hljs-number">57</span>SgCgogICAgIyDlvqrnjq/miZPljbAgMSDliLAgMTAKICAgIHByaW<span class="hljs-number">50</span>ICIx<span class="hljs-number">5</span>YiwMTDnmoTmlbDlrZc<span class="hljs-number">6</span>ICIsCiAgICBmb<span class="hljs-number">3</span>IgaSBpbiByYW<span class="hljs-number">5</span>nZSgxLCAxMSk<span class="hljs-number">6</span>CiAgICAgICAgcHJpbnQgaSwgICMg<span class="hljs-number">6</span>L<span class="hljs-number">6</span>T<span class="hljs-number">5</span>Ye<span class="hljs-number">65</span>pWw<span class="hljs-number">5</span>a<span class="hljs-number">2</span>X<span class="hljs-number">77</span>yM<span class="hljs-number">5</span>LiN<span class="hljs-number">5</span>o<span class="hljs-number">2</span>i<span class="hljs-number">6</span>KGMCiAgICBwcmludCAgIyDovpPlh<span class="hljs-number">7</span>rkuIDkuKrmjaLooYwKCiAgICAjIOeoi+W<span class="hljs-number">6</span>j+e<span class="hljs-number">7</span>k+adnwogICAgcHJpbnQgIuaEn+iwouS<span class="hljs-number">9</span>v+eUqCBQeXRob<span class="hljs-number">24</span>g<span class="hljs-number">5</span>pWZ<span class="hljs-number">56</span>iLISIKCiMg<span class="hljs-number">6</span>LCD<span class="hljs-number">55</span>So<span class="hljs-number">5</span>Li<span class="hljs-number">756</span>iL<span class="hljs-number">5</span>bqPCmlmIF<span class="hljs-number">9</span>fbmFtZV<span class="hljs-number">9</span>fID<span class="hljs-number">09</span>ICJfX<span class="hljs-number">21</span>haW<span class="hljs-number">5</span>fXyI<span class="hljs-number">6</span>CiAgICBtYWluKCkK<br></code></pre></td></tr></table></figure><h2 id="输出结果-1"><a href="#输出结果-1" class="headerlink" title="输出结果"></a>输出结果</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">5qyi6L</span>+O<span class="hljs-number">5</span>p<span class="hljs-number">2</span>l<span class="hljs-number">5</span>YiwIFB<span class="hljs-number">5</span>dGhvbiDln<span class="hljs-number">7</span>rnoYDmlZnlraYhCui/meaYr+S<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>\nqueugOWNleeahCBQeXRob<span class="hljs-number">24</span>g<span class="hljs-number">56</span>S<span class="hljs-number">65</span>L<span class="hljs-number">6</span>L<span class="hljs-number">56</span>iL<span class="hljs-number">5</span>bqP<span class="hljs-number">44</span>CCCgrnrKzkuIDkuKrm\nlbDlsI/kuo<span class="hljs-number">7</span>nrKzkuozkuKrmlbAK<span class="hljs-number">5</span>Lik<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>ZKM<span class="hljs-number">5</span>pivOiAzCuWI\nl+ihqOeahOWFg+e<span class="hljs-number">0</span>oDogIDEgMiAzIDQgNQox<span class="hljs-number">5</span>YiwMTDnmoTmlbDlrZc<span class="hljs-number">6</span>ICAx\nIDIgMyA<span class="hljs-number">0</span>IDUgNiA<span class="hljs-number">3</span>IDggOSAxMArmhJ/osKLkvb/nlKggUHl<span class="hljs-number">0</span>aG<span class="hljs-number">9</span>uIOaVmeeo\niyEK\n<br></code></pre></td></tr></table></figure><h1 id="C-1"><a href="#C-1" class="headerlink" title="C++"></a>C++</h1><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs 1c">&#123;<br>    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">52</span>,<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;C++ (GCC 7.4.0)&quot;</span><br>&#125;,<br>&#123;<br>    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">53</span>,<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;C++ (GCC 8.3.0)&quot;</span><br>&#125;,<br>&#123;<br>    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">54</span>,<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;C++ (GCC 9.2.0)&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// 教学函数：打印欢迎信息</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printWelcomeMessage</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;欢迎来到 C++ 基础教学!&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;这是一个简单的 C++ 示例程序。&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br><span class="hljs-comment">// 加法函数</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-comment">// 打印数组函数</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printArray</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; arr)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> item : arr) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; item &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// 输出而不换行</span><br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// 换行</span><br>&#125;<br><br><span class="hljs-comment">// 主程序</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">mainFunction</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num1, <span class="hljs-keyword">int</span> num2)</span> </span>&#123;<br>    <span class="hljs-comment">// 欢迎信息</span><br>    printWelcomeMessage();<br><br>    <span class="hljs-comment">// 条件判断</span><br>    <span class="hljs-keyword">if</span> (num1 == num2) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;两个数相等!&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (num1 &gt; num2) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;第一个数大于第二个数&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;第一个数小于第二个数&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// 调用加法函数</span><br>    <span class="hljs-keyword">int</span> result = add(num1, num2);<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;两个数的和是: &quot;</span> &lt;&lt; result &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>    <span class="hljs-comment">// 数组操作</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; arr = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;数组的元素: &quot;</span>;<br>    printArray(arr);<br><br>    <span class="hljs-comment">// 循环打印 1 到 10</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;1到10的数字: &quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// 输出而不换行</span><br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// 换行</span><br><br>    <span class="hljs-comment">// 程序结束</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;感谢使用 C++ 教程!&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// 调用主程序，传递参数代替用户输入</span><br>    mainFunction(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="编码-5"><a href="#编码-5" class="headerlink" title="编码"></a>编码</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dmVjdG9yPgp1c2luZyBuYW1lc3BhY2Ugc3RkOwoKLy8g5pWZ5a2m5Ye95pWw77ya5omT5Y2w5qyi6L</span>+O<span class="hljs-number">5</span>L+h<span class="hljs-number">5</span>oGvCnZvaWQgcHJpbnRXZWxjb<span class="hljs-number">21</span>lTWVzc<span class="hljs-number">2</span>FnZSgpIHsKICAgIGNvdXQgPDwgIuasoui/juadpeWIsCBDKysg<span class="hljs-number">5</span>Z+<span class="hljs-number">656</span>GA<span class="hljs-number">5</span>pWZ<span class="hljs-number">5</span>a<span class="hljs-number">2</span>mISIgPDwgZW<span class="hljs-number">5</span>kbDsKICAgIGNvdXQgPDwgIui/meaYr+S<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>queugOWNleeahCBDKysg<span class="hljs-number">56</span>S<span class="hljs-number">65</span>L<span class="hljs-number">6</span>L<span class="hljs-number">56</span>iL<span class="hljs-number">5</span>bqP<span class="hljs-number">44</span>CCIiA<span class="hljs-number">8</span>PCBlbmRsIDw<span class="hljs-number">8</span>IGVuZGw<span class="hljs-number">7</span>Cn<span class="hljs-number">0</span>KCi<span class="hljs-number">8</span>vIOWKoOazleWHveaVsAppbnQgYWRkKGludCBhLCBpbnQgYikgewogICAgcmV<span class="hljs-number">0</span>dXJuIGEgKyBiOwp<span class="hljs-number">9</span>CgovLyDmiZPljbDmlbDnu<span class="hljs-number">4</span>Tlh<span class="hljs-number">73</span>mlbAKdm<span class="hljs-number">9</span>pZCBwcmludEFycmF<span class="hljs-number">5</span>KGNvbnN<span class="hljs-number">0</span>IHZlY<span class="hljs-number">3</span>RvcjxpbnQ+JiBhcnIpIHsKICAgIGZvciAoaW<span class="hljs-number">50</span>IGl<span class="hljs-number">0</span>ZW<span class="hljs-number">0</span>gOiBhcnIpIHsKICAgICAgICBjb<span class="hljs-number">3</span>V<span class="hljs-number">0</span>IDw<span class="hljs-number">8</span>IGl<span class="hljs-number">0</span>ZW<span class="hljs-number">0</span>gPDwgIiAiOyAgLy<span class="hljs-number">8</span>g<span class="hljs-number">6</span>L<span class="hljs-number">6</span>T<span class="hljs-number">5</span>Ye<span class="hljs-number">66</span>ICM<span class="hljs-number">5</span>LiN<span class="hljs-number">5</span>o<span class="hljs-number">2</span>i<span class="hljs-number">6</span>KGMCiAgICB<span class="hljs-number">9</span>CiAgICBjb<span class="hljs-number">3</span>V<span class="hljs-number">0</span>IDw<span class="hljs-number">8</span>IGVuZGw<span class="hljs-number">7</span>ICAvLyDmjaLooYwKfQoKLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>Li<span class="hljs-number">756</span>iL<span class="hljs-number">5</span>bqPCnZvaWQgbWFpbkZ<span class="hljs-number">1</span>bmN<span class="hljs-number">0</span>aW<span class="hljs-number">9</span>uKGludCBudW<span class="hljs-number">0</span>xLCBpbnQgbnVtMikgewogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>qyi<span class="hljs-number">6</span>L+O<span class="hljs-number">5</span>L+h<span class="hljs-number">5</span>oGvCiAgICBwcmludFdlbGNvbWVNZXNzYWdlKCk<span class="hljs-number">7</span>CgogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>p<span class="hljs-number">2</span>h<span class="hljs-number">5</span>Lu<span class="hljs-number">25</span>Yik<span class="hljs-number">5</span>patCiAgICBpZiAobnVtMSA<span class="hljs-number">9</span>PSBudW<span class="hljs-number">0</span>yKSB<span class="hljs-number">7</span>CiAgICAgICAgY<span class="hljs-number">291</span>dCA<span class="hljs-number">8</span>PCAi<span class="hljs-number">5</span>Lik<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">55</span>u<span class="hljs-number">4562</span>JISIgPDwgZW<span class="hljs-number">5</span>kbDsKICAgIH<span class="hljs-number">0</span>gZWxzZSBpZiAobnVtMSA+IG<span class="hljs-number">51</span>bTIpIHsKICAgICAgICBjb<span class="hljs-number">3</span>V<span class="hljs-number">0</span>IDw<span class="hljs-number">8</span>ICLnrKzkuIDkuKrmlbDlpKfkuo<span class="hljs-number">7</span>nrKzkuozkuKrmlbAiIDw<span class="hljs-number">8</span>IGVuZGw<span class="hljs-number">7</span>CiAgICB<span class="hljs-number">9</span>IGVsc<span class="hljs-number">2</span>UgewogICAgICAgIGNvdXQgPDwgIuesrOS<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>quaVsOWwj+S<span class="hljs-number">6</span>juesrOS<span class="hljs-number">6</span>jOS<span class="hljs-number">4</span>quaVsCIgPDwgZW<span class="hljs-number">5</span>kbDsKICAgIH<span class="hljs-number">0</span>KCiAgICAvLyDosIPnlKjliqDms<span class="hljs-number">5</span>Xlh<span class="hljs-number">73</span>mlbAKICAgIGludCByZXN<span class="hljs-number">1</span>bHQgPSBhZGQobnVtMSwgbnVtMik<span class="hljs-number">7</span>CiAgICBjb<span class="hljs-number">3</span>V<span class="hljs-number">0</span>IDw<span class="hljs-number">8</span>ICLkuKTkuKrmlbDnmoTlkozmmK<span class="hljs-number">86</span>ICIgPDwgcmVzdWx<span class="hljs-number">0</span>IDw<span class="hljs-number">8</span>IGVuZGw<span class="hljs-number">7</span>CgogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>pWw<span class="hljs-number">57</span>uE<span class="hljs-number">5</span>pON<span class="hljs-number">5</span>L<span class="hljs-number">2</span>cCiAgICB<span class="hljs-number">2</span>ZWN<span class="hljs-number">0</span>b<span class="hljs-number">3</span>I<span class="hljs-number">8</span>aW<span class="hljs-number">50</span>PiBhcnIgPSB<span class="hljs-number">7</span>MSwgMiwgMywgNCwgNX<span class="hljs-number">07</span>CiAgICBjb<span class="hljs-number">3</span>V<span class="hljs-number">0</span>IDw<span class="hljs-number">8</span>ICLmlbDnu<span class="hljs-number">4</span>TnmoTlhYPntKA<span class="hljs-number">6</span>ICI<span class="hljs-number">7</span>CiAgICBwcmludEFycmF<span class="hljs-number">5</span>KGFycik<span class="hljs-number">7</span>CgogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>b<span class="hljs-number">6</span>q<span class="hljs-number">546</span>v<span class="hljs-number">5</span>omT<span class="hljs-number">5</span>Y<span class="hljs-number">2</span>wIDEg<span class="hljs-number">5</span>YiwIDEwCiAgICBjb<span class="hljs-number">3</span>V<span class="hljs-number">0</span>IDw<span class="hljs-number">8</span>ICIx<span class="hljs-number">5</span>YiwMTDnmoTmlbDlrZc<span class="hljs-number">6</span>ICI<span class="hljs-number">7</span>CiAgICBmb<span class="hljs-number">3</span>IgKGludCBpID<span class="hljs-number">0</span>gMTsgaSA<span class="hljs-number">8</span>PSAxMDsgaSsrKSB<span class="hljs-number">7</span>CiAgICAgICAgY<span class="hljs-number">291</span>dCA<span class="hljs-number">8</span>PCBpIDw<span class="hljs-number">8</span>ICIgIjsgIC<span class="hljs-number">8</span>vIOi+k+WHuuiAjOS<span class="hljs-number">4</span>jeaNouihjAogICAgfQogICAgY<span class="hljs-number">291</span>dCA<span class="hljs-number">8</span>PCBlbmRsOyAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>o<span class="hljs-number">2</span>i<span class="hljs-number">6</span>KGMCgogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">56</span>iL<span class="hljs-number">5</span>bqP<span class="hljs-number">57</span>uT<span class="hljs-number">5</span>p<span class="hljs-number">2</span>fCiAgICBjb<span class="hljs-number">3</span>V<span class="hljs-number">0</span>IDw<span class="hljs-number">8</span>ICLmhJ/osKLkvb/nlKggQysrIOaVmeeoiyEiIDw<span class="hljs-number">8</span>IGVuZGw<span class="hljs-number">7</span>Cn<span class="hljs-number">0</span>KCmludCBtYWluKCkgewogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">6</span>LCD<span class="hljs-number">55</span>So<span class="hljs-number">5</span>Li<span class="hljs-number">756</span>iL<span class="hljs-number">5</span>bqP<span class="hljs-number">77</span>yM<span class="hljs-number">5</span>Lyg<span class="hljs-number">6</span>YCS<span class="hljs-number">5</span>Y+C<span class="hljs-number">5</span>pWw<span class="hljs-number">5</span>Luj<span class="hljs-number">5</span>pu/<span class="hljs-number">55</span>So<span class="hljs-number">5</span>oi<span class="hljs-number">36</span>L<span class="hljs-number">6</span>T<span class="hljs-number">5</span>YWlCiAgICBtYWluRnVuY<span class="hljs-number">3</span>Rpb<span class="hljs-number">24</span>oNSwgMyk<span class="hljs-number">7</span>CiAgICByZXR<span class="hljs-number">1</span>cm<span class="hljs-number">4</span>gMDsKfQo=<br></code></pre></td></tr></table></figure><h2 id="输出结果-2"><a href="#输出结果-2" class="headerlink" title="输出结果"></a>输出结果</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">5qyi6L</span>+O<span class="hljs-number">5</span>p<span class="hljs-number">2</span>l<span class="hljs-number">5</span>YiwIEMrKyDln<span class="hljs-number">7</span>rnoYDmlZnlraYhCui/meaYr+S<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>queu\ngOWNleeahCBDKysg<span class="hljs-number">56</span>S<span class="hljs-number">65</span>L<span class="hljs-number">6</span>L<span class="hljs-number">56</span>iL<span class="hljs-number">5</span>bqP<span class="hljs-number">44</span>CCCgrnrKzkuIDkuKrmlbDlpKfk\nuo<span class="hljs-number">7</span>nrKzkuozkuKrmlbAK<span class="hljs-number">5</span>Lik<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>ZKM<span class="hljs-number">5</span>pivOiA<span class="hljs-number">4</span>CuaVsOe<span class="hljs-number">7</span>hOea\nhOWFg+e<span class="hljs-number">0</span>oDogMSAyIDMgNCA<span class="hljs-number">1</span>IAox<span class="hljs-number">5</span>YiwMTDnmoTmlbDlrZc<span class="hljs-number">6</span>IDEgMiAzIDQg\nNSA<span class="hljs-number">2</span>IDcgOCA<span class="hljs-number">5</span>IDEwIArmhJ/osKLkvb/nlKggQysrIOaVmeeoiyEK\n<br></code></pre></td></tr></table></figure><h1 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">60</span>,<br>    <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Go (1.13.5)&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><br><span class="hljs-comment">// 教学函数：打印欢迎信息</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printWelcomeMessage</span><span class="hljs-params">()</span></span> &#123;<br>    fmt.Println(<span class="hljs-string">&quot;欢迎来到 Go 语言基础教学!&quot;</span>)<br>    fmt.Println(<span class="hljs-string">&quot;这是一个简单的 Go 示例程序。\n&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">// 加法函数</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">add</span><span class="hljs-params">(a, b <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> &#123;<br>    <span class="hljs-keyword">return</span> a + b<br>&#125;<br><br><span class="hljs-comment">// 打印数组函数</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printArray</span><span class="hljs-params">(arr []<span class="hljs-keyword">int</span>)</span></span> &#123;<br>    <span class="hljs-keyword">for</span> _, item := <span class="hljs-keyword">range</span> arr &#123;<br>        fmt.Print(item, <span class="hljs-string">&quot; &quot;</span>)  <span class="hljs-comment">// 输出而不换行</span><br>    &#125;<br>    fmt.Println()  <span class="hljs-comment">// 换行</span><br>&#125;<br><br><span class="hljs-comment">// 主程序</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-comment">// 欢迎信息</span><br>    printWelcomeMessage()<br><br>    <span class="hljs-comment">// 直接传递参数进行条件判断</span><br>    num1 := <span class="hljs-number">5</span><br>    num2 := <span class="hljs-number">3</span><br><br>    <span class="hljs-comment">// 条件判断</span><br>    <span class="hljs-keyword">if</span> num1 == num2 &#123;<br>        fmt.Println(<span class="hljs-string">&quot;两个数相等!&quot;</span>)<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> num1 &gt; num2 &#123;<br>        fmt.Println(<span class="hljs-string">&quot;第一个数大于第二个数&quot;</span>)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        fmt.Println(<span class="hljs-string">&quot;第一个数小于第二个数&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-comment">// 调用加法函数</span><br>    result := add(num1, num2)<br>    fmt.Printf(<span class="hljs-string">&quot;两个数的和是: %d\n&quot;</span>, result)<br><br>    <span class="hljs-comment">// 数组操作</span><br>    arr := []<span class="hljs-keyword">int</span>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;<br>    fmt.Print(<span class="hljs-string">&quot;数组的元素: &quot;</span>)<br>    printArray(arr)<br><br>    <span class="hljs-comment">// 循环打印 1 到 10</span><br>    fmt.Print(<span class="hljs-string">&quot;1到10的数字: &quot;</span>)<br>    <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++ &#123;<br>        fmt.Print(i, <span class="hljs-string">&quot; &quot;</span>)  <span class="hljs-comment">// 输出而不换行</span><br>    &#125;<br>    fmt.Println()  <span class="hljs-comment">// 换行</span><br><br>    <span class="hljs-comment">// 程序结束</span><br>    fmt.Println(<span class="hljs-string">&quot;感谢使用 Go 语言教程!&quot;</span>)<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="编码-6"><a href="#编码-6" class="headerlink" title="编码"></a>编码</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cGFja2FnZSBtYWluCgppbXBvcnQgImZtdCIKCi8vIOaVmeWtpuWHveaVsO</span>+<span class="hljs-number">8</span>muaJk+WNsOasoui/juS/oeaBrwpmdW<span class="hljs-number">5</span>jIHByaW<span class="hljs-number">50</span>V<span class="hljs-number">2</span>VsY<span class="hljs-number">29</span>tZU<span class="hljs-number">1</span>lc<span class="hljs-number">3</span>NhZ<span class="hljs-number">2</span>UoKSB<span class="hljs-number">7</span>CiAgICBmbXQuUHJpbnRsbigi<span class="hljs-number">5</span>qyi<span class="hljs-number">6</span>L+O<span class="hljs-number">5</span>p<span class="hljs-number">2</span>l<span class="hljs-number">5</span>YiwIEdvIOivreiogOWfuuehgOaVmeWtpiEiKQogICAgZm<span class="hljs-number">10</span>LlByaW<span class="hljs-number">50</span>bG<span class="hljs-number">4</span>oIui/meaYr+S<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>queugOWNleeahCBHbyDnpLrkvovnqIvluo/jgIJcbiIpCn<span class="hljs-number">0</span>KCi<span class="hljs-number">8</span>vIOWKoOazleWHveaVsApmdW<span class="hljs-number">5</span>jIGFkZChhLCBiIGludCkgaW<span class="hljs-number">50</span>IHsKICAgIHJldHVybiBhICsgYgp<span class="hljs-number">9</span>CgovLyDmiZPljbDmlbDnu<span class="hljs-number">4</span>Tlh<span class="hljs-number">73</span>mlbAKZnVuYyBwcmludEFycmF<span class="hljs-number">5</span>KGFyciBbXWludCkgewogICAgZm<span class="hljs-number">9</span>yIF<span class="hljs-number">8</span>sIGl<span class="hljs-number">0</span>ZW<span class="hljs-number">0</span>gOj<span class="hljs-number">0</span>gcmFuZ<span class="hljs-number">2</span>UgYXJyIHsKICAgICAgICBmbXQuUHJpbnQoaXRlbSwgIiAiKSAgLy<span class="hljs-number">8</span>g<span class="hljs-number">6</span>L<span class="hljs-number">6</span>T<span class="hljs-number">5</span>Ye<span class="hljs-number">66</span>ICM<span class="hljs-number">5</span>LiN<span class="hljs-number">5</span>o<span class="hljs-number">2</span>i<span class="hljs-number">6</span>KGMCiAgICB<span class="hljs-number">9</span>CiAgICBmbXQuUHJpbnRsbigpICAvLyDmjaLooYwKfQoKLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>Li<span class="hljs-number">756</span>iL<span class="hljs-number">5</span>bqPCmZ<span class="hljs-number">1</span>bmMgbWFpbigpIHsKICAgIC<span class="hljs-number">8</span>vIOasoui/juS/oeaBrwogICAgcHJpbnRXZWxjb<span class="hljs-number">21</span>lTWVzc<span class="hljs-number">2</span>FnZSgpCgogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">55</span>u<span class="hljs-number">05</span>o<span class="hljs-number">6</span>l<span class="hljs-number">5</span>Lyg<span class="hljs-number">6</span>YCS<span class="hljs-number">5</span>Y+C<span class="hljs-number">5</span>pWw<span class="hljs-number">6</span>L+b<span class="hljs-number">6</span>KGM<span class="hljs-number">5</span>p<span class="hljs-number">2</span>h<span class="hljs-number">5</span>Lu<span class="hljs-number">25</span>Yik<span class="hljs-number">5</span>patCiAgICBudW<span class="hljs-number">0</span>xIDo<span class="hljs-number">9</span>IDUKICAgIG<span class="hljs-number">51</span>bTIgOj<span class="hljs-number">0</span>gMwoKICAgIC<span class="hljs-number">8</span>vIOadoeS<span class="hljs-number">7</span>tuWIpOaWrQogICAgaWYgbnVtMSA<span class="hljs-number">9</span>PSBudW<span class="hljs-number">0</span>yIHsKICAgICAgICBmbXQuUHJpbnRsbigi<span class="hljs-number">5</span>Lik<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">55</span>u<span class="hljs-number">4562</span>JISIpCiAgICB<span class="hljs-number">9</span>IGVsc<span class="hljs-number">2</span>UgaWYgbnVtMSA+IG<span class="hljs-number">51</span>bTIgewogICAgICAgIGZtdC<span class="hljs-number">5</span>QcmludGxuKCLnrKzkuIDkuKrmlbDlpKfkuo<span class="hljs-number">7</span>nrKzkuozkuKrmlbAiKQogICAgfSBlbHNlIHsKICAgICAgICBmbXQuUHJpbnRsbigi<span class="hljs-number">56</span>ys<span class="hljs-number">5</span>LiA<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">5</span>bCP<span class="hljs-number">5</span>LqO<span class="hljs-number">56</span>ys<span class="hljs-number">5</span>LqM<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWwIikKICAgIH<span class="hljs-number">0</span>KCiAgICAvLyDosIPnlKjliqDms<span class="hljs-number">5</span>Xlh<span class="hljs-number">73</span>mlbAKICAgIHJlc<span class="hljs-number">3</span>VsdCA<span class="hljs-number">6</span>PSBhZGQobnVtMSwgbnVtMikKICAgIGZtdC<span class="hljs-number">5</span>QcmludGYoIuS<span class="hljs-number">4</span>pOS<span class="hljs-number">4</span>quaVsOeahOWSjOaYrzogJWRcbiIsIHJlc<span class="hljs-number">3</span>VsdCkKCiAgICAvLyDmlbDnu<span class="hljs-number">4</span>Tmk<span class="hljs-number">43</span>kvZwKICAgIGFyciA<span class="hljs-number">6</span>PSBbXWludHsxLCAyLCAzLCA<span class="hljs-number">0</span>LCA<span class="hljs-number">1</span>fQogICAgZm<span class="hljs-number">10</span>LlByaW<span class="hljs-number">50</span>KCLmlbDnu<span class="hljs-number">4</span>TnmoTlhYPntKA<span class="hljs-number">6</span>ICIpCiAgICBwcmludEFycmF<span class="hljs-number">5</span>KGFycikKCiAgICAvLyDlvqrnjq/miZPljbAgMSDliLAgMTAKICAgIGZtdC<span class="hljs-number">5</span>QcmludCgiMeWIsDEw<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>pWw<span class="hljs-number">5</span>a<span class="hljs-number">2</span>XOiAiKQogICAgZm<span class="hljs-number">9</span>yIGkgOj<span class="hljs-number">0</span>gMTsgaSA<span class="hljs-number">8</span>PSAxMDsgaSsrIHsKICAgICAgICBmbXQuUHJpbnQoaSwgIiAiKSAgLy<span class="hljs-number">8</span>g<span class="hljs-number">6</span>L<span class="hljs-number">6</span>T<span class="hljs-number">5</span>Ye<span class="hljs-number">66</span>ICM<span class="hljs-number">5</span>LiN<span class="hljs-number">5</span>o<span class="hljs-number">2</span>i<span class="hljs-number">6</span>KGMCiAgICB<span class="hljs-number">9</span>CiAgICBmbXQuUHJpbnRsbigpICAvLyDmjaLooYwKCiAgICAvLyDnqIvluo/nu<span class="hljs-number">5</span>PmnZ<span class="hljs-number">8</span>KICAgIGZtdC<span class="hljs-number">5</span>QcmludGxuKCLmhJ/osKLkvb/nlKggR<span class="hljs-number">28</span>g<span class="hljs-number">6</span>K+t<span class="hljs-number">6</span>KiA<span class="hljs-number">5</span>pWZ<span class="hljs-number">56</span>iLISIpCn<span class="hljs-number">0</span>K<br></code></pre></td></tr></table></figure><h2 id="输出结果-3"><a href="#输出结果-3" class="headerlink" title="输出结果"></a>输出结果</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">5qyi6L</span>+O<span class="hljs-number">5</span>p<span class="hljs-number">2</span>l<span class="hljs-number">5</span>YiwIEdvIOivreiogOWfuuehgOaVmeWtpiEK<span class="hljs-number">6</span>L+Z<span class="hljs-number">5</span>piv<span class="hljs-number">5</span>LiA\n<span class="hljs-number">5</span>Liq<span class="hljs-number">566</span>A<span class="hljs-number">5</span>Y<span class="hljs-number">2</span>V<span class="hljs-number">55</span>qEIEdvIOekuuS+i+eoi+W<span class="hljs-number">6</span>j+OAggoK<span class="hljs-number">56</span>ys<span class="hljs-number">5</span>LiA<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw\n<span class="hljs-number">5</span>aSn<span class="hljs-number">5</span>LqO<span class="hljs-number">56</span>ys<span class="hljs-number">5</span>LqM<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWwCuS<span class="hljs-number">4</span>pOS<span class="hljs-number">4</span>quaVsOeahOWSjOaYrzogOArmlbDn\nu<span class="hljs-number">4</span>TnmoTlhYPntKA<span class="hljs-number">6</span>IDEgMiAzIDQgNSAKMeWIsDEw<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>pWw<span class="hljs-number">5</span>a<span class="hljs-number">2</span>XOiAxIDIg\nMyA<span class="hljs-number">0</span>IDUgNiA<span class="hljs-number">3</span>IDggOSAxMCAK<span class="hljs-number">5</span>oSf<span class="hljs-number">6</span>LCi<span class="hljs-number">5</span>L<span class="hljs-number">2</span>/<span class="hljs-number">55</span>SoIEdvIOivreiogOaVmeeo\niyEK\n<br></code></pre></td></tr></table></figure><h1 id="Ruby"><a href="#Ruby" class="headerlink" title="Ruby"></a>Ruby</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">72</span>,<br>    <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Ruby (2.7.0)&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-comment"># 教学函数：打印欢迎信息</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_welcome_message</span></span><br>  puts <span class="hljs-string">&quot;欢迎来到 Ruby 基础教学!&quot;</span><br>  puts <span class="hljs-string">&quot;这是一个简单的 Ruby 示例程序。\n&quot;</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment"># 加法函数</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span><span class="hljs-params">(a, b)</span></span><br>  <span class="hljs-keyword">return</span> a + b<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment"># 打印数组函数</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">print_array</span><span class="hljs-params">(arr)</span></span><br>  arr.each &#123; <span class="hljs-params">|item|</span> print <span class="hljs-string">&quot;<span class="hljs-subst">#&#123;item&#125;</span> &quot;</span> &#125;  <span class="hljs-comment"># 输出而不换行</span><br>  puts  <span class="hljs-comment"># 换行</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment"># 主程序</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span><span class="hljs-params">(num1, num2)</span></span><br>  <span class="hljs-comment"># 欢迎信息</span><br>  print_welcome_message<br><br>  <span class="hljs-comment"># 条件判断</span><br>  <span class="hljs-keyword">if</span> num1 == num2<br>    puts <span class="hljs-string">&quot;两个数相等!&quot;</span><br>  <span class="hljs-keyword">elsif</span> num1 &gt; num2<br>    puts <span class="hljs-string">&quot;第一个数大于第二个数&quot;</span><br>  <span class="hljs-keyword">else</span><br>    puts <span class="hljs-string">&quot;第一个数小于第二个数&quot;</span><br>  <span class="hljs-keyword">end</span><br><br>  <span class="hljs-comment"># 调用加法函数</span><br>  result = add(num1, num2)<br>  puts <span class="hljs-string">&quot;两个数的和是: <span class="hljs-subst">#&#123;result&#125;</span>&quot;</span><br><br>  <span class="hljs-comment"># 数组操作</span><br>  arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>  print <span class="hljs-string">&quot;数组的元素: &quot;</span><br>  print_array(arr)<br><br>  <span class="hljs-comment"># 循环打印 1 到 10</span><br>  print <span class="hljs-string">&quot;1到10的数字: &quot;</span><br>  (<span class="hljs-number">1</span>..<span class="hljs-number">10</span>).each &#123; <span class="hljs-params">|i|</span> print <span class="hljs-string">&quot;<span class="hljs-subst">#&#123;i&#125;</span> &quot;</span> &#125;<br>  puts  <span class="hljs-comment"># 换行</span><br><br>  <span class="hljs-comment"># 程序结束</span><br>  puts <span class="hljs-string">&quot;感谢使用 Ruby 教程!&quot;</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment"># 调用主程序，传递参数代替用户输入</span><br>main(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)<br><br></code></pre></td></tr></table></figure><h2 id="编码-7"><a href="#编码-7" class="headerlink" title="编码"></a>编码</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">IyDmlZnlrablh73mlbDvvJrmiZPljbDmrKLov47kv6Hmga8KZGVmIHByaW50X3dlbGNvbWVfbWVzc2FnZQogIHB1dHMgIuasoui</span>/juadpeWIsCBSdWJ<span class="hljs-number">5</span>IOWfuuehgOaVmeWtpiEiCiAgcHV<span class="hljs-number">0</span>cyAi<span class="hljs-number">6</span>L+Z<span class="hljs-number">5</span>piv<span class="hljs-number">5</span>LiA<span class="hljs-number">5</span>Liq<span class="hljs-number">566</span>A<span class="hljs-number">5</span>Y<span class="hljs-number">2</span>V<span class="hljs-number">55</span>qEIFJ<span class="hljs-number">1</span>Ynkg<span class="hljs-number">56</span>S<span class="hljs-number">65</span>L<span class="hljs-number">6</span>L<span class="hljs-number">56</span>iL<span class="hljs-number">5</span>bqP<span class="hljs-number">44</span>CCXG<span class="hljs-number">4</span>iCmVuZAoKIyDliqDms<span class="hljs-number">5</span>Xlh<span class="hljs-number">73</span>mlbAKZGVmIGFkZChhLCBiKQogIHJldHVybiBhICsgYgplbmQKCiMg<span class="hljs-number">5</span>omT<span class="hljs-number">5</span>Y<span class="hljs-number">2</span>w<span class="hljs-number">5</span>pWw<span class="hljs-number">57</span>uE<span class="hljs-number">5</span>Ye<span class="hljs-number">95</span>pWwCmRlZiBwcmludF<span class="hljs-number">9</span>hcnJheShhcnIpCiAgYXJyLmVhY<span class="hljs-number">2</span>ggeyB<span class="hljs-number">8</span>aXRlbXwgcHJpbnQgIiN<span class="hljs-number">7</span>aXRlbX<span class="hljs-number">0</span>gIiB<span class="hljs-number">9</span>ICAjIOi+k+WHuuiAjOS<span class="hljs-number">4</span>jeaNouihjAogIHB<span class="hljs-number">1</span>dHMgICMg<span class="hljs-number">5</span>o<span class="hljs-number">2</span>i<span class="hljs-number">6</span>KGMCmVuZAoKIyDkuLvnqIvluo<span class="hljs-number">8</span>KZGVmIG<span class="hljs-number">1</span>haW<span class="hljs-number">4</span>obnVtMSwgbnVtMikKICAjIOasoui/juS/oeaBrwogIHByaW<span class="hljs-number">50</span>X<span class="hljs-number">3</span>dlbGNvbWVfbWVzc<span class="hljs-number">2</span>FnZQoKICAjIOadoeS<span class="hljs-number">7</span>tuWIpOaWrQogIGlmIG<span class="hljs-number">51</span>bTEgPT<span class="hljs-number">0</span>gbnVtMgogICAgcHV<span class="hljs-number">0</span>cyAi<span class="hljs-number">5</span>Lik<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">55</span>u<span class="hljs-number">4562</span>JISIKICBlbHNpZiBudW<span class="hljs-number">0</span>xID<span class="hljs-number">4</span>gbnVtMgogICAgcHV<span class="hljs-number">0</span>cyAi<span class="hljs-number">56</span>ys<span class="hljs-number">5</span>LiA<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">5</span>aSn<span class="hljs-number">5</span>LqO<span class="hljs-number">56</span>ys<span class="hljs-number">5</span>LqM<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWwIgogIGVsc<span class="hljs-number">2</span>UKICAgIHB<span class="hljs-number">1</span>dHMgIuesrOS<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>quaVsOWwj+S<span class="hljs-number">6</span>juesrOS<span class="hljs-number">6</span>jOS<span class="hljs-number">4</span>quaVsCIKICBlbmQKCiAgIyDosIPnlKjliqDms<span class="hljs-number">5</span>Xlh<span class="hljs-number">73</span>mlbAKICByZXN<span class="hljs-number">1</span>bHQgPSBhZGQobnVtMSwgbnVtMikKICBwdXRzICLkuKTkuKrmlbDnmoTlkozmmK<span class="hljs-number">86</span>ICN<span class="hljs-number">7</span>cmVzdWx<span class="hljs-number">0</span>fSIKCiAgIyDmlbDnu<span class="hljs-number">4</span>Tmk<span class="hljs-number">43</span>kvZwKICBhcnIgPSBbMSwgMiwgMywgNCwgNV<span class="hljs-number">0</span>KICBwcmludCAi<span class="hljs-number">5</span>pWw<span class="hljs-number">57</span>uE<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>YWD<span class="hljs-number">57</span>SgOiAiCiAgcHJpbnRfYXJyYXkoYXJyKQoKICAjIOW+queOr+aJk+WNsCAxIOWIsCAxMAogIHByaW<span class="hljs-number">50</span>ICIx<span class="hljs-number">5</span>YiwMTDnmoTmlbDlrZc<span class="hljs-number">6</span>ICIKICAoMS<span class="hljs-number">4</span>uMTApLmVhY<span class="hljs-number">2</span>ggeyB<span class="hljs-number">8</span>aXwgcHJpbnQgIiN<span class="hljs-number">7</span>aX<span class="hljs-number">0</span>gIiB<span class="hljs-number">9</span>CiAgcHV<span class="hljs-number">0</span>cyAgIyDmjaLooYwKCiAgIyDnqIvluo/nu<span class="hljs-number">5</span>PmnZ<span class="hljs-number">8</span>KICBwdXRzICLmhJ/osKLkvb/nlKggUnVieSDmlZnnqIshIgplbmQKCiMg<span class="hljs-number">6</span>LCD<span class="hljs-number">55</span>So<span class="hljs-number">5</span>Li<span class="hljs-number">756</span>iL<span class="hljs-number">5</span>bqP<span class="hljs-number">77</span>yM<span class="hljs-number">5</span>Lyg<span class="hljs-number">6</span>YCS<span class="hljs-number">5</span>Y+C<span class="hljs-number">5</span>pWw<span class="hljs-number">5</span>Luj<span class="hljs-number">5</span>pu/<span class="hljs-number">55</span>So<span class="hljs-number">5</span>oi<span class="hljs-number">36</span>L<span class="hljs-number">6</span>T<span class="hljs-number">5</span>YWlCm<span class="hljs-number">1</span>haW<span class="hljs-number">4</span>oNSwgMykK<br></code></pre></td></tr></table></figure><h2 id="输出结果-4"><a href="#输出结果-4" class="headerlink" title="输出结果"></a>输出结果</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">5qyi6L</span>+O<span class="hljs-number">5</span>p<span class="hljs-number">2</span>l<span class="hljs-number">5</span>YiwIFJ<span class="hljs-number">1</span>Ynkg<span class="hljs-number">5</span>Z+<span class="hljs-number">656</span>GA<span class="hljs-number">5</span>pWZ<span class="hljs-number">5</span>a<span class="hljs-number">2</span>mIQrov<span class="hljs-number">5</span>nmmK/kuIDkuKrn\nroDljZXnmoQgUnVieSDnpLrkvovnqIvluo/jgIIK<span class="hljs-number">56</span>ys<span class="hljs-number">5</span>LiA<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">5</span>aSn\n<span class="hljs-number">5</span>LqO<span class="hljs-number">56</span>ys<span class="hljs-number">5</span>LqM<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWwCuS<span class="hljs-number">4</span>pOS<span class="hljs-number">4</span>quaVsOeahOWSjOaYrzogOArmlbDnu<span class="hljs-number">4</span>Tn\nmoTlhYPntKA<span class="hljs-number">6</span>IDEgMiAzIDQgNSAKMeWIsDEw<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>pWw<span class="hljs-number">5</span>a<span class="hljs-number">2</span>XOiAxIDIgMyA<span class="hljs-number">0</span>\nIDUgNiA<span class="hljs-number">3</span>IDggOSAxMCAK<span class="hljs-number">5</span>oSf<span class="hljs-number">6</span>LCi<span class="hljs-number">5</span>L<span class="hljs-number">2</span>/<span class="hljs-number">55</span>SoIFJ<span class="hljs-number">1</span>Ynkg<span class="hljs-number">5</span>pWZ<span class="hljs-number">56</span>iLIQo=\n<br></code></pre></td></tr></table></figure><h1 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">68</span>,<br>    <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;PHP (7.4.1)&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><br><span class="hljs-comment">// 教学函数：打印欢迎信息</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printWelcomeMessage</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;欢迎来到 PHP 基础教学!\n&quot;</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;这是一个简单的 PHP 示例程序。\n\n&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">// 加法函数</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">$a, $b</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> $a + $b;<br>&#125;<br><br><span class="hljs-comment">// 打印数组函数</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printArray</span>(<span class="hljs-params">$arr</span>) </span>&#123;<br>    <span class="hljs-keyword">foreach</span> ($arr <span class="hljs-keyword">as</span> $item) &#123;<br>        <span class="hljs-keyword">echo</span> $item . <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// 输出而不换行</span><br>    &#125;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;\n&quot;</span>;  <span class="hljs-comment">// 换行</span><br>&#125;<br><br><span class="hljs-comment">// 主程序</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span>(<span class="hljs-params">$num1, $num2</span>) </span>&#123;<br>    <span class="hljs-comment">// 欢迎信息</span><br>    printWelcomeMessage();<br><br>    <span class="hljs-comment">// 条件判断</span><br>    <span class="hljs-keyword">if</span> ($num1 == $num2) &#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;两个数相等!\n&quot;</span>;<br>    &#125; <span class="hljs-keyword">elseif</span> ($num1 &gt; $num2) &#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;第一个数大于第二个数\n&quot;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;第一个数小于第二个数\n&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// 调用加法函数</span><br>    $result = add($num1, $num2);<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;两个数的和是: $result\n&quot;</span>;<br><br>    <span class="hljs-comment">// 数组操作</span><br>    $arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;数组的元素: &quot;</span>;<br>    printArray($arr);<br><br>    <span class="hljs-comment">// 循环打印 1 到 10</span><br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;1到10的数字: &quot;</span>;<br>    <span class="hljs-keyword">for</span> ($i = <span class="hljs-number">1</span>; $i &lt;= <span class="hljs-number">10</span>; $i++) &#123;<br>        <span class="hljs-keyword">echo</span> $i . <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// 输出而不换行</span><br>    &#125;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;\n&quot;</span>;  <span class="hljs-comment">// 换行</span><br><br>    <span class="hljs-comment">// 程序结束</span><br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;感谢使用 PHP 教程!\n&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">// 调用主程序，传递参数代替用户输入</span><br>main(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>);<br><br><span class="hljs-meta">?&gt;</span><br><br></code></pre></td></tr></table></figure><h2 id="编码-8"><a href="#编码-8" class="headerlink" title="编码"></a>编码</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">PD9waHAKCi8vIOaVmeWtpuWHveaVsO</span>+<span class="hljs-number">8</span>muaJk+WNsOasoui/juS/oeaBrwpmdW<span class="hljs-number">5</span>jdGlvbiBwcmludFdlbGNvbWVNZXNzYWdlKCkgewogICAgZWNobyAi<span class="hljs-number">5</span>qyi<span class="hljs-number">6</span>L+O<span class="hljs-number">5</span>p<span class="hljs-number">2</span>l<span class="hljs-number">5</span>YiwIFBIUCDln<span class="hljs-number">7</span>rnoYDmlZnlraYhXG<span class="hljs-number">4</span>iOwogICAgZWNobyAi<span class="hljs-number">6</span>L+Z<span class="hljs-number">5</span>piv<span class="hljs-number">5</span>LiA<span class="hljs-number">5</span>Liq<span class="hljs-number">566</span>A<span class="hljs-number">5</span>Y<span class="hljs-number">2</span>V<span class="hljs-number">55</span>qEIFBIUCDnpLrkvovnqIvluo/jgIJcblxuIjsKfQoKLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>Yqg<span class="hljs-number">5</span>rOV<span class="hljs-number">5</span>Ye<span class="hljs-number">95</span>pWwCmZ<span class="hljs-number">1</span>bmN<span class="hljs-number">0</span>aW<span class="hljs-number">9</span>uIGFkZCgkYSwgJGIpIHsKICAgIHJldHVybiAkYSArICRiOwp<span class="hljs-number">9</span>CgovLyDmiZPljbDmlbDnu<span class="hljs-number">4</span>Tlh<span class="hljs-number">73</span>mlbAKZnVuY<span class="hljs-number">3</span>Rpb<span class="hljs-number">24</span>gcHJpbnRBcnJheSgkYXJyKSB<span class="hljs-number">7</span>CiAgICBmb<span class="hljs-number">3</span>JlYWNoICgkYXJyIGFzICRpdGVtKSB<span class="hljs-number">7</span>CiAgICAgICAgZWNobyAkaXRlbSAuICIgIjsgIC<span class="hljs-number">8</span>vIOi+k+WHuuiAjOS<span class="hljs-number">4</span>jeaNouihjAogICAgfQogICAgZWNobyAiXG<span class="hljs-number">4</span>iOyAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>o<span class="hljs-number">2</span>i<span class="hljs-number">6</span>KGMCn<span class="hljs-number">0</span>KCi<span class="hljs-number">8</span>vIOS<span class="hljs-number">4</span>u+eoi+W<span class="hljs-number">6</span>jwpmdW<span class="hljs-number">5</span>jdGlvbiBtYWluKCRudW<span class="hljs-number">0</span>xLCAkbnVtMikgewogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>qyi<span class="hljs-number">6</span>L+O<span class="hljs-number">5</span>L+h<span class="hljs-number">5</span>oGvCiAgICBwcmludFdlbGNvbWVNZXNzYWdlKCk<span class="hljs-number">7</span>CgogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>p<span class="hljs-number">2</span>h<span class="hljs-number">5</span>Lu<span class="hljs-number">25</span>Yik<span class="hljs-number">5</span>patCiAgICBpZiAoJG<span class="hljs-number">51</span>bTEgPT<span class="hljs-number">0</span>gJG<span class="hljs-number">51</span>bTIpIHsKICAgICAgICBlY<span class="hljs-number">2</span>hvICLkuKTkuKrmlbDnm<span class="hljs-number">7</span>jnrYkhXG<span class="hljs-number">4</span>iOwogICAgfSBlbHNlaWYgKCRudW<span class="hljs-number">0</span>xID<span class="hljs-number">4</span>gJG<span class="hljs-number">51</span>bTIpIHsKICAgICAgICBlY<span class="hljs-number">2</span>hvICLnrKzkuIDkuKrmlbDlpKfkuo<span class="hljs-number">7</span>nrKzkuozkuKrmlbBcbiI<span class="hljs-number">7</span>CiAgICB<span class="hljs-number">9</span>IGVsc<span class="hljs-number">2</span>UgewogICAgICAgIGVjaG<span class="hljs-number">8</span>gIuesrOS<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>quaVsOWwj+S<span class="hljs-number">6</span>juesrOS<span class="hljs-number">6</span>jOS<span class="hljs-number">4</span>quaVsFxuIjsKICAgIH<span class="hljs-number">0</span>KCiAgICAvLyDosIPnlKjliqDms<span class="hljs-number">5</span>Xlh<span class="hljs-number">73</span>mlbAKICAgICRyZXN<span class="hljs-number">1</span>bHQgPSBhZGQoJG<span class="hljs-number">51</span>bTEsICRudW<span class="hljs-number">0</span>yKTsKICAgIGVjaG<span class="hljs-number">8</span>gIuS<span class="hljs-number">4</span>pOS<span class="hljs-number">4</span>quaVsOeahOWSjOaYrzogJHJlc<span class="hljs-number">3</span>VsdFxuIjsKCiAgICAvLyDmlbDnu<span class="hljs-number">4</span>Tmk<span class="hljs-number">43</span>kvZwKICAgICRhcnIgPSBbMSwgMiwgMywgNCwgNV<span class="hljs-number">07</span>CiAgICBlY<span class="hljs-number">2</span>hvICLmlbDnu<span class="hljs-number">4</span>TnmoTlhYPntKA<span class="hljs-number">6</span>ICI<span class="hljs-number">7</span>CiAgICBwcmludEFycmF<span class="hljs-number">5</span>KCRhcnIpOwoKICAgIC<span class="hljs-number">8</span>vIOW+queOr+aJk+WNsCAxIOWIsCAxMAogICAgZWNobyAiMeWIsDEw<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>pWw<span class="hljs-number">5</span>a<span class="hljs-number">2</span>XOiAiOwogICAgZm<span class="hljs-number">9</span>yICgkaSA<span class="hljs-number">9</span>IDE<span class="hljs-number">7</span>ICRpIDw<span class="hljs-number">9</span>IDEwOyAkaSsrKSB<span class="hljs-number">7</span>CiAgICAgICAgZWNobyAkaSAuICIgIjsgIC<span class="hljs-number">8</span>vIOi+k+WHuuiAjOS<span class="hljs-number">4</span>jeaNouihjAogICAgfQogICAgZWNobyAiXG<span class="hljs-number">4</span>iOyAgLy<span class="hljs-number">8</span>g<span class="hljs-number">5</span>o<span class="hljs-number">2</span>i<span class="hljs-number">6</span>KGMCgogICAgLy<span class="hljs-number">8</span>g<span class="hljs-number">56</span>iL<span class="hljs-number">5</span>bqP<span class="hljs-number">57</span>uT<span class="hljs-number">5</span>p<span class="hljs-number">2</span>fCiAgICBlY<span class="hljs-number">2</span>hvICLmhJ/osKLkvb/nlKggUEhQIOaVmeeoiyFcbiI<span class="hljs-number">7</span>Cn<span class="hljs-number">0</span>KCi<span class="hljs-number">8</span>vIOiwg+eUqOS<span class="hljs-number">4</span>u+eoi+W<span class="hljs-number">6</span>j++<span class="hljs-number">8</span>jOS<span class="hljs-number">8</span>oOmAkuWPguaVsOS<span class="hljs-number">7</span>o+abv+eUqOaIt+i+k+WFpQptYWluKDUsIDMpOwoKPz<span class="hljs-number">4</span>K<br></code></pre></td></tr></table></figure><h2 id="输出结果-5"><a href="#输出结果-5" class="headerlink" title="输出结果"></a>输出结果</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">5qyi6L</span>+O<span class="hljs-number">5</span>p<span class="hljs-number">2</span>l<span class="hljs-number">5</span>YiwIFBIUCDln<span class="hljs-number">7</span>rnoYDmlZnlraYhCui/meaYr+S<span class="hljs-number">4</span>gOS<span class="hljs-number">4</span>queu\ngOWNleeahCBQSFAg<span class="hljs-number">56</span>S<span class="hljs-number">65</span>L<span class="hljs-number">6</span>L<span class="hljs-number">56</span>iL<span class="hljs-number">5</span>bqP<span class="hljs-number">44</span>CCCgrnrKzkuIDkuKrmlbDlpKfk\nuo<span class="hljs-number">7</span>nrKzkuozkuKrmlbAK<span class="hljs-number">5</span>Lik<span class="hljs-number">5</span>Liq<span class="hljs-number">5</span>pWw<span class="hljs-number">55</span>qE<span class="hljs-number">5</span>ZKM<span class="hljs-number">5</span>pivOiA<span class="hljs-number">4</span>CuaVsOe<span class="hljs-number">7</span>hOea\nhOWFg+e<span class="hljs-number">0</span>oDogMSAyIDMgNCA<span class="hljs-number">1</span>IAox<span class="hljs-number">5</span>YiwMTDnmoTmlbDlrZc<span class="hljs-number">6</span>IDEgMiAzIDQg\nNSA<span class="hljs-number">2</span>IDcgOCA<span class="hljs-number">5</span>IDEwIArmhJ/osKLkvb/nlKggUEhQIOaVmeeoiyEK\n<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>常用正则表达式</title>
    <link href="/2022/12/10/%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99/"/>
    <url>/2022/12/10/%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99/</url>
    
    <content type="html"><![CDATA[<ol><li>手机号码  <a href="https://www.cnblogs.com/zengxiangzhan/p/phone.html">https://www.cnblogs.com/zengxiangzhan/p/phone.html</a></li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">/^(<span class="hljs-number">13</span>[<span class="hljs-number">0</span><span class="hljs-number">-9</span>]|<span class="hljs-number">14</span>[<span class="hljs-number">01456879</span>]|<span class="hljs-number">15</span>[<span class="hljs-number">0</span><span class="hljs-number">-35</span><span class="hljs-number">-9</span>]|<span class="hljs-number">16</span>[<span class="hljs-number">2567</span>]|<span class="hljs-number">17</span>[<span class="hljs-number">0</span><span class="hljs-number">-9</span>]|<span class="hljs-number">18</span>[<span class="hljs-number">0</span><span class="hljs-number">-9</span>]|<span class="hljs-number">19</span>[<span class="hljs-number">0</span><span class="hljs-number">-35</span><span class="hljs-number">-9</span>])\\d&#123;<span class="hljs-number">8</span>&#125;$/<br></code></pre></td></tr></table></figure><ol start="2"><li>身份证   <a href="https://www.cnblogs.com/xtqg0304/p/9529721.html">https://www.cnblogs.com/xtqg0304/p/9529721.html</a></li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">/^[<span class="hljs-number">1</span><span class="hljs-number">-9</span>]\d&#123;<span class="hljs-number">7</span>&#125;((<span class="hljs-number">0</span>\d)|(<span class="hljs-number">1</span>[<span class="hljs-number">0</span><span class="hljs-number">-2</span>]))(([<span class="hljs-number">0</span>|<span class="hljs-number">1</span>|<span class="hljs-number">2</span>]\d)|<span class="hljs-number">3</span>[<span class="hljs-number">0</span><span class="hljs-number">-1</span>])\d&#123;<span class="hljs-number">3</span>&#125;$|^[<span class="hljs-number">1</span><span class="hljs-number">-9</span>]\d&#123;<span class="hljs-number">5</span>&#125;[<span class="hljs-number">1</span><span class="hljs-number">-9</span>]\d&#123;<span class="hljs-number">3</span>&#125;((<span class="hljs-number">0</span>\d)|(<span class="hljs-number">1</span>[<span class="hljs-number">0</span><span class="hljs-number">-2</span>]))(([<span class="hljs-number">0</span>|<span class="hljs-number">1</span>|<span class="hljs-number">2</span>]\d)|<span class="hljs-number">3</span>[<span class="hljs-number">0</span><span class="hljs-number">-1</span>])\d&#123;<span class="hljs-number">3</span>&#125;([<span class="hljs-number">0</span><span class="hljs-number">-9</span>]|(x|X))$/<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>正则表达式</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javassist</title>
    <link href="/2022/08/19/Javassist%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/08/19/Javassist%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>首先需要引入jar包：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.javassist<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javassist<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.27.0-GA<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>有如下类对象：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.example.demotools;<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestUtil</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TestUtil</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getName</span><span class="hljs-params">(String var0)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;this is changed by javassis&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getName2</span><span class="hljs-params">(String var0)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;-23333-wwwww-222222222&quot;</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>修改代码</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public static void main(String<span class="hljs-literal">[]</span> args) throws Exception &#123;<br>        <span class="hljs-comment">// 这一步是完整的jar包路径</span><br>        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ClassPool</span>.</span></span>get<span class="hljs-constructor">Default()</span>.insert<span class="hljs-constructor">ClassPath(<span class="hljs-string">&quot;D:\\repository\\com\\example\\demotools\\0.0.1-SNAPSHOT\\demotools-0.0.1-SNAPSHOT2.jar&quot;</span>)</span>;<br>        CtClass ctClass = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ClassPool</span>.</span></span>get<span class="hljs-constructor">Default()</span>.get<span class="hljs-constructor">CtClass(<span class="hljs-string">&quot;com.example.demotools.TestUtil&quot;</span>)</span>;<br>        CtMethod getName = ctClass.get<span class="hljs-constructor">DeclaredMethod(<span class="hljs-string">&quot;getName&quot;</span>)</span>;<br>        getName.set<span class="hljs-constructor">Body(<span class="hljs-string">&quot;&#123;if(true)&#123;return \&quot;this is 1\&quot;;&#125;else&#123;return \&quot;this is not 1\&quot;;&#125;&#125;&quot;</span>)</span>;<br>        getName.insert<span class="hljs-constructor">Before(<span class="hljs-string">&quot;return $1;&quot;</span>)</span>;<br>        CtMethod getName2 = ctClass.get<span class="hljs-constructor">DeclaredMethod(<span class="hljs-string">&quot;getName2&quot;</span>)</span>;<br>        getName2.set<span class="hljs-constructor">Body(<span class="hljs-string">&quot;&#123;String a;if(true)&#123;a=\&quot;this is a FiledValue\&quot;;return a;&#125;else&#123;return $1;&#125;&#125;&quot;</span>)</span>;<br>        <span class="hljs-comment">// 这一步就是将破译完的代码放在桌面上</span><br>        ctClass.write<span class="hljs-constructor">File(<span class="hljs-string">&quot;D:\\tmp\\&quot;</span>)</span>;<br><br>    &#125;<br></code></pre></td></tr></table></figure><p>修改后</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs arduino">package com.example.demotools;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestUtil</span> &#123;</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TestUtil</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">String</span> <span class="hljs-title">getName</span><span class="hljs-params">(<span class="hljs-keyword">String</span> var0)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> var0;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">String</span> <span class="hljs-title">getName2</span><span class="hljs-params">(<span class="hljs-keyword">String</span> var0)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-keyword">String</span> var1 = <span class="hljs-string">&quot;this is a FiledValue&quot;</span>;<br>            <span class="hljs-keyword">return</span> var1;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> var0;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>这一步之后，你会在D:\tmp\发现一个com文件夹，没错，这个就是最重要的东西！！！<br>将你使用的jar包拷贝到桌面上解压，然后将刚才的文件复制到解压后的文件夹里面进行覆盖，然后将META-INF中 *.RSA 和 *.SF 文件删除后，重新打包。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">jar cvfm xxxxx.jar META-INF<span class="hljs-regexp">/MANIFEST.MF ./</span><br></code></pre></td></tr></table></figure><p>更多使用：<a href="https://cloud.tencent.com/developer/article/1815164">https://cloud.tencent.com/developer/article/1815164</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>字节码</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos7安装FFmpeg</title>
    <link href="/2022/04/02/Centos7%20%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85FFmpeg/"/>
    <url>/2022/04/02/Centos7%20%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85FFmpeg/</url>
    
    <content type="html"><![CDATA[<h3 id="下载源码"><a href="#下载源码" class="headerlink" title="下载源码"></a>下载源码</h3><p><a href="http://www.ffmpeg.org/releases/">http://www.ffmpeg.org/releases/</a></p><p>选择对应版本的压缩包，例如：ffmpeg-5.0.tar.gz      </p><h3 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h3><ol><li><p>上传到服务器</p></li><li><p>安装编译环境</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sudo yum -y <span class="hljs-keyword">install</span> make automake gcc gcc-c++ cc kernel-devel glibc-devel<br> <br>sudo yum -y <span class="hljs-keyword">install</span> libxml2 libxml2-devel libxslt libxslt-devel<br><br>sudo yum -y <span class="hljs-keyword">install</span> yasm<br></code></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>解压</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">tar</span> <span class="hljs-selector-tag">zxvf</span> <span class="hljs-selector-tag">ffmpeg-4</span><span class="hljs-selector-class">.4</span><span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span><br></code></pre></td></tr></table></figure></li><li><p>编译安装</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo .<span class="hljs-regexp">/configure --enable-shared --prefix=/u</span>sr<span class="hljs-regexp">/local/</span>ffmpeg<br>sudo make &amp;&amp; make install<br></code></pre></td></tr></table></figure></li><li><p>行环境变量配置</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo vim <span class="hljs-regexp">/etc/</span>ld.so.conf<br>添加安装的路径: <br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/ffmpeg/</span>bin<br>更新<br>ldconfig<br></code></pre></td></tr></table></figure></li><li><p>建立软连接，变为全局,对应自己路径</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo ln -s <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/ffmpeg/</span>bin<span class="hljs-regexp">/ffmpeg /u</span>sr<span class="hljs-regexp">/local/</span>bin<br></code></pre></td></tr></table></figure></li><li><p>验证</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">ffmpeg -<span class="hljs-built_in">version</span><br></code></pre></td></tr></table></figure></li></ol><p>ps:</p><p>若无法安装到/usr/local/ffmpeg,可以安装到当前登录用户名(user01)下的文件空间下，例如：/home/user01/</p>]]></content>
    
    
    
    <tags>
      
      <tag>ffmpeg</tag>
      
      <tag>Centos7</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>bilibiliApis</title>
    <link href="/2021/06/11/BilibiliApis/"/>
    <url>/2021/06/11/BilibiliApis/</url>
    
    <content type="html"><![CDATA[<h4 id="1-用户搜索"><a href="#1-用户搜索" class="headerlink" title="1. 用户搜索"></a>1. 用户搜索</h4><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas">https://api.bilibili.com/<span class="hljs-meta">x</span>/web-interface/search/type?search_type=bili_user<span class="hljs-variable">&amp;page</span>=1<span class="hljs-variable">&amp;changing</span>=mid<span class="hljs-variable">&amp;__refresh__</span>=true<span class="hljs-variable">&amp;highlight</span>=1<span class="hljs-variable">&amp;single_column</span>=0<span class="hljs-variable">&amp;keyword</span>=新华社<br></code></pre></td></tr></table></figure><p>param:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">keyword</span>=新华社<br></code></pre></td></tr></table></figure><p>result：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;message&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,<br>    <span class="hljs-attr">&quot;ttl&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;seid&quot;</span>: <span class="hljs-string">&quot;16508985117305632561&quot;</span>,<br>         .....<br>        &quot;result&quot;: [<br>            &#123;<br>                <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;bili_user&quot;</span>,<br>                <span class="hljs-attr">&quot;mid&quot;</span>: <span class="hljs-number">473837611</span>,<br>                <span class="hljs-attr">&quot;uname&quot;</span>: <span class="hljs-string">&quot;新华社&quot;</span>,<br>                <span class="hljs-attr">&quot;usign&quot;</span>: <span class="hljs-string">&quot;我是稳中带皮皮中有稳稳得一皮的鲜花舍。本社专营各种新闻报道，欢迎各位选购。&quot;</span>,<br>                <span class="hljs-attr">&quot;fans&quot;</span>: <span class="hljs-number">2165506</span>,<br>                <span class="hljs-attr">&quot;videos&quot;</span>: <span class="hljs-number">1414</span>,<br>                <span class="hljs-attr">&quot;upic&quot;</span>: <span class="hljs-string">&quot;//i2.hdslb.com/bfs/face/3e9def9e060a7654df1e65d4fe9d35c5e121e078.jpg&quot;</span>,<br>                <span class="hljs-attr">&quot;verify_info&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                <span class="hljs-attr">&quot;level&quot;</span>: <span class="hljs-number">6</span>,<br>                <span class="hljs-attr">&quot;gender&quot;</span>: <span class="hljs-number">3</span>,<br>                <span class="hljs-attr">&quot;is_upuser&quot;</span>: <span class="hljs-number">1</span>,<br>                <span class="hljs-attr">&quot;is_live&quot;</span>: <span class="hljs-number">1</span>,<br>                <span class="hljs-attr">&quot;room_id&quot;</span>: <span class="hljs-number">22015508</span>,<br>                <span class="hljs-attr">&quot;res&quot;</span>: [<br>                    &#123;<br>                        <span class="hljs-attr">&quot;aid&quot;</span>: <span class="hljs-number">546096095</span>,<br>                        <span class="hljs-attr">&quot;bvid&quot;</span>: <span class="hljs-string">&quot;BV1Xq4y1576Q&quot;</span>,<br>                        <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;海军招生宣传片《踏浪扬帆 崭新征程》重磅发布&quot;</span>,<br>                        <span class="hljs-attr">&quot;pubdate&quot;</span>: <span class="hljs-number">1623342182</span>,<br>                        <span class="hljs-attr">&quot;arcurl&quot;</span>: <span class="hljs-string">&quot;http://www.bilibili.com/video/av546096095&quot;</span>,<br>                        <span class="hljs-attr">&quot;pic&quot;</span>: <span class="hljs-string">&quot;//i2.hdslb.com/bfs/archive/cba9229c937b18f2bd7b4a60af10d885bd5ed774.jpg&quot;</span>,<br>                        <span class="hljs-attr">&quot;play&quot;</span>: <span class="hljs-string">&quot;27772&quot;</span>,<br>                        <span class="hljs-attr">&quot;dm&quot;</span>: <span class="hljs-number">67</span>,<br>                        <span class="hljs-attr">&quot;coin&quot;</span>: <span class="hljs-number">844</span>,<br>                        <span class="hljs-attr">&quot;fav&quot;</span>: <span class="hljs-number">486</span>,<br>                        <span class="hljs-attr">&quot;desc&quot;</span>: <span class="hljs-string">&quot;这里有战舰乘风破浪，这里有潜艇潜行大洋，这里有战机巡航海天，这里有陆战精英全域出击，这里还有导弹剑指苍穹……报考海军院校，加入海军方阵，人民海军期待你的到来！&quot;</span>,<br>                        <span class="hljs-attr">&quot;duration&quot;</span>: <span class="hljs-string">&quot;4:22&quot;</span>,<br>                        <span class="hljs-attr">&quot;is_pay&quot;</span>: <span class="hljs-number">0</span>,<br>                        <span class="hljs-attr">&quot;is_union_video&quot;</span>: <span class="hljs-number">1</span><br>                    &#125;<br>                ],<br>                <span class="hljs-attr">&quot;official_verify&quot;</span>: &#123;<br>                    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-number">1</span>,<br>                    <span class="hljs-attr">&quot;desc&quot;</span>: <span class="hljs-string">&quot;新华社官方账号&quot;</span><br>                &#125;,<br>                <span class="hljs-attr">&quot;hit_columns&quot;</span>: []<br>            &#125;<br>        ],<br>        &quot;show_column&quot;: 0<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-用户视频"><a href="#2-用户视频" class="headerlink" title="2. 用户视频"></a>2. 用户视频</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>api.bilibili.com<span class="hljs-regexp">/x/</span>space<span class="hljs-regexp">/arc/</span>search?ps=<span class="hljs-number">10</span>&amp;tid=<span class="hljs-number">0</span>&amp;pn=<span class="hljs-number">1</span>&amp;order=pubdate&amp;jsonp=jsonp&amp;mid=<span class="hljs-number">473837611</span><br></code></pre></td></tr></table></figure><p>param:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">mid</span>=<span class="hljs-number">473837611</span><br></code></pre></td></tr></table></figure><p>result：</p><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs nim">&#123;<br>    <span class="hljs-string">&quot;code&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,<br>    <span class="hljs-string">&quot;ttl&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&quot;data&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;list&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;tlist&quot;</span>: <span class="hljs-meta">&#123;...&#125;</span>,<br>            <span class="hljs-string">&quot;vlist&quot;</span>: [<br>                &#123;<br>                    <span class="hljs-string">&quot;comment&quot;</span>: <span class="hljs-number">235</span>,<br>                    <span class="hljs-string">&quot;typeid&quot;</span>: <span class="hljs-number">204</span>,<br>                    <span class="hljs-string">&quot;play&quot;</span>: <span class="hljs-number">52226</span>,<br>                    <span class="hljs-string">&quot;pic&quot;</span>: <span class="hljs-string">&quot;http://i0.hdslb.com/bfs/archive/adc6d430745a30208de129183400ec23d78c937d.jpg&quot;</span>,<br>                    <span class="hljs-string">&quot;subtitle&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                    <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-string">&quot;据法新社太子港7月9日报道，海地警方当地时间8日表示，对总统莫伊兹实施刺杀的至少有28人，并补充说其中26人是哥伦比亚人，另2人是出身海地的美国人。报道称，海地国家警察总局局长莱昂·夏尔在新闻发布会上表示：“我们已经逮捕15名哥伦比亚人和2名出身海地的美国人。3名哥伦比亚人被杀，其余8人在逃。”（参考消息）\n\n视频来源：今日俄罗斯       站内编辑：藤椒面&quot;</span>,<br>                    <span class="hljs-string">&quot;copyright&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,<br>                    <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;海地警方逮捕击毙多名暗杀总统嫌犯，其中两名美国人&quot;</span>,<br>                    <span class="hljs-string">&quot;review&quot;</span>: <span class="hljs-number">0</span>,<br>                    <span class="hljs-string">&quot;author&quot;</span>: <span class="hljs-string">&quot;新华社&quot;</span>,<br>                    <span class="hljs-string">&quot;mid&quot;</span>: <span class="hljs-number">473837611</span>,<br>                    <span class="hljs-string">&quot;created&quot;</span>: <span class="hljs-number">1625800679</span>,<br>                    <span class="hljs-string">&quot;length&quot;</span>: <span class="hljs-string">&quot;01:31&quot;</span>,<br>                    <span class="hljs-string">&quot;video_review&quot;</span>: <span class="hljs-number">51</span>,<br>                    <span class="hljs-string">&quot;aid&quot;</span>: <span class="hljs-number">334065170</span>,<br>                    <span class="hljs-string">&quot;bvid&quot;</span>: <span class="hljs-string">&quot;BV1Zw411R7s7&quot;</span>,<br>                    <span class="hljs-string">&quot;hide_click&quot;</span>: <span class="hljs-literal">false</span>,<br>                    <span class="hljs-string">&quot;is_pay&quot;</span>: <span class="hljs-number">0</span>,<br>                    <span class="hljs-string">&quot;is_union_video&quot;</span>: <span class="hljs-number">0</span>,<br>                    <span class="hljs-string">&quot;is_steins_gate&quot;</span>: <span class="hljs-number">0</span>,<br>                    <span class="hljs-string">&quot;is_live_playback&quot;</span>: <span class="hljs-number">0</span><br>                &#125;<br>            ]<br>        &#125;,<br>        <span class="hljs-string">&quot;page&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;pn&quot;</span>: <span class="hljs-number">1</span>,<br>            <span class="hljs-string">&quot;ps&quot;</span>: <span class="hljs-number">10</span>,<br>            <span class="hljs-string">&quot;count&quot;</span>: <span class="hljs-number">1622</span><br>        &#125;,<br>        <span class="hljs-string">&quot;episodic_button&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;播放全部&quot;</span>,<br>            <span class="hljs-string">&quot;uri&quot;</span>: <span class="hljs-string">&quot;//www.bilibili.com/medialist/play/473837611?from=space&quot;</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-用户动态"><a href="#3-用户动态" class="headerlink" title="3. 用户动态"></a>3. 用户动态</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>api.vc.bilibili.com<span class="hljs-regexp">/dynamic_svr/</span>v1<span class="hljs-regexp">/dynamic_svr/</span>space_history?offset_dynamic_id=<span class="hljs-number">0</span>&amp;need_top=<span class="hljs-number">1</span>&amp;platform=web&amp;host_uid=<span class="hljs-number">14453048</span><br></code></pre></td></tr></table></figure><p>param:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">host_uid</span>=<span class="hljs-number">14453048</span><br></code></pre></td></tr></table></figure><p>result：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs latex">&#123;<br>    &quot;code&quot;: 0,<br>    &quot;msg&quot;: &quot;&quot;,<br>    &quot;message&quot;: &quot;&quot;,<br>    &quot;data&quot;: &#123;<br>        ...<br>        &quot;cards&quot;: [<br>            &#123;<br>                &quot;desc&quot;: &#123;<br>                    &quot;uid&quot;: 14453048,<br>                    &quot;type&quot;: 2,<br>                    &quot;rid&quot;: 144211469,<br>                    &quot;acl&quot;: 0,<br>                    &quot;view&quot;: 3843,<br>                    &quot;repost&quot;: 12,<br>                    &quot;comment&quot;: 2,<br>                    &quot;like&quot;: 203,<br>                    &quot;is_liked&quot;: 0,<br>                    &quot;dynamic_id&quot;: 544927493266101898,<br>                    &quot;timestamp&quot;: 1625714219,<br>                    &quot;pre_dy_id&quot;: 0,<br>                    &quot;orig_dy_id&quot;: 0,<br>                    &quot;orig_type&quot;: 0,<br>                    &quot;user_profile&quot;: &#123;...&#125;,<br>                    &quot;uid_type&quot;: 1,<br>                    &quot;stype&quot;: 0,<br>                    &quot;r_type&quot;: 1,<br>                    &quot;inner_id&quot;: 0,<br>                    &quot;status&quot;: 1,<br>                    &quot;dynamic_id_str&quot;: &quot;544927493266101898&quot;,<br>                    &quot;pre_dy_id_str&quot;: &quot;0&quot;,<br>                    &quot;orig_dy_id_str&quot;: &quot;0&quot;,<br>                    &quot;rid_str&quot;: &quot;144211469&quot;<br>                &#125;,<br>                &quot;card&quot;: &quot;&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>item<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>at_control<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span><span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>category<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>daily<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>description<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>竹行简&amp;质量  动漫美图推荐【552】 <span class="hljs-tag">\<span class="hljs-name">\</span></span>n点击「转发」立刻永久保存美图[tv_点赞]<span class="hljs-tag">\<span class="hljs-name">\</span></span>n<span class="hljs-tag">\<span class="hljs-name">\</span></span>n动态内图片均为互联网整理收集，不会作为商业用途使用。侵权即删致歉（喜欢的作品ID可以通过https:<span class="hljs-tag">\<span class="hljs-name">\</span></span>/<span class="hljs-tag">\<span class="hljs-name">\</span></span>/saucenao.com查找作者）<span class="hljs-tag">\<span class="hljs-name">\</span></span>n#动漫美图##动漫壁纸##壁纸##二次元##动漫##萌妹子##二次元美图##美图##插画##P站搬运##FGO##明日方舟##原神#<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>id<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:144211469,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>is_fav<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:0,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>pictures<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:[&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_height<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:3600,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_size<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:7635.96,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_src<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>https:<span class="hljs-tag">\<span class="hljs-name">\</span></span>/<span class="hljs-tag">\<span class="hljs-name">\</span></span>/i0.hdslb.com<span class="hljs-tag">\<span class="hljs-name">\</span></span>/bfs<span class="hljs-tag">\<span class="hljs-name">\</span></span>/album<span class="hljs-tag">\<span class="hljs-name">\</span></span>/ae1be86697b3bd010ac931d9ed9a29f94c9a5959.png<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_tags<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:null,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_width<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:2525&#125;,&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_height<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:3285,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_size<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:1494.98,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_src<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>https:<span class="hljs-tag">\<span class="hljs-name">\</span></span>/<span class="hljs-tag">\<span class="hljs-name">\</span></span>/i0.hdslb.com<span class="hljs-tag">\<span class="hljs-name">\</span></span>/bfs<span class="hljs-tag">\<span class="hljs-name">\</span></span>/album<span class="hljs-tag">\<span class="hljs-name">\</span></span>/86db901fc1e220b405666e527128ec0eb29dbdd8.jpg<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_tags<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:null,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_width<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:2600&#125;,&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_height<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:3720,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_size<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:3704.7,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_src<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>https:<span class="hljs-tag">\<span class="hljs-name">\</span></span>/<span class="hljs-tag">\<span class="hljs-name">\</span></span>/i0.hdslb.com<span class="hljs-tag">\<span class="hljs-name">\</span></span>/bfs<span class="hljs-tag">\<span class="hljs-name">\</span></span>/album<span class="hljs-tag">\<span class="hljs-name">\</span></span>/5be972a75706793f00adfb0dbfcee5165ec3ed89.png<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_tags<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:null,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_width<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:2381&#125;,&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_height<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:3883,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_size<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:6071.85,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_src<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>https:<span class="hljs-tag">\<span class="hljs-name">\</span></span>/<span class="hljs-tag">\<span class="hljs-name">\</span></span>/i0.hdslb.com<span class="hljs-tag">\<span class="hljs-name">\</span></span>/bfs<span class="hljs-tag">\<span class="hljs-name">\</span></span>/album<span class="hljs-tag">\<span class="hljs-name">\</span></span>/a6c6f84450fa480b118052759a626650516427ec.png<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_tags<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:null,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_width<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:2533&#125;,&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_height<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:6017,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_size<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:15330.47,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_src<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>https:<span class="hljs-tag">\<span class="hljs-name">\</span></span>/<span class="hljs-tag">\<span class="hljs-name">\</span></span>/i0.hdslb.com<span class="hljs-tag">\<span class="hljs-name">\</span></span>/bfs<span class="hljs-tag">\<span class="hljs-name">\</span></span>/album<span class="hljs-tag">\<span class="hljs-name">\</span></span>/69ce25029248e63ff69df90acbca307f9fc1c400.png<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_tags<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:null,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_width<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:4254&#125;,&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_height<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:2902,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_size<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:5212.84,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_src<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>https:<span class="hljs-tag">\<span class="hljs-name">\</span></span>/<span class="hljs-tag">\<span class="hljs-name">\</span></span>/i0.hdslb.com<span class="hljs-tag">\<span class="hljs-name">\</span></span>/bfs<span class="hljs-tag">\<span class="hljs-name">\</span></span>/album<span class="hljs-tag">\<span class="hljs-name">\</span></span>/8169463cb82f88d0a3c3e74749c4bcd7774a02d5.png<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_tags<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:null,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_width<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:2246&#125;,&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_height<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:2400,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_size<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:6538.63,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_src<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>https:<span class="hljs-tag">\<span class="hljs-name">\</span></span>/<span class="hljs-tag">\<span class="hljs-name">\</span></span>/i0.hdslb.com<span class="hljs-tag">\<span class="hljs-name">\</span></span>/bfs<span class="hljs-tag">\<span class="hljs-name">\</span></span>/album<span class="hljs-tag">\<span class="hljs-name">\</span></span>/7751321725a2dbcdd4c8f372b3f3e5b7848a774d.png<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_tags<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:null,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_width<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:3200&#125;,&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_height<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:7016,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_size<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:17883.63,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_src<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>https:<span class="hljs-tag">\<span class="hljs-name">\</span></span>/<span class="hljs-tag">\<span class="hljs-name">\</span></span>/i0.hdslb.com<span class="hljs-tag">\<span class="hljs-name">\</span></span>/bfs<span class="hljs-tag">\<span class="hljs-name">\</span></span>/album<span class="hljs-tag">\<span class="hljs-name">\</span></span>/1910a1f598fb7a19bf67a74bf2263ba914c84700.jpg<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_tags<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:null,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_width<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:4961&#125;,&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_height<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:1739,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_size<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:775.91,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_src<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>https:<span class="hljs-tag">\<span class="hljs-name">\</span></span>/<span class="hljs-tag">\<span class="hljs-name">\</span></span>/i0.hdslb.com<span class="hljs-tag">\<span class="hljs-name">\</span></span>/bfs<span class="hljs-tag">\<span class="hljs-name">\</span></span>/album<span class="hljs-tag">\<span class="hljs-name">\</span></span>/1688c404be149fce94d3330e85e4f9d6c0779096.jpg<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_tags<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:null,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>img_width<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:1120&#125;],<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>pictures_count<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:9,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>reply<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:2,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>role<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:[],<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>settings<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>copy_forbidden<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>0<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>&#125;,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>source<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:[],<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>title<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span><span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>upload_time<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:1625714219&#125;,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>user<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>head_url<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>https:<span class="hljs-tag">\<span class="hljs-name">\</span></span>/<span class="hljs-tag">\<span class="hljs-name">\</span></span>/i1.hdslb.com<span class="hljs-tag">\<span class="hljs-name">\</span></span>/bfs<span class="hljs-tag">\<span class="hljs-name">\</span></span>/face<span class="hljs-tag">\<span class="hljs-name">\</span></span>/1e68054ebba6bb6c511c1a25ea5ff05f33ca87b2.jpg<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>name<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>竹行简<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>uid<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:14453048,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>vip<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>avatar_subscript<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:1,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>due_date<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:1630080000000,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>label<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>label_theme<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>annual_vip<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>path<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span><span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>text<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>年度大会员<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>&#125;,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>nickname_color<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>#FB7299<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>status<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:1,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>theme_type<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:0,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>type<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:2,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>vip_pay_type<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:1&#125;&#125;&#125;&quot;,<br>                &quot;extend_json&quot;: &quot;&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>from<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>emoji_type<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:1,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>from<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span><span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>up_close_comment<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:0,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>verify<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>asw<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>fl<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:15,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>nv<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:1&#125;,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>sw<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>fl<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:15,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>nv<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:1&#125;&#125;&#125;,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>like_icon<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>action<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span><span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>action_url<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span><span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>end<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span><span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>end_url<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span><span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>start<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span><span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>start_url<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span><span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>&#125;,<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>topic<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:&#123;<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>is_attach_topic<span class="hljs-tag">\<span class="hljs-name">&quot;</span></span>:1&#125;&#125;&quot;,<br>                &quot;extra&quot;: &#123;<br>                    &quot;is_space_top&quot;: 0<br>                &#125;,<br>                &quot;display&quot;: &#123;...&#125;<br>            &#125;<br>        ],<br>        &quot;next_offset&quot;: 543888523497252525,<br>        &quot;_gt_&quot;: 0<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-用户相簿"><a href="#4-用户相簿" class="headerlink" title="4. 用户相簿"></a>4. 用户相簿</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>api.bilibili.com<span class="hljs-regexp">/x/</span>dynamic<span class="hljs-regexp">/feed/</span>draw/doc_list?page_num=<span class="hljs-number">0</span>&amp;page_size=<span class="hljs-number">30</span>&amp;biz=all&amp;jsonp=jsonp&amp;uid=<span class="hljs-number">14453048</span><br></code></pre></td></tr></table></figure><p>param:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">uid</span>=<span class="hljs-number">14453048</span><br></code></pre></td></tr></table></figure><p>result：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;message&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,<br>    <span class="hljs-attr">&quot;ttl&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;items&quot;</span>: [<br>            &#123;<br>                <span class="hljs-attr">&quot;doc_id&quot;</span>: <span class="hljs-number">144211469</span>,<br>                <span class="hljs-attr">&quot;poster_uid&quot;</span>: <span class="hljs-number">14453048</span>,<br>                <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;竹行简&amp;质量  动漫美图推荐【552】 \n点击「转发」立刻永久保存美图[tv_点赞]\n\n动态内图片均为互联网整理收集，不会作为商业用途使用。侵权即删致歉（喜欢的作品ID可以通过https://saucenao.com查找作者）\n#动漫美图##动漫壁纸##壁纸##二次元##动漫##萌妹子##二次元美图##美图##插画##P站搬运##FGO##明日方舟##原神#&quot;</span>,<br>                <span class="hljs-attr">&quot;pictures&quot;</span>: [<br>                    &#123;<br>                        <span class="hljs-attr">&quot;img_src&quot;</span>: <span class="hljs-string">&quot;https://i0.hdslb.com/bfs/album/ae1be86697b3bd010ac931d9ed9a29f94c9a5959.png&quot;</span>,<br>                        <span class="hljs-attr">&quot;img_width&quot;</span>: <span class="hljs-number">2525</span>,<br>                        <span class="hljs-attr">&quot;img_height&quot;</span>: <span class="hljs-number">3600</span>,<br>                        <span class="hljs-attr">&quot;img_size&quot;</span>: <span class="hljs-number">7635.96</span>,<br>                        <span class="hljs-attr">&quot;img_tags&quot;</span>: <span class="hljs-literal">null</span><br>                    &#125;,<br>                    &#123;<br>                        <span class="hljs-attr">&quot;img_src&quot;</span>: <span class="hljs-string">&quot;https://i0.hdslb.com/bfs/album/86db901fc1e220b405666e527128ec0eb29dbdd8.jpg&quot;</span>,<br>                        <span class="hljs-attr">&quot;img_width&quot;</span>: <span class="hljs-number">2600</span>,<br>                        <span class="hljs-attr">&quot;img_height&quot;</span>: <span class="hljs-number">3285</span>,<br>                        <span class="hljs-attr">&quot;img_size&quot;</span>: <span class="hljs-number">1494.98</span>,<br>                        <span class="hljs-attr">&quot;img_tags&quot;</span>: <span class="hljs-literal">null</span><br>                    &#125;,<br>                    &#123;<br>                        <span class="hljs-attr">&quot;img_src&quot;</span>: <span class="hljs-string">&quot;https://i0.hdslb.com/bfs/album/5be972a75706793f00adfb0dbfcee5165ec3ed89.png&quot;</span>,<br>                        <span class="hljs-attr">&quot;img_width&quot;</span>: <span class="hljs-number">2381</span>,<br>                        <span class="hljs-attr">&quot;img_height&quot;</span>: <span class="hljs-number">3720</span>,<br>                        <span class="hljs-attr">&quot;img_size&quot;</span>: <span class="hljs-number">3704.7</span>,<br>                        <span class="hljs-attr">&quot;img_tags&quot;</span>: <span class="hljs-literal">null</span><br>                    &#125;,<br>                    &#123;<br>                        <span class="hljs-attr">&quot;img_src&quot;</span>: <span class="hljs-string">&quot;https://i0.hdslb.com/bfs/album/a6c6f84450fa480b118052759a626650516427ec.png&quot;</span>,<br>                        <span class="hljs-attr">&quot;img_width&quot;</span>: <span class="hljs-number">2533</span>,<br>                        <span class="hljs-attr">&quot;img_height&quot;</span>: <span class="hljs-number">3883</span>,<br>                        <span class="hljs-attr">&quot;img_size&quot;</span>: <span class="hljs-number">6071.85</span>,<br>                        <span class="hljs-attr">&quot;img_tags&quot;</span>: <span class="hljs-literal">null</span><br>                    &#125;,<br>                    &#123;<br>                        <span class="hljs-attr">&quot;img_src&quot;</span>: <span class="hljs-string">&quot;https://i0.hdslb.com/bfs/album/69ce25029248e63ff69df90acbca307f9fc1c400.png&quot;</span>,<br>                        <span class="hljs-attr">&quot;img_width&quot;</span>: <span class="hljs-number">4254</span>,<br>                        <span class="hljs-attr">&quot;img_height&quot;</span>: <span class="hljs-number">6017</span>,<br>                        <span class="hljs-attr">&quot;img_size&quot;</span>: <span class="hljs-number">15330.47</span>,<br>                        <span class="hljs-attr">&quot;img_tags&quot;</span>: <span class="hljs-literal">null</span><br>                    &#125;,<br>                    &#123;<br>                        <span class="hljs-attr">&quot;img_src&quot;</span>: <span class="hljs-string">&quot;https://i0.hdslb.com/bfs/album/8169463cb82f88d0a3c3e74749c4bcd7774a02d5.png&quot;</span>,<br>                        <span class="hljs-attr">&quot;img_width&quot;</span>: <span class="hljs-number">2246</span>,<br>                        <span class="hljs-attr">&quot;img_height&quot;</span>: <span class="hljs-number">2902</span>,<br>                        <span class="hljs-attr">&quot;img_size&quot;</span>: <span class="hljs-number">5212.84</span>,<br>                        <span class="hljs-attr">&quot;img_tags&quot;</span>: <span class="hljs-literal">null</span><br>                    &#125;,<br>                    &#123;<br>                        <span class="hljs-attr">&quot;img_src&quot;</span>: <span class="hljs-string">&quot;https://i0.hdslb.com/bfs/album/7751321725a2dbcdd4c8f372b3f3e5b7848a774d.png&quot;</span>,<br>                        <span class="hljs-attr">&quot;img_width&quot;</span>: <span class="hljs-number">3200</span>,<br>                        <span class="hljs-attr">&quot;img_height&quot;</span>: <span class="hljs-number">2400</span>,<br>                        <span class="hljs-attr">&quot;img_size&quot;</span>: <span class="hljs-number">6538.63</span>,<br>                        <span class="hljs-attr">&quot;img_tags&quot;</span>: <span class="hljs-literal">null</span><br>                    &#125;,<br>                    &#123;<br>                        <span class="hljs-attr">&quot;img_src&quot;</span>: <span class="hljs-string">&quot;https://i0.hdslb.com/bfs/album/1910a1f598fb7a19bf67a74bf2263ba914c84700.jpg&quot;</span>,<br>                        <span class="hljs-attr">&quot;img_width&quot;</span>: <span class="hljs-number">4961</span>,<br>                        <span class="hljs-attr">&quot;img_height&quot;</span>: <span class="hljs-number">7016</span>,<br>                        <span class="hljs-attr">&quot;img_size&quot;</span>: <span class="hljs-number">17883.63</span>,<br>                        <span class="hljs-attr">&quot;img_tags&quot;</span>: <span class="hljs-literal">null</span><br>                    &#125;,<br>                    &#123;<br>                        <span class="hljs-attr">&quot;img_src&quot;</span>: <span class="hljs-string">&quot;https://i0.hdslb.com/bfs/album/1688c404be149fce94d3330e85e4f9d6c0779096.jpg&quot;</span>,<br>                        <span class="hljs-attr">&quot;img_width&quot;</span>: <span class="hljs-number">1120</span>,<br>                        <span class="hljs-attr">&quot;img_height&quot;</span>: <span class="hljs-number">1739</span>,<br>                        <span class="hljs-attr">&quot;img_size&quot;</span>: <span class="hljs-number">775.91</span>,<br>                        <span class="hljs-attr">&quot;img_tags&quot;</span>: <span class="hljs-literal">null</span><br>                    &#125;<br>                ],<br>                <span class="hljs-attr">&quot;count&quot;</span>: <span class="hljs-number">9</span>,<br>                <span class="hljs-attr">&quot;ctime&quot;</span>: <span class="hljs-number">1625714219</span>,<br>                <span class="hljs-attr">&quot;view&quot;</span>: <span class="hljs-number">3846</span>,<br>                <span class="hljs-attr">&quot;like&quot;</span>: <span class="hljs-number">0</span>,<br>                <span class="hljs-attr">&quot;dyn_id&quot;</span>: <span class="hljs-string">&quot;544927493266101898&quot;</span><br>            &#125; <br>        ]<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>bilibili</tag>
      
      <tag>Api</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MyCat安装使用</title>
    <link href="/2021/05/28/MyCat/"/>
    <url>/2021/05/28/MyCat/</url>
    
    <content type="html"><![CDATA[<h4 id="1-下载安装"><a href="#1-下载安装" class="headerlink" title="1.下载安装"></a>1.下载安装</h4><p>下载目录：<a href="http://dl.mycat.org.cn/">http://dl.mycat.org.cn/</a></p><h5 id="上传-解压"><a href="#上传-解压" class="headerlink" title="上传 解压"></a>上传 解压</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">tar</span> <span class="hljs-selector-tag">-zxvf</span> <span class="hljs-selector-tag">Mycat-server-1</span><span class="hljs-selector-class">.6</span><span class="hljs-selector-class">.7</span><span class="hljs-selector-class">.4-release-20200105164103-linux</span><span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span> <br></code></pre></td></tr></table></figure><h5 id="重要的三个配置文件"><a href="#重要的三个配置文件" class="headerlink" title="重要的三个配置文件"></a>重要的三个配置文件</h5><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">cd mycat/conf<br>    schema.<span class="hljs-keyword">xml</span>        <span class="hljs-title"># 定义逻辑库,表,分片节点等内容</span><br><span class="hljs-title">    rule</span>.<span class="hljs-keyword">xml</span>        <span class="hljs-title"># 定义分片规则</span><br><span class="hljs-title">    server</span>.<span class="hljs-keyword">xml</span>        <span class="hljs-title"># mycat</span>服务配置<br></code></pre></td></tr></table></figure><h4 id="2-修改配置文件"><a href="#2-修改配置文件" class="headerlink" title="2.修改配置文件"></a>2.修改配置文件</h4><h5 id="修改server-xml"><a href="#修改server-xml" class="headerlink" title="修改server.xml"></a>修改server.xml</h5><p><em><!-- 配置 MyCat 用户名 密码 --></em></p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;user <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;mycat&quot;</span> defaultAccount=<span class="hljs-string">&quot;true&quot;</span>&gt;<br>    &lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;<span class="hljs-number">123456</span>&lt;/<span class="hljs-keyword">property</span>&gt;<br>    &lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;schemas&quot;</span>&gt;TESTDB&lt;/<span class="hljs-keyword">property</span>&gt;<br>    &lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;defaultSchema&quot;</span>&gt;TESTDB&lt;/<span class="hljs-keyword">property</span>&gt;<br>&lt;/user&gt;<br></code></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/05/28/XKktJQwYia36GCF.png" alt="image-20210528110254129"></p><h5 id="修改schema-xml"><a href="#修改schema-xml" class="headerlink" title="修改schema.xml"></a>修改schema.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mycat</span>:schema <span class="hljs-meta-keyword">SYSTEM</span> <span class="hljs-meta-string">&quot;schema.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mycat:schema</span> <span class="hljs-attr">xmlns:mycat</span>=<span class="hljs-string">&quot;http://io.mycat/&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 相当与一个虚拟数据库,这个库中的表格映射了test库中的表 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">schema</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;TESTDB&quot;</span> <span class="hljs-attr">checkSQLschema</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">sqlMaxLimit</span>=<span class="hljs-string">&quot;100&quot;</span> <span class="hljs-attr">dataNode</span>=<span class="hljs-string">&quot;dn1&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">schema</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 数据节点 host150 机器内的 mycat 数据库 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dataNode</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dn1&quot;</span> <span class="hljs-attr">dataHost</span>=<span class="hljs-string">&quot;host150&quot;</span> <span class="hljs-attr">database</span>=<span class="hljs-string">&quot;mycat&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dataHost</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;host150&quot;</span> <span class="hljs-attr">maxCon</span>=<span class="hljs-string">&quot;1000&quot;</span> <span class="hljs-attr">minCon</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">balance</span>=<span class="hljs-string">&quot;2&quot;</span></span><br><span class="hljs-tag">                          <span class="hljs-attr">writeType</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">dbType</span>=<span class="hljs-string">&quot;mysql&quot;</span> <span class="hljs-attr">dbDriver</span>=<span class="hljs-string">&quot;jdbc&quot;</span> <span class="hljs-attr">switchType</span>=<span class="hljs-string">&quot;1&quot;</span>  <span class="hljs-attr">slaveThreshold</span>=<span class="hljs-string">&quot;100&quot;</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- 心跳 默认就好 --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">heartbeat</span>&gt;</span>select user()<span class="hljs-tag">&lt;/<span class="hljs-name">heartbeat</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- 读写分离 --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">writeHost</span> <span class="hljs-attr">host</span>=<span class="hljs-string">&quot;hostM1&quot;</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;jdbc:mysql://192.168.186.150:3306&quot;</span> <span class="hljs-attr">user</span>=<span class="hljs-string">&quot;root&quot;</span> <span class="hljs-attr">password</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>                         <span class="hljs-tag">&lt;<span class="hljs-name">readHost</span> <span class="hljs-attr">host</span>=<span class="hljs-string">&quot;hostS1&quot;</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;jdbc:mysql://192.168.186.151:3306&quot;</span> <span class="hljs-attr">user</span>=<span class="hljs-string">&quot;root&quot;</span> <span class="hljs-attr">password</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">readHost</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">writeHost</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dataHost</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mycat:schema</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/05/28/DJvq1XdKa6mpUo4.png" alt="image-20210528110517024"></p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lsl">读写分离 一般设置为 <span class="hljs-number">1</span> 或者 <span class="hljs-number">3</span>，这里为了看清效果 设置为 <span class="hljs-number">2</span><br>balance=<span class="hljs-string">&quot;2&quot;</span><br>负载均衡类型，目前的取值有<span class="hljs-number">3</span>种：<br><span class="hljs-number">1.</span> balance=<span class="hljs-string">&quot;0&quot;</span>, 不开启读写分离机制，所有读操作都发送到当前可用的 writehost 上。 <br><span class="hljs-number">2.</span> balance=<span class="hljs-string">&quot;1&quot;</span>，全部的 readhost 与 standby wtirehost 参与select语句的负载均衡，简单的说，当双主双从模式(M1-&gt;S1，M2-&gt;S2，并且M1与M2互为主备)，正常情况下，M2,S1,S2 都参与 select 语句的负载均衡。 <br><span class="hljs-number">3.</span> balance=<span class="hljs-string">&quot;2&quot;</span>，所以读操作都随机的在 writehost、readhost 上分发。<br><span class="hljs-number">4.</span> balance=<span class="hljs-string">&quot;3&quot;</span>，所有读请求随机的分发到 writehost 对应的 readhost 执行，writehost不负担读压力，注意 balance=<span class="hljs-number">3</span> 只有<span class="hljs-number">1.4</span>及其以后版本有，<span class="hljs-number">1.3</span>没有。<br></code></pre></td></tr></table></figure><h4 id="3-启动-amp-登录"><a href="#3-启动-amp-登录" class="headerlink" title="3.启动&amp;登录"></a>3.启动&amp;登录</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">bin/mycat <span class="hljs-literal">start</span><br></code></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">mysql -umycat -p123456 -P <span class="hljs-number">8066</span> -h <span class="hljs-number">192.168</span><span class="hljs-number">.186</span><span class="hljs-number">.150</span><br></code></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/05/28/umHdGDIxKP38aqX.png" alt="image-20210528112139346"></p><h4 id="4-搭建读写分离"><a href="#4-搭建读写分离" class="headerlink" title="4.搭建读写分离"></a>4.搭建读写分离</h4><h5 id="一主一从"><a href="#一主一从" class="headerlink" title="一主一从"></a>一主一从</h5><h6 id="1-主机配置"><a href="#1-主机配置" class="headerlink" title="1.主机配置"></a>1.主机配置</h6><ul><li>vim /etc/mt.cnf </li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[mysqld]</span><br><span class="hljs-comment"># 主服务器唯一 ID</span><br><span class="hljs-attr">server_id</span>=<span class="hljs-number">1</span><br><span class="hljs-comment"># 启用二进制日志</span><br><span class="hljs-attr">log-bin</span>=mysql-bin<br><span class="hljs-comment"># 设置 logbin 格式</span><br><span class="hljs-attr">binlog-format</span>=STATEMENT<br><span class="hljs-comment"># 设置不要复制的数据库</span><br><span class="hljs-attr">binlog-ignore-db</span>=mysql<br><span class="hljs-attr">binlog-ignore-db</span>=infomation_schema<br><span class="hljs-comment"># 设置需要复制的数据库</span><br><span class="hljs-attr">binlog-do-db</span>=mycat<br></code></pre></td></tr></table></figure><h5 id=""><a href="#" class="headerlink" title=""></a><em><!-- binlog_format 三种格式--></em></h5><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vala"><span class="hljs-meta"># master写入执行的SQL语句到binlog中，从库读取这些SQL语句并执行，</span><br><span class="hljs-meta"># 这种基于SQL语句的复制方式是MySQL最早支持的复制方式。</span><br><span class="hljs-meta"># 缺点 执行某些函数时可能造成主从不一致的情况 如 update ... time=now()</span><br>binlog_format=statement<br><br><span class="hljs-meta"># 可以将master的binlog_format配置成同时使用基于statement和row两者的组合格式，</span><br><span class="hljs-meta"># 它记录日志取决于修改的类型，选择合适的格式来记录该修改。</span><br><span class="hljs-meta"># 默认情况下使用statement格式记录日志，特定情况下转换成基于row格式记录。</span><br><span class="hljs-meta"># 缺点 识别不了特定的名称[系统变量] 如 @@host name</span><br>binlog_format=mixed<br> <br><span class="hljs-meta"># MySQL5.7.7版本之后，把binlog_format的默认值修改为了row，</span><br><span class="hljs-meta"># master将修改表的event写入binlog中，并且master将该binlog发送给slave，</span><br><span class="hljs-meta"># slave重放binlog中的event。基于row格式复制时最安全的复制，slave需要的行锁更少。</span><br><span class="hljs-meta"># 复制过程中建议使用row格式，其他格式可能会造成主从数据不一致的情况。</span><br><span class="hljs-meta"># 缺点 执行 100 万次更新,会记录一百万次</span><br>binlog_format=row<br></code></pre></td></tr></table></figure><h6 id="2-从机配置"><a href="#2-从机配置" class="headerlink" title="2.从机配置"></a>2.从机配置</h6><ul><li>vim /etc/mt.cnf </li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[mysqld]</span><br><span class="hljs-comment"># 从机服务器唯一 ID</span><br><span class="hljs-attr">server_id</span>=<span class="hljs-number">2</span><br><span class="hljs-comment"># 启用中继日志</span><br><span class="hljs-attr">relay-log</span>=mysql-relay<br></code></pre></td></tr></table></figure><p><strong>主从机都关闭防火墙或者开启3306端口 ，重启 mysql 服务</strong></p><h5 id="主机上创建账户并授权-slave"><a href="#主机上创建账户并授权-slave" class="headerlink" title="主机上创建账户并授权 slave"></a>主机上创建账户并授权 slave</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">1.登录数据库<br>mysql -uroot -proot<br>2.创建账户并授权 slave <br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">REPLICATION</span> <span class="hljs-keyword">SLAVE</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;slave&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;sasa&#x27;</span>;<br>3.刷新权限<br><span class="hljs-keyword">FLUSH</span> <span class="hljs-keyword">PRIVILEGES</span>;<br>4.查看主机状态<br><span class="hljs-keyword">show</span> <span class="hljs-keyword">master</span> <span class="hljs-keyword">status</span>;<br></code></pre></td></tr></table></figure><p>+—————————+————-+———————–+————————————–+—————————-+<br>| File                           | Position | Binlog_Do_DB | Binlog_Ignore_DB               | Executed_Gtid_Set |<br>+—————————+————-+———————–+————————————–+—————————-+<br>| mysql-bin.000008 |     3703 | mycat                 | mysql,infomation_schema |                                  |<br>+—————————+————-+———————–+————————————–+—————————-+</p><p>ps: <strong>此后，主机不要做任何操作</strong></p><h5 id="从机配置"><a href="#从机配置" class="headerlink" title="从机配置"></a>从机配置</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs routeros">1.登录数据库<br>mysql -uroot -proot<br>2.重置<br>mysql&gt; stop slave;  <br>mysql&gt; reset master;<br>3.配置<br>CHANGE MASTER <span class="hljs-keyword">TO</span> <span class="hljs-attribute">MASTER_HOST</span>=<span class="hljs-string">&#x27;192.168.186.150&#x27;</span>,<br><span class="hljs-attribute">MASTER_USER</span>=<span class="hljs-string">&#x27;slave&#x27;</span>,<br><span class="hljs-attribute">MASTER_PASSWORD</span>=<span class="hljs-string">&#x27;sasa&#x27;</span>,<br><span class="hljs-attribute">MASTER_LOG_FILE</span>=<span class="hljs-string">&#x27;mysql-bin.000008&#x27;</span>,MASTER_LOG_POS=3703;<br>4.从机执行复制功能<br>start slave;<br>5.查看从机服务状态<br>show slave status\G;<br></code></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/05/28/yMWzaxAohXFscLS.png" alt="image-20210528130555085"></p><p><img src="https://i.loli.net/2021/05/28/XOS6Cm8Ict5NDvk.png" alt="image-20210528131440355"></p><p>遇到的问题： <a href="https://blog.csdn.net/leshami/article/details/43854505">https://blog.csdn.net/leshami/article/details/43854505</a></p><h4 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h4><p>进入主机mysql</p><p>插入一条数据</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">insert</span> <span class="hljs-selector-tag">into</span> <span class="hljs-selector-tag">user</span> <span class="hljs-selector-tag">values</span>(<span class="hljs-number">8</span>,<span class="hljs-variable">@@hostname</span>);<br></code></pre></td></tr></table></figure><p>查看主从机数据</p><p>主：</p><p><img src="https://i.loli.net/2021/05/28/jpmbc9KJuny8fAx.png" alt="image-20210528140816254"></p><p>从：</p><p><img src="https://i.loli.net/2021/05/28/njtefbCBFz5g3l6.png" alt="image-20210528140843508"></p><p>主机登录mycat</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">mysql -umycat -p123456 -P 8066 -h 192.168.186.150<br>use TESTDB;<br>select * <span class="hljs-keyword">from</span><span class="hljs-built_in"> user </span>where id = 8;<br></code></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/05/28/1ew5CDNQMpcOLsU.png" alt="image-20210528141021129"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>MySql</tag>
      
      <tag>MyCat</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python3脚本安装</title>
    <link href="/2021/05/20/Python3%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85/"/>
    <url>/2021/05/20/Python3%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h4 id="准备压缩包"><a href="#准备压缩包" class="headerlink" title="准备压缩包"></a>准备压缩包</h4><p>下载网站：<a href="https://www.python.org/ftp/python">https://www.python.org/ftp/python</a> </p><p>例如：<a href="https://www.python.org/ftp/python/3.9.4/Python-3.9.4.tgz">https://www.python.org/ftp/python/3.9.4/Python-3.9.4.tgz</a>     </p><h4 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">yum <span class="hljs-keyword">install </span>zlib-devel <span class="hljs-keyword">bzip2-devel </span>openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc* make -y<br></code></pre></td></tr></table></figure><h4 id="SSL模块"><a href="#SSL模块" class="headerlink" title="SSL模块"></a>SSL模块</h4><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-comment">#修改Setup文件,在解压文件夹下的Modules文件夹下的Setup</span><br>vim Modules/Setup<br><span class="hljs-comment">#修改结果如下：去掉最后4行注释，得到如下的结果</span><br><span class="hljs-comment"># Socket module helper for socket(2)</span><br>_socket socketmodule.c timemodule.c<br><br><span class="hljs-comment"># Socket module helper for SSL support; you must comment out the other</span><br><span class="hljs-comment"># socket line above, and possibly edit the SSL variable:</span><br>SSL=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/ssl</span><br><span class="hljs-regexp">_ssl _ssl.c \</span><br><span class="hljs-regexp">-DUSE_SSL -I$(SSL)/include</span> -I$(SSL)/<span class="hljs-keyword">include</span>/openssl \<br>-L$(SSL)/<span class="hljs-class"><span class="hljs-keyword">lib</span> -<span class="hljs-title">lssl</span> -<span class="hljs-title">lcrypto</span></span><br></code></pre></td></tr></table></figure><h4 id="安装脚本"><a href="#安装脚本" class="headerlink" title="安装脚本"></a>安装脚本</h4><p><strong>自己修改压缩包存放目录和文件名</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-built_in">cd</span> /root<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;开始解压&#x27;</span><br>tar -zxvf Python-3.6.5.tgz<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;进入文件夹&#x27;</span><br><span class="hljs-built_in">cd</span> Python-3.6.5<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;创建安装目录&#x27;</span><br>mkdir /usr/<span class="hljs-built_in">local</span>/python3<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;指明安装路径&#x27;</span><br>./configure -prefix=/usr/<span class="hljs-built_in">local</span>/python3<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;编译安装&#x27;</span><br>make &amp;&amp; make install<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;为python3创建软连接&#x27;</span><br>ln -s /usr/<span class="hljs-built_in">local</span>/python3/bin/python3 /usr/bin/python3<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;为pip3创建软连接&#x27;</span><br>ln -s /usr/<span class="hljs-built_in">local</span>/python3/bin/pip3 /usr/bin/pip3<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;验证&#x27;</span><br>python3<br>pip3 -V <br></code></pre></td></tr></table></figure><p><strong>写完脚本记得添加执行权限</strong></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">chmod +<span class="hljs-keyword">x</span> xxxx.<span class="hljs-keyword">sh</span><br><span class="hljs-number">0</span> <span class="hljs-number">12</span> * * * <span class="hljs-keyword">python3</span> /home/<span class="hljs-keyword">python</span>/genshin.<span class="hljs-keyword">py</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>Python3</tag>
      
      <tag>ShellScript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2021/04/30/Minio/"/>
    <url>/2021/04/30/Minio/</url>
    
    <content type="html"><![CDATA[<hr><p>title: Minio<br>date: 2024-01-11 12:00:00<br>tags:</p><ul><li>Centos7</li><li>Minio</li></ul><hr><h4 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h4><p><strong>Centos7</strong></p><h4 id="安装Minio"><a href="#安装Minio" class="headerlink" title="安装Minio"></a>安装Minio</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">1</span>.下载<br>    wget https:<span class="hljs-regexp">//</span>dl.min.io<span class="hljs-regexp">/server/mi</span>nio<span class="hljs-regexp">/release/</span>linux-amd64/minio<br>    或<br>    curl https:<span class="hljs-regexp">//</span>dl.min.io<span class="hljs-regexp">/server/mi</span>nio<span class="hljs-regexp">/release/</span>linux-amd64/minio &gt; minio<br><span class="hljs-number">2</span>.添加执行权限<br>    chmod +x minio<br><span class="hljs-number">3</span>.创建存储目录<br>    mkdir <span class="hljs-regexp">/home/mi</span>nio/data<br><span class="hljs-number">4</span>.防火墙开启端口<br>    firewall-cmd --zone=public --add-port=<span class="hljs-number">9999</span>/tcp --permanent<br>    firewall-cmd --reload<br><span class="hljs-number">5</span>.运行（指定端口）---默认端口是<span class="hljs-number">9000</span><br>    nohup .<span class="hljs-regexp">/minio server --address 本机IP:9999 /</span>home<span class="hljs-regexp">/minio/</span>data<span class="hljs-regexp">/ &gt; /</span>home<span class="hljs-regexp">/minio/mi</span>nio.log <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> &amp;<br><span class="hljs-number">6</span>.默认端口启动<br>    nohup .<span class="hljs-regexp">/minio server /</span>home<span class="hljs-regexp">/minio/</span>data<span class="hljs-regexp">/ &gt; /</span>home<span class="hljs-regexp">/minio/mi</span>nio.log <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> &amp;<br><span class="hljs-number">7</span>.访问web管理界面<br>    IP:<span class="hljs-number">9999</span><br>    默认账号密码都是 minioadmin<br></code></pre></td></tr></table></figure><h4 id="新版本minio"><a href="#新版本minio" class="headerlink" title="新版本minio"></a>新版本minio</h4><ol><li>本体下载</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//</span>dl.minio.org.cn<span class="hljs-regexp">/server/mi</span>nio<span class="hljs-regexp">/release/</span>linux-amd64/minio<br></code></pre></td></tr></table></figure><ol start="2"><li>下载配置到 /etc/systemd/system/</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//</span>raw.githubusercontent.com<span class="hljs-regexp">/minio/mi</span>nio-service<span class="hljs-regexp">/master/</span>linux-systemd/minio.service<br>    删除文件里的 User/Group<br></code></pre></td></tr></table></figure><ol start="3"><li>vim /etc/default/minio</li></ol><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># 指定数据存储目录(注意这个目录要存在)</span><br><span class="hljs-attr">MINIO_VOLUMES</span>=<span class="hljs-string">&quot;/home/user01/minio/data&quot;</span><br><br><span class="hljs-comment"># 指定监听端口(也可以监听指定网卡，如 127.0.0.1:9199)</span><br><span class="hljs-attr">MINIO_OPTS</span>=<span class="hljs-string">&quot;--address :9000  --console-address :9001&quot;</span><br><br><span class="hljs-comment"># 账号</span><br><span class="hljs-attr">MINIO_ROOT_USER</span>=<span class="hljs-string">&quot;admin&quot;</span><br><br><span class="hljs-comment"># 密码</span><br><span class="hljs-attr">MINIO_ROOT_PASSWORD</span>=<span class="hljs-string">&quot;miniopwd&quot;</span><br><br><br><span class="hljs-comment"># Access key 建议与MINIO_ROOT_USER相同</span><br><span class="hljs-attr">MINIO_ACCESS_KEY</span>=<span class="hljs-string">&quot;admin&quot;</span><br><br><span class="hljs-comment"># Secret key 建议与MINIO_ROOT_PASSWORD相同</span><br><span class="hljs-attr">MINIO_SECRET_KEY</span>=<span class="hljs-string">&quot;miniopwd&quot;</span><br><br><span class="hljs-comment"># 区域值，这是完全自己写的，比如你愿意的话写“abcd”也行，但标准格式是“国家-区域-编号”，</span><br><span class="hljs-comment"># 如“中国-华北-1号”就可写成“cn-north-1”，又比如“美国-西部-2号”可写成“us-west-1”</span><br><span class="hljs-attr">MINIO_REGION</span>=<span class="hljs-string">&quot;cn-hanghzou-1&quot;</span><br><br><span class="hljs-comment"># 域名 没域名就写 IP:端口 端口为MINIO_OPTS里指定的</span><br><span class="hljs-comment">#MINIO_DOMAIN=192.168.31.91:9001</span><br></code></pre></td></tr></table></figure><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">systemctl</span> <span class="hljs-string">daemon-reload</span><br><span class="hljs-attr">systemctl</span> <span class="hljs-string">start minio</span><br><span class="hljs-attr">systemctl</span> <span class="hljs-string">status minio</span><br><span class="hljs-attr">systemctl</span> <span class="hljs-string">stop minio</span><br><br></code></pre></td></tr></table></figure><h4 id="安装MC"><a href="#安装MC" class="headerlink" title="安装MC"></a>安装MC</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-number">1</span>.下载<br>    wget https:<span class="hljs-regexp">//</span>dl.min.io<span class="hljs-regexp">/client/m</span>c<span class="hljs-regexp">/release/</span>linux-amd64/mc<br>    或<br>    curl https:<span class="hljs-regexp">//</span>dl.min.io<span class="hljs-regexp">/client/m</span>c<span class="hljs-regexp">/release/</span>linux-amd64/mc &gt; mc<br><span class="hljs-number">2</span>.添加执行权限<br>    chmod +x mc<br></code></pre></td></tr></table></figure><h4 id="给MC添加minio"><a href="#给MC添加minio" class="headerlink" title="给MC添加minio"></a>给MC添加minio</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">./mc <span class="hljs-built_in">config</span> host add minio http:<span class="hljs-comment">//本机IP:9999 minioadmin minioadmin</span><br></code></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/04/30/rBFEzbXKsPgUjy7.png" alt="image-20210430113608186"></p><h4 id="使用MC操作minio"><a href="#使用MC操作minio" class="headerlink" title="使用MC操作minio"></a>使用MC操作minio</h4><p>MinIO Client完全指南：<a href="http://docs.minio.org.cn/docs/master/minio-client-complete-guide">http://docs.minio.org.cn/docs/master/minio-client-complete-guide</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Apk反编译</title>
    <link href="/2021/01/19/Apk%E5%8F%8D%E7%BC%96%E8%AF%91/"/>
    <url>/2021/01/19/Apk%E5%8F%8D%E7%BC%96%E8%AF%91/</url>
    
    <content type="html"><![CDATA[<h4 id="1-工具准备"><a href="#1-工具准备" class="headerlink" title="1.工具准备"></a>1.工具准备</h4><p>apktool：<a href="https://ibotpeaches.github.io/Apktool/install/">https://ibotpeaches.github.io/Apktool/install/</a> </p><p>dex-tools：<a href="https://github.com/pxb1988/dex2jar">https://github.com/pxb1988/dex2jar</a></p><p>jadx-gui：<a href="https://github.com/skylot/jadx">https://github.com/skylot/jadx</a> </p><p>或者</p><p>jd-gui：<a href="http://java-decompiler.github.io/">http://java-decompiler.github.io/</a> </p><h4 id="2-使用"><a href="#2-使用" class="headerlink" title="2.使用"></a>2.使用</h4><p>1、将apktool.bat和apktool.jar,然后把这两个工具放到C:\Windows底下</p><p>2、命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">apktool d D:\test\Andorid\demo.apk -o D:\test\Andorid\demo -f<br></code></pre></td></tr></table></figure><p>​    将apk反编译，目标目录为 -o 后面的参数 ，-f 为覆盖</p><p>3、使用压缩软件将apk解压，找到classes.dex</p><p>4、解压dex-tools-2.0.zip到任意目录，将classes.dex复制到该解压目录，使用命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">d2j-dex2jar.bat classes.dex<br></code></pre></td></tr></table></figure><p>​    会得到一个jar包：classes-dex2jar.jar</p><p>5、双击jadx-gui-1.2.0-no-jre-win.exe，打开上面得到的jar包，即可看到源代码</p>]]></content>
    
    
    
    <tags>
      
      <tag>Android</tag>
      
      <tag>Apk</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker-Compose</title>
    <link href="/2021/01/18/Docker-Compose/"/>
    <url>/2021/01/18/Docker-Compose/</url>
    
    <content type="html"><![CDATA[<h4 id="1-下载"><a href="#1-下载" class="headerlink" title="1.下载"></a>1.下载</h4><p><a href="https://github.com/docker/compose">https://github.com/docker/compose</a></p><h4 id="2-安装"><a href="#2-安装" class="headerlink" title="2.安装"></a>2.安装</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo chmod +x /usr/local/bin/docker-compose<br></code></pre></td></tr></table></figure><h4 id="4-编写docker-compose-yml"><a href="#4-编写docker-compose-yml" class="headerlink" title="4.编写docker-compose.yml"></a>4.编写docker-compose.yml</h4><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">version:</span> <span class="hljs-string">&#x27;3&#x27;</span><br><br><span class="hljs-symbol">services:</span><br>  docker-test:<br><span class="hljs-symbol">    image:</span> docker-test:latest <span class="hljs-meta"># 指定基础镜像</span><br><span class="hljs-symbol">    container_name:</span> docker-testr <span class="hljs-meta"># 容器名称</span><br><span class="hljs-symbol">    volumes:</span><br>      - <span class="hljs-string">&quot;/docker/log:/log&quot;</span> <span class="hljs-meta">#日志挂载</span><br><span class="hljs-symbol">    command:</span><br>      - <span class="hljs-string">&quot;--mysqlurl=192.168.33.10&quot;</span><br>      - <span class="hljs-string">&quot;--username=root&quot;</span><br>      - <span class="hljs-string">&quot;--password=root&quot;</span><br><span class="hljs-symbol">    ports:</span><br>      - <span class="hljs-number">8001</span>:<span class="hljs-number">8001</span> <span class="hljs-meta"># 端口映射</span><br><span class="hljs-symbol">  mysql:</span><br><span class="hljs-symbol">    image:</span> mysql:<span class="hljs-number">5.7</span><span class="hljs-number">.24</span><br><span class="hljs-symbol">    container_name:</span> mysql<br><span class="hljs-symbol">    environment:</span><br><span class="hljs-symbol">      MYSQL_ROOT_PASSWORD:</span> <span class="hljs-number">123456</span><br><span class="hljs-symbol">    ports:</span><br>      - <span class="hljs-number">3306</span>:<span class="hljs-number">3306</span><br><span class="hljs-symbol">    volumes:</span><br>      - <span class="hljs-meta-keyword">/febs/</span>mysql/data:<span class="hljs-meta-keyword">/var/</span>lib/mysql <span class="hljs-meta">#挂载 MySQL数据</span><br><span class="hljs-symbol">  redis:</span><br><span class="hljs-symbol">    image:</span> redis:<span class="hljs-number">4.0</span><span class="hljs-number">.14</span><br><span class="hljs-symbol">    container_name:</span> redis<br><span class="hljs-symbol">    command:</span> redis-server <span class="hljs-meta-keyword">/usr/</span>local<span class="hljs-meta-keyword">/etc/</span>redis/redis.conf --appendonly yes<br><span class="hljs-symbol">    volumes:</span><br>      - <span class="hljs-meta-keyword">/febs/</span>redis/data:/data <span class="hljs-meta">#挂载 Redis数据</span><br>      - <span class="hljs-meta-keyword">/febs/</span>redis<span class="hljs-meta-keyword">/conf/</span>redis.conf:<span class="hljs-meta-keyword">/usr/</span>local<span class="hljs-meta-keyword">/etc/</span>redis/redis.conf <span class="hljs-meta">#挂载 Redis配置</span><br><span class="hljs-symbol">    ports:</span><br>      - <span class="hljs-number">6379</span>:<span class="hljs-number">6379</span><br></code></pre></td></tr></table></figure><p><strong>挂载/映射—&gt;   宿主机:docker镜像</strong></p><h4 id="5-启动镜像"><a href="#5-启动镜像" class="headerlink" title="5.启动镜像"></a>5.启动镜像</h4><p>在<code>docker-compose.yml</code>目录下运行<code>docker-compose up -d</code> 后台启动服务</p><h4 id="6-停止运行"><a href="#6-停止运行" class="headerlink" title="6.停止运行"></a>6.停止运行</h4><p>在<code>docker-compose.yml</code>目录下运行<code>docker-compose stop</code></p>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>收集的一些博客</title>
    <link href="/2020/12/24/SomeBlogs/"/>
    <url>/2020/12/24/SomeBlogs/</url>
    
    <content type="html"><![CDATA[<h4 id="收集的一些博客"><a href="#收集的一些博客" class="headerlink" title="收集的一些博客"></a>收集的一些博客</h4><p>canal同步mysql数据到es、mysql：<a href="https://blog.csdn.net/tuesdayma/article/details/103294448">https://blog.csdn.net/tuesdayma/article/details/103294448</a></p><p>Nginx upstream配置说明负载均衡：<a href="https://www.jianshu.com/p/50dfb0d69983">https://www.jianshu.com/p/50dfb0d69983</a></p><p>官方Centos7安装ffmpeg：<a href="https://trac.ffmpeg.org/wiki/CompilationGuide/Centos">https://trac.ffmpeg.org/wiki/CompilationGuide/Centos</a></p><p>Sentinel-Nacos：<a href="https://www.sonake.com/2019/12/16/Sentinel-Nacos%E5%AE%9E%E7%8E%B0%E8%A7%84%E5%88%99%E6%8C%81%E4%B9%85%E5%8C%96/">https://www.sonake.com/2019/12/16/Sentinel-Nacos%E5%AE%9E%E7%8E%B0%E8%A7%84%E5%88%99%E6%8C%81%E4%B9%85%E5%8C%96/</a></p><p>Java证书工具keytool用法总结：<a href="https://blog.csdn.net/w47_csdn/article/details/87564029">https://blog.csdn.net/w47_csdn/article/details/87564029</a></p><p>Java8 Stream_1：<a href="https://blog.csdn.net/mu_wind/article/details/109516995">https://blog.csdn.net/mu_wind/article/details/109516995</a></p><p>Java8 Stream_2：<a href="https://blog.csdn.net/qq_28410283/article/details/80783946">https://blog.csdn.net/qq_28410283/article/details/80783946</a></p><p>Selenium常用API：<a href="https://blog.csdn.net/qq_22003641/article/details/79137327">https://blog.csdn.net/qq_22003641/article/details/79137327</a></p><p>使用JDK自带的JVM监控器 - Java VisualVM：<a href="https://blog.csdn.net/u011391839/article/details/76984995">https://blog.csdn.net/u011391839/article/details/76984995</a></p><p>Centos7安装Python3：<a href="https://www.jianshu.com/p/e191f9dc1186">https://www.jianshu.com/p/e191f9dc1186</a></p><p>Anaconda清华镜像源的使用及安装P：<a href="https://blog.csdn.net/WannaSeaU/article/details/88427010">https://blog.csdn.net/WannaSeaU/article/details/88427010</a></p><p>SpringCloud面试题（总结最全面：<a href="https://juejin.cn/post/6844904125717544973">https://juejin.cn/post/6844904125717544973</a></p><p>通过父级id获取到其下所有子级（无穷级）——Mysql函数实现：<a href="https://my.oschina.net/u/4293890/blog/3813827">https://my.oschina.net/u/4293890/blog/3813827</a></p><p>MyCat 从入门到放弃：<a href="https://blog.csdn.net/qq_41143671/article/details/112960048">https://blog.csdn.net/qq_41143671/article/details/112960048</a></p><p>centos7 安装puppeteer：<a href="https://segmentfault.com/a/1190000011382062">https://segmentfault.com/a/1190000011382062</a></p><p>Maven Helper 安装使用：<a href="https://blog.csdn.net/dhfzhishi/article/details/81952760">https://blog.csdn.net/dhfzhishi/article/details/81952760</a></p><p><strong>Termux 高级终端安装使用配置教程</strong>：<a href="https://www.sqlsec.com/2018/05/termux.html">https://www.sqlsec.com/2018/05/termux.html</a></p><p><strong>Termux 安装MongoDB 完美运行</strong>：<a href="https://blog.csdn.net/LiDongLai00/article/details/115300117">https://blog.csdn.net/LiDongLai00/article/details/115300117</a></p><p>Ubuntu安装ffmpeg 教程：<a href="https://blog.csdn.net/NNU_CJ/article/details/107088747">https://blog.csdn.net/NNU_CJ/article/details/107088747</a></p><p>修改字节码文件（.class）: <a href="https://blog.csdn.net/xxw19950701/article/details/115724571">https://blog.csdn.net/xxw19950701/article/details/115724571</a></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment">#依赖库</span><br><span class="hljs-attribute">yum</span> install pango.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> libXcomposite.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> libXcursor.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> libXdamage.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> libXext.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> libXi.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> libXtst.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> cups-libs.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> libXScrnSaver.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> libXrandr.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> GConf<span class="hljs-number">2</span>.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> alsa-lib.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> atk.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> gtk<span class="hljs-number">3</span>.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> -y<br><br><span class="hljs-comment">#字体</span><br><span class="hljs-attribute">yum</span> install ipa-gothic-fonts xorg-x<span class="hljs-number">11</span>-fonts-<span class="hljs-number">100</span>dpi xorg-x<span class="hljs-number">11</span>-fonts-<span class="hljs-number">75</span>dpi xorg-x<span class="hljs-number">11</span>-utils xorg-x<span class="hljs-number">11</span>-fonts-cyrillic xorg-x<span class="hljs-number">11</span>-fonts-Type<span class="hljs-number">1</span> xorg-x<span class="hljs-number">11</span>-fonts-misc -y<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>blogs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>OpenFeign</title>
    <link href="/2020/12/18/Spring%20Cloud%20OpenFeign/"/>
    <url>/2020/12/18/Spring%20Cloud%20OpenFeign/</url>
    
    <content type="html"><![CDATA[<h4 id="OpenFeign简介"><a href="#OpenFeign简介" class="headerlink" title="OpenFeign简介"></a>OpenFeign简介</h4><p>​        OpenFeign是springcloud在Feign的基础上支持了SpringMVC的注解，如@RequestMapping等等。OpenFeign的@FeignClient可以解析SpringMVC的@RequestMapping注解下的接口，并通过动态代理的方式产生实现类，实现类中做负载均衡并调用其他服务。</p><h5 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h5><p>​        在注册中心这个微服务中引入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>​        在application.yml中添加配置</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment">#设置feign 客户端超时时间（openFeign默认支持ribbon）</span><br><span class="hljs-attr">ribbon:</span><br>  <span class="hljs-comment">#指的是建立连接所用的时间，适用于网络状况正常的情况下，两端连接所用的时间 单位：毫秒</span><br>  <span class="hljs-attr">ReadTimeout:</span> <span class="hljs-number">5000</span><br>  <span class="hljs-comment">#指的是建立连接后从服务器读取到可用资源所用的时间,单位：毫秒</span><br>  <span class="hljs-attr">ConnectTimeout:</span> <span class="hljs-number">5000</span><br>  <br> <span class="hljs-comment"># 设置回退生效</span><br><span class="hljs-attr">feign:</span><br>  <span class="hljs-attr">hystrix:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <br><span class="hljs-attr">hystrix:</span><br>  <span class="hljs-attr">command:</span><br>    <span class="hljs-attr">default:</span> <span class="hljs-comment">#也可以针对多个服务</span><br>      <span class="hljs-attr">execution:</span><br>        <span class="hljs-attr">isolation:</span><br>          <span class="hljs-attr">thread:</span><br>            <span class="hljs-attr">timeoutInMilliseconds:</span> <span class="hljs-number">5000</span> <span class="hljs-comment"># 设置hystrix的超时时间为5s</span><br></code></pre></td></tr></table></figure><p>新建一个接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FeignClient(value = &quot;consul-provider-payment&quot;, contextId = &quot;helloServiceClient&quot;, fallbackFactory = HelloServiceFallback.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IHelloService</span> </span>&#123;<br><br>    <span class="hljs-meta">@GetMapping(&quot;hello&quot;)</span><br>    <span class="hljs-function">String <span class="hljs-title">hello</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(&quot;name&quot;)</span> String name)</span></span>;<br><br>    <span class="hljs-meta">@GetMapping(&quot;user&quot;)</span><br>    <span class="hljs-function">String <span class="hljs-title">info</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>1.<code>value</code>指定资源服务的名称，通常为资源服务配置里 <code>spring.application.name</code>的值;</p><p>2.<code>contextId</code>指定这个Feign Client的别名，当我们定义了多个Feign Client并且<code>value</code>值相同（即调用同一个服务）的时候，需要手动通过<code>contextId</code>设置别名，否则程序将抛出异常；`</p><p>3.<code>fallbackFactory</code>指定了回退方法，当我们调用远程服务出现异常时，就会调用这个回退方法。<code>fallback</code>也可以指定回退方法，但<code>fallbackFactory</code>指定的回退方法里可以通过<code>Throwable</code>对象打印出异常日志，方便分析问题</p><p>在接口下新建一个fallback包，进入，然后在该包下新建一个HelloServiceFallback</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloServiceFallback</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">FallbackFactory</span>&lt;<span class="hljs-title">IHelloService</span>&gt; </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> IHelloService <span class="hljs-title">create</span><span class="hljs-params">(Throwable throwable)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> IHelloService() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">hello</span><span class="hljs-params">(String name)</span> </span>&#123;<br>                log.error(<span class="hljs-string">&quot;调用server-system-hello服务出错&quot;</span>, throwable);<br>                <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;调用出错&quot;</span>;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">info</span><span class="hljs-params">()</span> </span>&#123;<br>                log.error(<span class="hljs-string">&quot;调用server-system-info服务出错&quot;</span>, throwable);<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>            &#125;<br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>最后在启动类上添加注解：**@EnableFeignClients**</p>]]></content>
    
    
    
    <tags>
      
      <tag>Spring Cloud</tag>
      
      <tag>OpenFeign</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Cloud 服务注册中心</title>
    <link href="/2020/12/18/Spring%20Cloud%20%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/"/>
    <url>/2020/12/18/Spring%20Cloud%20%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h4 id="什么是服务注册中心"><a href="#什么是服务注册中心" class="headerlink" title="什么是服务注册中心"></a>什么是服务注册中心</h4><p>​        服务注册中心就是，在微服务体系中，其中有一个服务是用来集中管理这些微服务实例，微服务间的调用只需要知道对方的服务名，而无需关注具体的IP和端口，便于微服务架构的拓展和维护。</p><h4 id="CAP理论"><a href="#CAP理论" class="headerlink" title="CAP理论"></a>CAP理论</h4><p>​        CAP理论是分布式架构中重要理论，CAP不能都取，只能取其二</p><blockquote><ul><li>一致性(Consistency) (所有节点在同一时间具有相同的数据)</li><li>可用性(Availability) (保证每个请求不管成功或者失败都有响应)</li><li>分区容错性(Partition tolerance) (系统中任意信息的丢失或失败不会影响系统的继续运作)</li></ul></blockquote><h4 id="常用的注册中心"><a href="#常用的注册中心" class="headerlink" title="常用的注册中心"></a>常用的注册中心</h4><blockquote><ul><li>Eureka</li><li>Zookeeper</li><li>Consul</li><li>Nacos</li></ul></blockquote><h4 id="Eureka-gt-AP"><a href="#Eureka-gt-AP" class="headerlink" title="Eureka &gt; AP"></a>Eureka &gt; AP</h4><p>​        Eureka遵信AP原则，即高可用以及分隔容忍性，最终保证一致性，在Eureka Server集群中，由于其采用的是p2p对等通信，互相注册的方式，去除了中心化，所以只要还存在其中一个服务，服务就可以正常注册和发现，当宕机的Eureka Server可用时，就会请求复制操作，同步当前可用Eureka Server所有的服务节点</p><h5 id="使用方式："><a href="#使用方式：" class="headerlink" title="使用方式："></a>使用方式：</h5><h6 id="Eureka-Server"><a href="#Eureka-Server" class="headerlink" title="Eureka Server"></a>Eureka Server</h6><p>​        在注册中心这个微服务中引入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>​        在application.yml中添加配置</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">www.eureka7000.com</span> <span class="hljs-comment">#eureka服务端的应用实例主机名</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-comment">#false表示不向注册中心注册自己</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-comment">#false表示自己端就是注册中心，我的职责就是维护服务实例，并不需要去检索服务</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-comment">#设置与Eureka Server交互的地址查询服务和注册服务都需要依赖这个地址</span><br>      <span class="hljs-comment">#集群指向其它eureka</span><br><span class="hljs-comment">#      defaultZone: http://www.eureka7001.com:7001/eureka/</span><br>      <span class="hljs-comment">#单机就是7000自己</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://www.eureka7000.com:7000/eureka/</span><br>  <span class="hljs-attr">server:</span><br>    <span class="hljs-comment"># false 关闭自我保护机制，保证不可用服务呗及时剔除(不推荐)</span><br><span class="hljs-comment">#    enable-self-preservation: false</span><br>    <span class="hljs-comment"># Eureka Server 清理无效节点的时间间隔（单位：毫秒）</span><br><span class="hljs-comment">#    eviction-interval-timer-in-ms: 2000</span><br></code></pre></td></tr></table></figure><p>​        最后在该服务的启动类上加上注解：**@EnableEurekaServer**</p><p>集群方式启动：可以看到副本列表中有另一个Eureka Server的实例主机名</p><p><img src="https://i.loli.net/2020/12/18/bzIGvP38Wwgd5SO.png" alt="image-20201218095906560"></p><p><img src="https://i.loli.net/2020/12/18/ALwhEKFaOmxZNID.png" alt="image-20201218095933475"></p><h6 id="Eureka-Client"><a href="#Eureka-Client" class="headerlink" title="Eureka Client"></a><strong>Eureka Client</strong></h6><p>​        在资源微服务中引入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>​        在application.yml中添加配置</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-comment"># 隐藏域名</span><br>    <span class="hljs-attr">instance-id:</span> <span class="hljs-string">payment8001</span><br>    <span class="hljs-comment"># 左下角访问路径可以显示IP地址</span><br>    <span class="hljs-attr">prefer-ip-address:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-comment"># 向Eureka 服务端发送心跳的间隔时间，单位为秒，用于服务续约。这里配置为20秒，即每隔20秒向Eureka Server发送心跳，表明当前服务没有宕机；</span><br><span class="hljs-comment">#    lease-renewal-interval-in-seconds: 20</span><br>    <span class="hljs-comment"># Eureka服务端在收到最后一次心跳后等待时间上限，（秒），默认90秒，超时剔除服务</span><br><span class="hljs-comment">#    lease-expiration-duration-in-seconds: 2</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-comment">#表示是否将自己注册进Eureka Server默认为true</span><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-comment">#是否从Eureka Server抓取已有的注册信息，默认为true。单节点无所谓，集群必须设置为true才能配合ribbon使用负载均衡</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">service-url:</span><br>    <span class="hljs-comment"># 集群</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://www.eureka7001.com:7001/eureka,http://www.eureka7000.com:7000/eureka</span><br>    <span class="hljs-comment"># 单节点</span><br><span class="hljs-comment">#      defaultZone: http://www.eureka7000.com:7000/eureka</span><br></code></pre></td></tr></table></figure><p>​    最后在该服务的启动类上加上注解：**@EnableEurekaClient**</p><p>​    可以看出，在使用了eureka.instance.instance-id之后隐藏了服务id以及端口</p><p><img src="https://i.loli.net/2020/12/18/flqzcHDsYZEWNpX.png" alt="image-20201218102313617"></p><p><img src="https://i.loli.net/2020/12/18/gYrUD3p5xMw4lHk.png" alt="image-20201218102421648"></p><p>​        当鼠标悬浮到“payment8002”上时，浏览器左下角显示IP地址</p><p><img src="https://i.loli.net/2020/12/18/rAsZjkCJ3e4qMWm.png" alt="image-20201218102707248"></p><h4 id="Zookeeper-gt-CP"><a href="#Zookeeper-gt-CP" class="headerlink" title="Zookeeper &gt; CP"></a>Zookeeper &gt; CP</h4><p>​    Zookeeper从设计模式角度来理解：是一个基于观察者模式设计（一个领导者(Leader)，多个跟随者(Follower)组成的集群）的分布式服务管理框架，它负责存储和管理大家都关心的数据，然后接受观察者的注册，一旦这些数据的状态发生变化，Zookeeper就将负责通知已经在Zookeeper上注册的那些观察者做出相应的反应。</p><p>​    Zookeeper遵循CP原则，保证容错和数据实时一致性，从 Zookeeper 的实际应用情况来看，在使用 Zookeeper 获取服务列表时，如果此时的 Zookeeper 集群中的 Leader 宕机了，该集群就要进行 Leader 的选举，又或者 Zookeeper 集群中半数以上服务器节点不可用（例如有三个节点，如果节点一检测到节点三挂了 ，节点二也检测到节点三挂了，那这个节点才算是真的挂了），那么将无法处理该请求。所以说，Zookeeper 不能保证服务可用性。</p><p>​        当然，在大多数分布式环境中，尤其是涉及到数据存储的场景，数据一致性应该是首先被保证的，这也是 Zookeeper 设计紧遵CP原则的另一个原因。</p><h5 id="使用方式：-1"><a href="#使用方式：-1" class="headerlink" title="使用方式："></a>使用方式：</h5><h6 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h6><p>​        首先Zookeeper注册中心需要单独下载</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">官网：https:<span class="hljs-regexp">//</span>zookeeper.apache.org<span class="hljs-regexp">/ 或 https:/</span><span class="hljs-regexp">/mirrors.tuna.tsinghua.edu.cn/</span>apache<span class="hljs-regexp">/zookeeper/</span><br></code></pre></td></tr></table></figure><p>​        解压并进入conf文件夹，修改配置文件，主要时修改dataDir位置对应的目录，<strong>目录没有的先创建</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"># 复制一份配置文件<br><span class="hljs-selector-tag">cp</span> <span class="hljs-selector-tag">zoo_sample</span><span class="hljs-selector-class">.cfg</span> <span class="hljs-selector-tag">zoo</span><span class="hljs-selector-class">.cfg</span><br># 编辑<span class="hljs-selector-tag">zoo</span><span class="hljs-selector-class">.cfg</span><br><span class="hljs-selector-tag">vim</span> <span class="hljs-selector-tag">zoo</span><span class="hljs-selector-class">.cfg</span><br></code></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/12/18/IiCh6VBKZxzmPtR.png" alt="image-20201218105618926"></p><p>​        修改好配置文件后，进入到bin目录</p><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vala"><span class="hljs-meta"># 启动zk</span><br>./zkServer.sh start<br><span class="hljs-meta"># 开启端口2181</span><br></code></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/12/18/5JaA3siTq6bfzDW.png" alt="image-20201218105800886"></p><h6 id="服务Client"><a href="#服务Client" class="headerlink" title="服务Client"></a>服务Client</h6><p>​        在资源微服务中引入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-zookeeper-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>     <span class="hljs-comment">&lt;!--先排除自带的zookeeper3.5.3--&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>             <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>             <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>         <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--添加zookeeper3.4.14版本--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.14<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-log4j12<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>​        在application.yml中添加配置</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">cloud-consumer-order</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">zookeeper:</span><br>      <span class="hljs-attr">connect-string:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.186</span><span class="hljs-number">.140</span><span class="hljs-string">:2181</span><br>      <span class="hljs-attr">discovery:</span><br>        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>​        最后在启动类添加注解：**@EnableDiscoveryClient**</p><p>​        启动服务、执行命令./zkCli.sh进入zk客户端，执行 ls /services，查看注册进来的服务。</p><p><img src="https://i.loli.net/2020/12/18/EBXknhrN5ZLGbo2.png" alt="image-20201218112909638"></p><h4 id="Consul-gt-CP"><a href="#Consul-gt-CP" class="headerlink" title="Consul &gt; CP"></a>Consul &gt; CP</h4><p>​        Consul遵循CP原则，保证了强一致性和分区容错性，且使用的是Raft算法，比zookeeper使用的Paxos算法更加简单。虽然保证了强一致性，但是可用性就相应下降了，例如服务注册的时间会稍长一些，因为 Consul 的 raft 协议要求必须过半数的节点都写入成功才认为注册成功 ；在leader挂掉了之后，重新选举出leader之前会导致Consul 服务不可用</p><h5 id="使用方式：-2"><a href="#使用方式：-2" class="headerlink" title="使用方式："></a>使用方式：</h5><h6 id="Server-1"><a href="#Server-1" class="headerlink" title="Server"></a>Server</h6><p>​        <strong>Consul官网：</strong><a href="https://www.consul.io/intro/index.html%EF%BC%8C%E4%B8%8B%E8%BD%BD%E4%B8%80%E4%B8%AA%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6">https://www.consul.io/intro/index.html，下载一个可执行文件</a></p><p>​        下载完成后解压</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"># 可视化界面启动，后台运行，并把日志输出到log.<span class="hljs-keyword">out</span><br>nohup ./consul agent -dev -client <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span> -ui &gt; log.<span class="hljs-keyword">out</span> &amp;<br></code></pre></td></tr></table></figure><p>​        访问 IP:8500</p><p><img src="https://i.loli.net/2020/12/18/jGC3fybYMao8QJ7.png" alt="image-20201218132156223"></p><h6 id="服务Client-1"><a href="#服务Client-1" class="headerlink" title="服务Client"></a>服务Client</h6><p>​    在资源微服务中引入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-consul-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>​        在application.yml中添加配置</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">cloud-consumer-order</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">consul:</span><br>      <span class="hljs-attr">host:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.186</span><span class="hljs-number">.140</span><br>      <span class="hljs-attr">port:</span> <span class="hljs-number">8500</span><br>      <span class="hljs-attr">discovery:</span><br>        <span class="hljs-attr">service-name:</span> <span class="hljs-string">$&#123;spring.application.name&#125;</span><br></code></pre></td></tr></table></figure><p>​        最后在启动类添加注解：**@EnableDiscoveryClient**</p><p>启动服务，刷新页面，可以看到服务已经注册进来了</p><p><img src="https://i.loli.net/2020/12/18/EDCSLbK5kQ4wAhc.png" alt="image-20201218132549369"></p><p>点击进去可以看到该服务的状态以及信息</p><p><img src="https://i.loli.net/2020/12/18/FKI8orfdjqUtLi3.png" alt="image-20201218132723838"></p><p><img src="https://i.loli.net/2020/12/18/GP2tobIJS9NcM17.png" alt="image-20201218132747412"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Spring Cloud</tag>
      
      <tag>服务注册与发现</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>FFmpeg</title>
    <link href="/2020/11/30/FFmpeg-ldl/"/>
    <url>/2020/11/30/FFmpeg-ldl/</url>
    
    <content type="html"><![CDATA[<h1 id="FFmpeg"><a href="#FFmpeg" class="headerlink" title="FFmpeg"></a>FFmpeg</h1><h3 id="什么是FFmpeg"><a href="#什么是FFmpeg" class="headerlink" title="什么是FFmpeg?"></a>什么是FFmpeg?</h3><p>[^fast forward moving picture expert group 动态图像专家组]: </p><ul><li><p>简介：</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">FFmpeg是一套可以用来记录、转换数字音频、视频，并能将其转化为流的开源计算机程序,提供了音视频的编码，解码，转码，封装，解封装，流，滤镜，播放等功能。采用LGPL或GPL许可证。它提供了录制、转换以及流化音视频的完整解决方案。它几乎支持所有的音视频格式，不管是标准委员会，社区，还是公司设计的。它是高度可移植，跨平台的：可以在Linux, Mac OS X, Microsoft Windows, <span class="hljs-keyword">the</span> BSDs, Solaris等系统上，在各种不同的编译环境，机器架构，配置下编译，运行，并通过测试<br></code></pre></td></tr></table></figure></li><li><p>GPL协议、LGPL协议与BSD协议的法律区别：</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs armasm">简而言之，GPL协议就是一个开放源代码协议，软件的初始开发者使用了GPL协议并公开软件的源程序后，后续使用该软件源程序开发软件者亦应当根据GPL协议把自己编写的源程序进行公开。GPL协议要求的关键在于开放源程序，但并不排斥软件作者向用户收费。虽然如此，很多大公司对GPL协议还是又爱又恨，爱的是这个协议项下的软件历经众多程序员千锤百炼的修改，已经非常成熟完善，恨的是必须开放自己后续的源程序，导致竞争对手也可以根据自己修改的源程序开发竞争产品。<br>正因大公司对GPL协议在商业上存在顾虑，因此，另两种协议被采用的更多，第一种是LGPL（亦称GPL <span class="hljs-built_in">V2</span>）协议，可以翻译为更宽松的GPL协议。与GPL协议的区别为，后者如果只是对LGPL软件的程序库的程序进行调用而不是包含其源代码时，相关的源程序无需开源。调用和包含的区别类似在互联网网网页上对他人网页内容的引用：如果把他人的内容全部或部分复制到自己的网页上，就类似包含，如果只是贴一个他人网页的网址链接而不引用内容，就类似调用。有了这个协议，很多大公司就可以把很多自己后续开发内容的源程序隐藏起来。<br>第二种是BSD协议（类似的还有MIT协议）。BSD协议鼓励软件的作者公开自己后续开发的源代码，但不强求。在BSD协议项下开发的软件，原始的源程序是开放源代码的，但使用者修改以后，可以自行选择发布源程序或者二进制程序（即目标程序），当然，使用者有义务把自己原来使用的源程序与BSD协议在软件对外发布时一并发布。因为比较灵活，所以BSD深受大公司的欢迎。<br></code></pre></td></tr></table></figure></li><li><p>FFmpeg影响范围：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">因为FFMPEG本身是开源项目，并且在LGPL/GPL协议下发布的任何人都可以自由使用，但必须严格遵守LGPL/GPL协议，其被很多开源的项目或者非开源的项目所使用：<br><span class="hljs-number">1.</span> FMPEG作为内核视频播放器：<br>ijkplayer，VLC，Mplayer，ffplay，暴风影音，KMPlayer，QQ影音<br><span class="hljs-number">2.</span> FFMPEG作为内核的转码工具：<br>ffmpeg，格式工厂<br><span class="hljs-number">3.</span> FFMPEG作为内核的Directshow Filter：<br>fdshow，lav filters<br><span class="hljs-number">4.</span> 其他知名软件：<br>微信，钉钉，Google Chrome        <br></code></pre></td></tr></table></figure></li></ul><h3 id="FFmpeg项目组成"><a href="#FFmpeg项目组成" class="headerlink" title="FFmpeg项目组成"></a>FFmpeg项目组成</h3><p>FFmpeg框架的基本组成包含AVFormat、AVCodec、AVFilter、AVDevice、AVUtils、postproc、swresample、swscale  8个模块库</p><p><img src="https://upload-images.jianshu.io/upload_images/5810867-19297a539d20b492.png" alt="img"></p><ul><li><p>libavformat：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">用于各种音视频封装格式的生成和解析，包括获取解码所需信息以生成解码上下文结构和读取音视频帧等功能，包含demuxers和muxer库<br></code></pre></td></tr></table></figure></li><li><p>libavcodec：</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">用于各种类型声音/图像编解码。该库是音视频编解码核心，实现了市面上可见的绝大部分解码器的功能， liba<span class="hljs-attr">vcodec 库被其他各大解码器 ffdshow， Mplayer 等所包含或应用。但是有一些Codec是具备自己的License的，FFmpeg是不会默认添加像libx264</span>、FDK-AAC、lame等库的，但是FFmpeg就像一个平台一样，可以将其他的第三方的Codec以插件的方式添加进来，然后为开发者提供统一的接口<br></code></pre></td></tr></table></figure></li><li><p>libavdevice: </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">输入输出设备库，比如，需要编译出播放声音或者视频的工具ffplay，就需要确保该模块是打开的，同时也需要libSDL的预先编译，因为该设备模块播放声音与播放视频使用的都是libSDL库<br></code></pre></td></tr></table></figure></li><li><p>libavfilter:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">音视频滤镜库，该模块提供了包括音频特效和视频特效的处理，如宽高比 裁剪 格式化 非格式化 伸缩。在使用FFmpeg的API进行编解码的过程中，直接使用该模块为音视频数据做特效处理是非常方便同时也非常高效的一种方式<br></code></pre></td></tr></table></figure></li><li><p>libavutil：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">包含一些公共的工具函数的使用库，包括算数运算 字符操作<br></code></pre></td></tr></table></figure></li><li><p>libswscale：</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs smali">原始视频格式转换） 用于视频场景比例缩放、色彩映射转换；图像颜色空间或格式转换，如 rgb565、rgb888 等与 yuv420 等之间转换<br></code></pre></td></tr></table></figure></li><li><p>libswresample:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">该模块可用于音频重采样，可以对数字音频进行声道数、数据格式、采样率等多种基本信息的转换<br></code></pre></td></tr></table></figure></li><li><p>libpostproc：</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">该模块可用于进行后期处理，当我们使用AVFilter的时 候需要打开该模块的开关，因为<span class="hljs-built_in">Filter</span>中会使用到该模块的一些基础函数<br></code></pre></td></tr></table></figure><p>编译完成以后主要生成了三个应用程序</p></li><li><p>ffmpeg：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">是一个命令行工具，可用于格式转换、解码或电视卡即时编码等<br></code></pre></td></tr></table></figure></li><li><p>ffsever：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">一个HTTP 多媒体即时广播串流服务器<br></code></pre></td></tr></table></figure></li><li><p>ffplay：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">是一个简单的播放器，使用ffmpeg库解析和解码，通过SDL显示<br></code></pre></td></tr></table></figure></li><li><p>ffprobe</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">主要用来查看多媒体文件的信息<br></code></pre></td></tr></table></figure></li></ul><h3 id="FFmpeg处理流程"><a href="#FFmpeg处理流程" class="headerlink" title="FFmpeg处理流程"></a>FFmpeg处理流程</h3><p>容器(Container)<br>容器就是一种文件格式，比如flv，mkv等。包含下面5种流以及文件头信息</p><p>流(Stream)<br>是一种视频数据信息的传输方式，5种流：音频，视频，字幕，附件，数据</p><p>帧(Frame)<br>帧代表一幅静止的图像，分为I帧，P帧，B帧</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-keyword">I</span>帧<br><br><span class="hljs-keyword">I</span>帧又称帧内编码帧，是一种自带全部信息的独立帧，无需参考其他图像便可独立进行解码，即全部为帧内编码。可以简单理解为一张静态画面。视频序列中的第一个帧始终都是<span class="hljs-keyword">I</span>帧，因为它是关键帧。如果传输过程中<span class="hljs-keyword">I</span>真丢失，画面最直接的影响就是会卡顿，因为后面的帧都无法正确解码，只能等待下一个GOP。<br><br>IDR帧<br><br>即时解码刷新，其实就是<span class="hljs-keyword">I</span>帧，不过他是第一个<span class="hljs-keyword">I</span>帧，或者是强制<span class="hljs-keyword">I</span>帧，它的作用就是立即刷新，使错误不至于传播，从IDR开始，重新算一个新的序列开始编码。IDR会导致DPB（参考序列表）清空，而<span class="hljs-keyword">I</span>帧不会，IDR帧一定是<span class="hljs-keyword">I</span>帧，但是<span class="hljs-keyword">I</span>帧不一定。一个图像序列中可以有很多<span class="hljs-keyword">I</span>帧，一个<span class="hljs-keyword">I</span>帧后的图像可以引用<span class="hljs-keyword">I</span>帧之间的图像做运动参考，但是对于IDR帧来说，IDR帧后的图像不能引用IDR之前的帧内容，因为从IDR帧相当于重新开始。<br><br>P帧<br><br>P帧又称帧间预测编码帧，需要参考前面的<span class="hljs-keyword">I</span>帧才能进行编码。表示的是当前帧画面与前一帧（前一帧可能是<span class="hljs-keyword">I</span>帧也可能是P帧）的差别。解码时需要用之前缓存的画面叠加上本帧定义的差别(采用了预测编码)，生成最终画面。与<span class="hljs-keyword">I</span>帧相比，P帧通常占用更少的数据位，但不足是，由于P帧对前面的P和<span class="hljs-keyword">I</span>参考帧有着复杂的依耐性，因此对传输错误非常敏感，所以如果P帧丢失，画面会出现马赛克现象，因为前向参考帧错误，补齐的并不是真正运动变化后的数据。<br><br>B帧<br><br>B帧又称双向预测编码帧，也就是B帧记录的是本帧与前后帧的差别。也就是说要解码B帧，不仅要取得之前的缓存画面，还要解码之后的画面，通过前后画面的与本帧数据的叠加取得最终的画面。B帧压缩率高，但是对解码性能要求较高。如果图像中没有B帧，解码顺序和显示顺序相同；如果视频中含有B帧，解码顺序和现实序列不同，解码输出显示前需要进行图像重排列。目前接触到一般都是 <span class="hljs-keyword">I</span> + P。<br></code></pre></td></tr></table></figure><p>编解码器(Codec)<br>是对视频进行压缩或者解压缩，CODEC =COde （编码）+ DECode（解码）</p><p>复用/解复用(mux/demux)<br>把不同的流按照某种容器的规则放入容器，这种行为叫做复用（mux）<br>把不同的流从某种容器中解析出来，这种行为叫做解复用(demux)</p><img src="https://upload-images.jianshu.io/upload_images/11591878-810021da4c347e09.png?imageMogr2/auto-orient/strip|imageView2/2/w/1067/format/webp" alt="img"  /><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-number">1</span>、FFmpeg程序把-i参数指定的若干文件内容读入到内存，按照输入的参数或者程序默认的参数来处理并且把结果写入到若干的文件中。输入和输出文件可以是计算机文件、管道、网络流、捕获设备等<br><span class="hljs-number">2</span>、FFmpeg用libavformat包调用解复用器（demuxers）来读取输入文件中被编码的数据包(packets)，如果有多个输入文件，FFmpeg以有效输入流的最小时间戳来同步<br><span class="hljs-number">3</span>、然后解码器（decoder）从已编码的数据包中产生未被压缩的帧（frame），在那之后调用可选的过滤器<br><span class="hljs-number">4</span>、这些帧被传递到编码器，编码器会产生新的编码包<br><span class="hljs-number">5</span>、把新的编码包传递给复用器(muxer)处理并且把结果写入到输出文件中<br></code></pre></td></tr></table></figure><h3 id="FFmpeg-实际运用"><a href="#FFmpeg-实际运用" class="headerlink" title="FFmpeg 实际运用"></a>FFmpeg 实际运用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//视频分片</span><br>ffmpeg -i xxx.mp4 -f segment -segment_time <span class="hljs-number">60</span> -segment_format mpegts -segment_list /home/xxx/video_name.m3u8 -c copy -bsf:v h264_mp4toannexb -map <span class="hljs-number">0</span> /home/xxx/course-%<span class="hljs-number">04d</span>.ts<br>    <br>ffmpeg -i D:\video-demo\demo.mp4 -f segment -segment_time <span class="hljs-number">10</span> -segment_format mpegts -segment_list playlist.m3u8 -c copy -bsf:v h264_mp4toannexb -map <span class="hljs-number">0</span> demo-%<span class="hljs-number">04d</span>.ts<br><span class="hljs-comment">// 去掉视频中的音频</span><br>ffmpeg -i input.mp4 -vcodec copy -an output.mp4<br><span class="hljs-comment">// -an: 去掉音频；-vcodec:视频选项，一般后面加copy表示拷贝</span><br><br><span class="hljs-comment">// 提取视频中的音频 （格式需要和Duration: Stream #0:1(und): Audio:***,格式(***)一样）</span><br>ffmpeg -i input.mp4 -acodec copy -vn output.mp3<br><span class="hljs-comment">// -vn: 去掉视频；-acodec: 音频选项， 一般后面加copy表示拷贝</span><br>    <br><span class="hljs-comment">// 将1张图片和1个MP3音频文件转为MP4</span><br>ffmpeg -i akane.aac -i cover.jpg -acodec aac -strict -<span class="hljs-number">2</span> -vcodec libx264 -ar <span class="hljs-number">22050</span> -ab <span class="hljs-number">128</span>k -ac <span class="hljs-number">2</span> -pix_fmt yuvj420p -y test.mp4<br>ffmpeg -i Rubia.mp3 -i cover.jpg -acodec mp3 -strict -<span class="hljs-number">2</span> -vcodec libx264 -ar <span class="hljs-number">22050</span> -ab <span class="hljs-number">128</span>k -ac <span class="hljs-number">2</span> -pix_fmt yuvj420p -y test.mp4<br><br><span class="hljs-comment">// 转为mp4</span><br>ffmpeg -i aaa.flv -c copy out.mp4<br>    <br><span class="hljs-comment">// 音视频合成</span><br>ffmpeg -y –i input.mp4 –i input.mp3 –vcodec copy –acodec copy output.mp4<br><span class="hljs-comment">// -y 覆盖输出文件</span><br><br><span class="hljs-comment">//剪切视频</span><br>ffmpeg -ss <span class="hljs-number">0</span>:<span class="hljs-number">1</span>:<span class="hljs-number">30</span> -t <span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">20</span> -i input.mp4 -vcodec copy -acodec copy output.mp4<br><span class="hljs-comment">// -ss 开始时间; -t 持续时间</span><br><br><span class="hljs-comment">// 视频截图</span><br>ffmpeg –i test.mp4 –f image2 -t <span class="hljs-number">0.001</span> -s <span class="hljs-number">1280</span>x720 image-%<span class="hljs-number">3d</span>.jpg<br><span class="hljs-comment">// -s 设置分辨率; -f 强迫采用格式fmt;</span><br><br><span class="hljs-comment">// 视频分解为图片</span><br>ffmpeg –i test.mp4 –r <span class="hljs-number">1</span> –f image2 image-%<span class="hljs-number">3d</span>.jpg<br><span class="hljs-comment">// -r 指定截屏频率</span><br><br><span class="hljs-comment">// 将图片合成视频</span><br>ffmpeg -f image2 -i image%d.jpg output.mp4<br><br><span class="hljs-comment">//视频拼接</span><br>ffmpeg -f concat -i filelist.txt -c copy output.mp4<br><br><span class="hljs-comment">// 将视频转为gif</span><br>ffmpeg -i input.mp4 -ss <span class="hljs-number">0</span>:<span class="hljs-number">0</span>:<span class="hljs-number">30</span> -t <span class="hljs-number">10</span> -s <span class="hljs-number">320</span>x240 -pix_fmt rgb24 output.gif<br><span class="hljs-comment">// -pix_fmt 指定编码</span><br><br><span class="hljs-comment">// 将视频前30帧转为gif</span><br>ffmpeg -i input.mp4 -vframes <span class="hljs-number">30</span> -f gif output.gif<br><br><span class="hljs-comment">// 旋转视频</span><br>ffmpeg -i input.mp4 -vf rotate=PI/<span class="hljs-number">2</span> output.mp4<br><br><span class="hljs-comment">// 缩放视频</span><br>ffmpeg -i input.mp4 -vf scale=iw/<span class="hljs-number">2</span>:-<span class="hljs-number">1</span> output.mp4<br><span class="hljs-comment">// iw 是输入的宽度， iw/2就是一半;-1 为保持宽高比</span><br><br><span class="hljs-comment">//视频变速</span><br>ffmpeg -i input.mp4 -filter:v setpts=<span class="hljs-number">0.5</span>*PTS output.mp4<br><br><span class="hljs-comment">//音频变速</span><br>ffmpeg -i input.mp3 -filter:a atempo=<span class="hljs-number">2.0</span> output.mp3<br><br><span class="hljs-comment">//音视频同时变速，但是音视频为互倒关系</span><br>ffmpeg -i input.mp4 -filter_complex <span class="hljs-string">&quot;[0:v]setpts=0.5*PTS[v];[0:a]atempo=2.0[a]&quot;</span> -map <span class="hljs-string">&quot;[v]&quot;</span> -map <span class="hljs-string">&quot;[a]&quot;</span> output.mp4<br><br><span class="hljs-comment">// 视频添加水印</span><br>ffmpeg -i input.mp4 -i logo.jpg -filter_complex [<span class="hljs-number">0</span>:v][<span class="hljs-number">1</span>:v]overlay=main_w-overlay_w-<span class="hljs-number">10</span>:main_h-overlay_h-<span class="hljs-number">10</span>[out] -map [out] -map <span class="hljs-number">0</span>:a -codec:a copy output.mp4<br><span class="hljs-comment">// main_w-overlay_w-10 视频的宽度-水印的宽度-水印边距；</span><br><br><span class="hljs-comment">//添加字幕</span><br>ffmpeg -i <span class="hljs-number">0.</span>mp4 -vf subtitles=<span class="hljs-number">0.</span>srt <span class="hljs-number">1.</span>mp4<br></code></pre></td></tr></table></figure><h4 id="视频加密方案"><a href="#视频加密方案" class="headerlink" title="视频加密方案"></a>视频加密方案</h4><p>想达到的目的：将一个mp4视频文件切割为多个ts片段，并在切割过程中对每一个片段使用 AES-128 加密，最后生成一个m3u8的视频索引文件；</p><p>电脑环境 Fedora,已经安装了最新的ffmpeg；</p><p>如果要加密，首先准备好一下两个东西：</p><p>加密用的 key</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lsl">openssl rand  <span class="hljs-number">16</span> &gt; enc.<span class="hljs-type">key</span> （生成一个enc.<span class="hljs-type">key</span>文件）<br></code></pre></td></tr></table></figure><p>另一个是 iv</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">openssl <span class="hljs-keyword">rand</span> -<span class="hljs-keyword">hex</span> <span class="hljs-number">16</span>  （生成一段字符串，记下来）<br></code></pre></td></tr></table></figure><p>新建一个文件 enc.keyinfo 内容格式如下：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Yml"><span class="hljs-string">Key</span> <span class="hljs-string">URI</span>  <span class="hljs-comment"># enc.key的路径，使用http形式</span><br><span class="hljs-string">Path</span> <span class="hljs-string">to</span> <span class="hljs-string">key</span> <span class="hljs-string">file</span>  <span class="hljs-comment"># enc.key文件</span><br><span class="hljs-string">IV</span>  <span class="hljs-comment">#  上面生成的iv</span><br></code></pre></td></tr></table></figure><p>例子：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>localhost<span class="hljs-regexp">/video/</span>enc.key<br>enc.key<br><span class="hljs-number">48</span>c674428c1e719751565ad00fe24243<br></code></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">ffmpeg</span> <span class="hljs-string">-y</span> <br><span class="hljs-string">-i</span> <span class="hljs-string">test.mp4</span> <br><span class="hljs-string">-hls_time</span> <span class="hljs-number">12</span>    <span class="hljs-comment">#将test.mp4分割成每个小段多少秒</span><br><span class="hljs-string">-hls_key_info_file</span> <span class="hljs-string">enc.keyinfo</span> <br><span class="hljs-string">-hls_playlist_type</span> <span class="hljs-string">vod</span>    <span class="hljs-comment">#vod 是点播，表示PlayList不会变</span><br><span class="hljs-string">-hls_segment_filename</span> <span class="hljs-string">&quot;file%d.ts&quot;</span>   <span class="hljs-comment">#每个小段的文件名</span><br><span class="hljs-string">playlist.m3u8</span>   <span class="hljs-comment">#生成的m3u8文件</span><br><br><span class="hljs-string">ffmpeg</span> <span class="hljs-string">-y</span> <span class="hljs-string">-i</span> <span class="hljs-string">D:\video-demo\demo.mp4</span> <span class="hljs-string">-hls_time</span> <span class="hljs-number">10</span> <span class="hljs-string">-hls_key_info_file</span> <span class="hljs-string">D:\video-demo\enc.keyinfo</span> <span class="hljs-string">-hls_playlist_type</span> <span class="hljs-string">vod</span> <span class="hljs-string">-hls_segment_filename</span> <span class="hljs-string">&quot;demo-%d.ts&quot;</span> <span class="hljs-string">playlist.m3u8</span><br></code></pre></td></tr></table></figure><p>FFmpeg java工具类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.zkcm.upload.util;<br><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><span class="hljs-keyword">import</span> java.text.SimpleDateFormat;<br><span class="hljs-keyword">import</span> java.util.Calendar;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.regex.Matcher;<br><span class="hljs-keyword">import</span> java.util.regex.Pattern;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MediaUtil</span> </span>&#123;<br><br>    <span class="hljs-comment">//ffmpeg安装目录</span><br>    <span class="hljs-keyword">public</span>   <span class="hljs-keyword">static</span>  String FFMPEG_PATH =<span class="hljs-string">&quot;D:\\soft\\ffmpge\\ffmpeg.exe&quot;</span>;<br><br>    <span class="hljs-comment">//设置图片大小</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> String IMG_SIZE = <span class="hljs-string">&quot;1920x1080&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 视频截图方法（windows）</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">ffmpegToImage</span><span class="hljs-params">(String videoPath,String imagePath,<span class="hljs-keyword">int</span> timePoint)</span></span>&#123;<br>        List&lt;String&gt; commands = <span class="hljs-keyword">new</span> java.util.ArrayList&lt;String&gt;();<br>        FFMPEG_PATH= FFMPEG_PATH.replace(<span class="hljs-string">&quot;%20&quot;</span>, <span class="hljs-string">&quot; &quot;</span>);<br>        commands.add(FFMPEG_PATH);<br>        commands.add(<span class="hljs-string">&quot;-ss&quot;</span>);<br>        <span class="hljs-comment">//这个参数是设置截取视频多少秒时的画面</span><br>        commands.add(timePoint+<span class="hljs-string">&quot;&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;-i&quot;</span>);<br>        commands.add(videoPath);<br>        commands.add(<span class="hljs-string">&quot;-y&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;-f&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;image2&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;-t&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;0.001&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;-s&quot;</span>);<br>        <span class="hljs-comment">//这个参数是设置截取图片的大小</span><br>        commands.add(IMG_SIZE);<br>        commands.add(imagePath);<br>        <span class="hljs-keyword">try</span> &#123;<br>            ProcessBuilder builder = <span class="hljs-keyword">new</span> ProcessBuilder();<br>            builder.command(commands);<br>            builder.start();<br>            System.out.println(<span class="hljs-string">&quot;截取成功:&quot;</span>+imagePath);<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Description</span> 文件是否能被ffmpeg解析</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">checkFileType</span><span class="hljs-params">(String fileName)</span> </span>&#123;<br>        String type = fileName.substring(fileName.lastIndexOf(<span class="hljs-string">&quot;.&quot;</span>) + <span class="hljs-number">1</span>, fileName.length())<br>                .toLowerCase();<br>        <span class="hljs-keyword">if</span> (type.equals(<span class="hljs-string">&quot;avi&quot;</span>)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type.equals(<span class="hljs-string">&quot;mov&quot;</span>)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type.equals(<span class="hljs-string">&quot;mp4&quot;</span>)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type.equals(<span class="hljs-string">&quot;flv&quot;</span>)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type.equals(<span class="hljs-string">&quot;png&quot;</span>)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type.equals(<span class="hljs-string">&quot;jpg&quot;</span>)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type.equals(<span class="hljs-string">&quot;jpeg&quot;</span>)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">9</span>;<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@Description</span> 获取视频时长</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getVideoTime</span><span class="hljs-params">(String video_path)</span> </span>&#123;<br>        List&lt;String&gt; commands = <span class="hljs-keyword">new</span> java.util.ArrayList&lt;String&gt;();<br>        commands.add(FFMPEG_PATH);<br>        commands.add(<span class="hljs-string">&quot;-i&quot;</span>);<br>        commands.add(video_path);<br>        <span class="hljs-keyword">try</span> &#123;<br>            ProcessBuilder builder = <span class="hljs-keyword">new</span> ProcessBuilder();<br>            builder.command(commands);<br>            <span class="hljs-keyword">final</span> Process p = builder.start();<br><br>            <span class="hljs-comment">//从输入流中读取视频信息</span><br>            BufferedReader br = <span class="hljs-keyword">new</span> BufferedReader(<span class="hljs-keyword">new</span> InputStreamReader(p.getErrorStream()));<br>            StringBuffer sb = <span class="hljs-keyword">new</span> StringBuffer();<br>            String line = <span class="hljs-string">&quot;&quot;</span>;<br>            <span class="hljs-keyword">while</span> ((line = br.readLine()) != <span class="hljs-keyword">null</span>) &#123;<br>                sb.append(line);<br>            &#125;<br>            br.close();<br><br>            <span class="hljs-comment">//从视频信息中解析时长</span><br>            String regexDuration = <span class="hljs-string">&quot;Duration: (.*?), start: (.*?), bitrate: (\\d*) kb\\/s&quot;</span>;<br>            Pattern pattern = Pattern.compile(regexDuration);<br>            Matcher m = pattern.matcher(sb.toString());<br>            <span class="hljs-keyword">if</span> (m.find()) &#123;<br>                <span class="hljs-keyword">int</span> time = getTimelen(m.group(<span class="hljs-number">1</span>));<br>                System.out.println(video_path+<span class="hljs-string">&quot;,视频时长：&quot;</span>+time+<span class="hljs-string">&quot;, 开始时间：&quot;</span>+m.group(<span class="hljs-number">2</span>)+<span class="hljs-string">&quot;,比特率：&quot;</span>+m.group(<span class="hljs-number">3</span>)+<span class="hljs-string">&quot;kb/s&quot;</span>);<br>                <span class="hljs-keyword">return</span> time;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//格式:&quot;00:00:10.68&quot;</span><br>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getTimelen</span><span class="hljs-params">(String timelen)</span></span>&#123;<br>        <span class="hljs-keyword">int</span> min=<span class="hljs-number">0</span>;<br>        String strs[] = timelen.split(<span class="hljs-string">&quot;:&quot;</span>);<br>        <span class="hljs-keyword">if</span> (strs[<span class="hljs-number">0</span>].compareTo(<span class="hljs-string">&quot;0&quot;</span>) &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-comment">//秒</span><br>            min+=Integer.valueOf(strs[<span class="hljs-number">0</span>])*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(strs[<span class="hljs-number">1</span>].compareTo(<span class="hljs-string">&quot;0&quot;</span>)&gt;<span class="hljs-number">0</span>)&#123;<br>            min+=Integer.valueOf(strs[<span class="hljs-number">1</span>])*<span class="hljs-number">60</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(strs[<span class="hljs-number">2</span>].compareTo(<span class="hljs-string">&quot;0&quot;</span>)&gt;<span class="hljs-number">0</span>)&#123;<br>            min+=Math.round(Float.valueOf(strs[<span class="hljs-number">2</span>]));<br>        &#125;<br>        <span class="hljs-keyword">return</span> min;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 秒转化成 hh:mm:ss</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> duration</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">convertInt2Date</span><span class="hljs-params">(<span class="hljs-keyword">long</span> duration)</span></span>&#123;<br>        Calendar cal = Calendar.getInstance();<br>        cal.set(Calendar.HOUR_OF_DAY, <span class="hljs-number">0</span>);<br>        cal.set(Calendar.MINUTE, <span class="hljs-number">0</span>);<br>        cal.set(Calendar.SECOND, <span class="hljs-number">0</span>);<br>        cal.set(Calendar.MILLISECOND, <span class="hljs-number">0</span>);<br><br>        SimpleDateFormat formatter = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">&quot;HH:mm:ss&quot;</span>);<br>        <span class="hljs-keyword">return</span> formatter.format(cal.getTimeInMillis() + duration * <span class="hljs-number">1000</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 视频抽取音频文件</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> videoPath</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> type</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> audioPath</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">ffmpegToAudio</span><span class="hljs-params">(String videoPath,String type, String audioPath)</span></span>&#123;<br>        List&lt;String&gt; commands = <span class="hljs-keyword">new</span> java.util.ArrayList&lt;String&gt;();<br>        FFMPEG_PATH= FFMPEG_PATH.replace(<span class="hljs-string">&quot;%20&quot;</span>, <span class="hljs-string">&quot; &quot;</span>);<br>        commands.add(FFMPEG_PATH);<br>        commands.add(<span class="hljs-string">&quot;-i&quot;</span>);<br>        commands.add(videoPath);<br>        commands.add(<span class="hljs-string">&quot;-f&quot;</span>);<br>        commands.add(type);<br>        commands.add(<span class="hljs-string">&quot;-vn&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;-y&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;-acodec&quot;</span>);<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;wav&quot;</span>.equals(type))&#123;<br>            commands.add(<span class="hljs-string">&quot;pcm_s16le&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;mp3&quot;</span>.equals(type))&#123;<br>            commands.add(<span class="hljs-string">&quot;mp3&quot;</span>);<br>        &#125;<br>        commands.add(<span class="hljs-string">&quot;-ar&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;16000&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;-ac&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;1&quot;</span>);<br>        commands.add(audioPath);<br>        <span class="hljs-keyword">try</span> &#123;<br>            ProcessBuilder builder = <span class="hljs-keyword">new</span> ProcessBuilder();<br>            builder.command(commands);<br>            Process p = builder.start();<br>            System.out.println(<span class="hljs-string">&quot;抽离成功:&quot;</span>+audioPath);<br><br>            <span class="hljs-comment">// 1. start</span><br>            <span class="hljs-comment">// 保存ffmpeg的输出结果流</span><br>            BufferedReader buf = <span class="hljs-keyword">null</span>;<br>            String line = <span class="hljs-keyword">null</span>;<br><br>            buf = <span class="hljs-keyword">new</span> BufferedReader(<span class="hljs-keyword">new</span> InputStreamReader(p.getInputStream()));<br><br>            StringBuffer sb = <span class="hljs-keyword">new</span> StringBuffer();<br>            <span class="hljs-keyword">while</span> ((line = buf.readLine()) != <span class="hljs-keyword">null</span>) &#123;<br>                System.out.println(line);<br>                sb.append(line);<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            <span class="hljs-comment">// 这里线程阻塞，将等待外部转换进程运行成功运行结束后，才往下执行</span><br>            p.waitFor();<br>            <span class="hljs-comment">// 1. end</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>        &#125;<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * wav 转 mp3</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> wavPath</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> mp3Path</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-comment">//wav转mp3命令：ffmpeg -i test.wav -f mp3 -acodec libmp3lame -y wav2mp3.mp3</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">ffmpegOfwavTomp3</span><span class="hljs-params">(String wavPath, String mp3Path)</span></span>&#123;<br>        List&lt;String&gt; commands = <span class="hljs-keyword">new</span> java.util.ArrayList&lt;String&gt;();<br>        FFMPEG_PATH= FFMPEG_PATH.replace(<span class="hljs-string">&quot;%20&quot;</span>, <span class="hljs-string">&quot; &quot;</span>);<br>        commands.add(FFMPEG_PATH);<br>        commands.add(<span class="hljs-string">&quot;-i&quot;</span>);<br>        commands.add(wavPath);<br>        commands.add(<span class="hljs-string">&quot;-f&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;mp3&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;-acodec&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;libmp3lame&quot;</span>);<br>        commands.add(<span class="hljs-string">&quot;-y&quot;</span>);<br>        commands.add(mp3Path);<br>        <span class="hljs-keyword">try</span> &#123;<br>            ProcessBuilder builder = <span class="hljs-keyword">new</span> ProcessBuilder();<br>            builder.command(commands);<br>            Process p = builder.start();<br>            System.out.println(<span class="hljs-string">&quot;转换成功:&quot;</span>+mp3Path);<br><br>            <span class="hljs-comment">// 1. start</span><br>            <span class="hljs-comment">// 保存ffmpeg的输出结果流</span><br>            BufferedReader buf = <span class="hljs-keyword">null</span>;<br>            String line = <span class="hljs-keyword">null</span>;<br><br>            buf = <span class="hljs-keyword">new</span> BufferedReader(<span class="hljs-keyword">new</span> InputStreamReader(p.getInputStream()));<br><br>            StringBuffer sb = <span class="hljs-keyword">new</span> StringBuffer();<br>            <span class="hljs-keyword">while</span> ((line = buf.readLine()) != <span class="hljs-keyword">null</span>) &#123;<br>                System.out.println(line);<br>                sb.append(line);<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            <span class="hljs-comment">// 这里线程阻塞，将等待外部转换进程运行成功运行结束后，才往下执行</span><br>            p.waitFor();<br>            <span class="hljs-comment">// 1. end</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br><span class="hljs-comment">//        // 视频文件</span><br><span class="hljs-comment">//        String videoRealPath1 = &quot;D:\\5.MOV&quot;;</span><br><span class="hljs-comment">//        // 截图的路径（输出路径）</span><br><span class="hljs-comment">//        String imageRealPath1 = &quot;D:\\31.jpg&quot;;</span><br><span class="hljs-comment">//        String imageRealPath2 = &quot;D:\\32.jpg&quot;;</span><br><span class="hljs-comment">//        if(checkFileType(videoRealPath1) ==0)&#123;</span><br><span class="hljs-comment">//             ffmpegToImage(videoRealPath1,imageRealPath1,10);</span><br><span class="hljs-comment">//             ffmpegToImage(videoRealPath1,imageRealPath2,11);</span><br><span class="hljs-comment">//        &#125;</span><br><span class="hljs-comment">//        String videoRealPath = &quot;D:\\5.MOV&quot;;</span><br><span class="hljs-comment">//        String audioRealPath = &quot;D:\\HHH\\5.wav&quot;;</span><br><span class="hljs-comment">//        String audioType = &quot;wav&quot;;</span><br><span class="hljs-comment">//        ffmpegToAudio(videoRealPath,audioType,audioRealPath);</span><br><br>        String wavPath = <span class="hljs-string">&quot;D:\\videoDemo\\test.wav&quot;</span>;<br>        String mp3Path = <span class="hljs-string">&quot;D:\\videoDemo\\test.mp3&quot;</span>;<br>        ffmpegOfwavTomp3(wavPath,mp3Path);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="基于域名防盗链处理"><a href="#基于域名防盗链处理" class="headerlink" title="基于域名防盗链处理"></a>基于域名防盗链处理</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">这是最通行的做法，从技术实现上也是最为简洁和容易使用，但是缺点也是比较明显的，只适合于网站页面模式使用，一旦脱离的浏览器，就会受到限制。同时从技术上的破解相对也是容易的。<br></code></pre></td></tr></table></figure><h5 id="基于连接令牌（Token）接入，通过带入加密的Token进行接入访问"><a href="#基于连接令牌（Token）接入，通过带入加密的Token进行接入访问" class="headerlink" title="基于连接令牌（Token）接入，通过带入加密的Token进行接入访问"></a>基于连接令牌（Token）接入，通过带入加密的Token进行接入访问</h5><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">这种做法，是针对每个视频源都设置指定的加密<span class="hljs-built_in">Token</span>，使用者只有获得<span class="hljs-built_in">Token</span>，才容许授权接入，适合于网站页面，客户端，pc，手机使用，实施相对简单，但是由于<span class="hljs-built_in">Token</span>的相对固定，一旦<span class="hljs-built_in">Token</span>被他人知晓，也会面临内容源被盗取的风险。<br></code></pre></td></tr></table></figure><h5 id="基于发布令牌（Token）加密，结合授权服务接入访问"><a href="#基于发布令牌（Token）加密，结合授权服务接入访问" class="headerlink" title="基于发布令牌（Token）加密，结合授权服务接入访问"></a>基于发布令牌（Token）加密，结合授权服务接入访问</h5><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">发布令牌授权，是在原有<span class="hljs-built_in">Token</span>授权模式上，做了更进一步的加强，<span class="hljs-built_in">Token</span>每时每刻都在不断随机变化，使用者必须连接到授权服务器，每次接入的时候，都需要从授权服务器获取最新的<span class="hljs-built_in">Token</span>，才容许接入。这个就类似银行的个人usb安全密码器，在登录网上银行的时候，需要获取随机登录密码，才可以登录网银。 在这种情况下，使用者如果无法连接到授权服务器，几乎是不可能得到连接令牌，从而杜绝的被非法使用的可能性。这种模式同样适用于页面，客户端，pc，手机各种接入模式。同时实施相对简单<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>FFmpeg</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>FFmpeg</title>
    <link href="/2020/11/30/FFmpeg/"/>
    <url>/2020/11/30/FFmpeg/</url>
    
    <content type="html"><![CDATA[<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><h4 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ffmpeg</span> -i akane.mp<span class="hljs-number">4</span> -c copy -map <span class="hljs-number">0</span> -f segment -segment_list akane.m<span class="hljs-number">3</span>u<span class="hljs-number">8</span> -segment_time <span class="hljs-number">10</span> segment%d.ts<br></code></pre></td></tr></table></figure><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs livescript">ffmpeg -y <span class="hljs-string">\</span><br>-i The_Kriss_Vector.mp4 <span class="hljs-string">\</span><br>-hls_time <span class="hljs-number">20</span> <span class="hljs-string">\</span>       <span class="hljs-comment"># 将test.mp4分割成每个小段多少秒</span><br>-hls_key_info_file encrypt.keyinfo <span class="hljs-string">\</span><br>-hls_playlist_type vod <span class="hljs-string">\</span>   <span class="hljs-comment"># vod 是点播，表示PlayList不会变</span><br>-hls_segment_filename <span class="hljs-string">&quot;playlist%d.ts&quot;</span> <span class="hljs-string">\</span>  <span class="hljs-comment">#  每个小段的文件名</span><br>playlist.m3u8   <span class="hljs-comment">#  生成的m3u8文件</span><br></code></pre></td></tr></table></figure><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs livescript">ffmpeg -y <span class="hljs-string">\</span><br>-i The_Kriss_Vector.mp4 <span class="hljs-string">\</span><br>-hls_time <span class="hljs-number">20</span> <span class="hljs-string">\</span><br>-hls_key_info_file encrypt.keyinfo <span class="hljs-string">\</span><br>-hls_playlist_type event <span class="hljs-string">\</span><br>-hls_segment_filename <span class="hljs-string">&quot;playlist%03d.ts&quot;</span> <span class="hljs-string">\</span><br>playlist.m3u8<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ffmpeg</span> -y -i akane.mp<span class="hljs-number">4</span> -hls_time <span class="hljs-number">30</span> -hls_key_info_file enc.keyinfo -hls_segment_filename <span class="hljs-string">&quot;akane%03d.ts&quot;</span> akane.m<span class="hljs-number">3</span>u<span class="hljs-number">8</span><br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ffmpeg</span> -y -i akane.mp<span class="hljs-number">4</span> -hls_time <span class="hljs-number">4</span> -hls_segment_filename <span class="hljs-string">&quot;playlist%03d.ts&quot;</span> playlist.m<span class="hljs-number">3</span>u<span class="hljs-number">8</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>FFmpeg</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos7安装elasticsearch</title>
    <link href="/2020/11/19/Centos7%E5%AE%89%E8%A3%85elatiscsearch/"/>
    <url>/2020/11/19/Centos7%E5%AE%89%E8%A3%85elatiscsearch/</url>
    
    <content type="html"><![CDATA[<h4 id="下载安装包"><a href="#下载安装包" class="headerlink" title="下载安装包"></a>下载安装包</h4><p>官网地址  <a href="https://www.elastic.co/cn/downloads/past-releases#elasticsearch">https://www.elastic.co/cn/downloads/past-releases#elasticsearch</a></p><p>选择自己要下载的版本，这里以v7.3.2为例</p><h4 id="安装-amp-脚本"><a href="#安装-amp-脚本" class="headerlink" title="安装&amp;脚本"></a>安装&amp;脚本</h4><p>​    es是要用非root用户启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br>data=<span class="hljs-string">&quot;/usr/local&quot;</span><br><span class="hljs-comment"># 设置用户和用户组</span><br>user=<span class="hljs-string">&quot;es&quot;</span><br>group=<span class="hljs-string">&quot;elasticsearch&quot;</span><br>password=<span class="hljs-string">&quot;123456&quot;</span><br>groupadd <span class="hljs-variable">$&#123;group&#125;</span><br><br>useradd <span class="hljs-variable">$&#123;user&#125;</span><br><br>passwd <span class="hljs-variable">$&#123;user&#125;</span> <span class="hljs-variable">$&#123;password&#125;</span><br><br>usermod -G <span class="hljs-variable">$&#123;group&#125;</span> <span class="hljs-variable">$&#123;user&#125;</span><br><br>tar -xvf elasticsearch-7.3.2-linux-x86_64.tar.gz<br><br>sudo mv elasticsearch-7.3.2 <span class="hljs-variable">$&#123;data&#125;</span>/es<br><br>sudo chown -R <span class="hljs-variable">$&#123;user&#125;</span>:<span class="hljs-variable">$&#123;group&#125;</span> <span class="hljs-variable">$&#123;data&#125;</span>/es<br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;vm.max_map_count=262144&quot;</span> &gt;&gt; /etc/sysctl.conf<br><br>sysctl -p <br><span class="hljs-comment"># 修改每个进程最大同时打开文件数和最大线程个数</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;* hard nofile 65536&quot;</span> &gt;&gt; /etc/security/limits.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;* soft nofile 65536&quot;</span> &gt;&gt; /etc/security/limits.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;* soft nproc 4096&quot;</span> &gt;&gt; /etc/security/limits.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;* hard nproc 4096&quot;</span> &gt;&gt; /etc/security/limits.conf<br><br></code></pre></td></tr></table></figure><h4 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h4><p>如：ik分词插件</p><p>下载安装包 <a href="https://github.com/medcl/elasticsearch-analysis-ik/releases">https://github.com/medcl/elasticsearch-analysis-ik/releases</a></p><p>解压到刚刚安装的es目录 如： /usr/local/es/plugins</p><h4 id="配置elasticsearch-yml（无密码）"><a href="#配置elasticsearch-yml（无密码）" class="headerlink" title="配置elasticsearch.yml（无密码）"></a>配置elasticsearch.yml（无密码）</h4><p>进入安装目录的config目录，编辑vim elasticsearch.yml</p><h5 id="集群配置："><a href="#集群配置：" class="headerlink" title="集群配置："></a>集群配置：</h5><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-attribute">cluster.name</span>: cluster-es<br><br><span class="hljs-attribute">node.name</span>: node-1<br><br><span class="hljs-attribute">network.host</span>: 192.168.186.140<br><br><span class="hljs-attribute">node.master</span>: true<br><span class="hljs-attribute">node.data</span>: true<br><span class="hljs-attribute">http.port</span>: 9200<br><br><span class="hljs-attribute">http.cors.enabled</span>: true<br><span class="hljs-attribute">http.cors.allow-origin</span>: &quot;*&quot;<br><span class="hljs-attribute">http.cors.allow-methods</span>: OPTIONS, HEAD, GET, POST, PUT, DELETE<br><span class="hljs-attribute">http.cors.allow-headers</span>: &quot;X-Requested-With, Content-Type, Content-Length, X-User&quot;<br><br><br><span class="hljs-attribute">cluster.initial_master_nodes</span>: [&quot;node-1&quot;,&quot;node-2&quot;,&quot;node-3&quot;]<br><br><span class="hljs-attribute">discovery.seed_hosts</span>: [&quot;192.168.186.140:9300&quot;, &quot;192.168.186.151:9300&quot;, &quot;192.168.186.152:9300&quot;]<br><span class="hljs-attribute">xpack.security.enabled</span>: true<br><span class="hljs-attribute">xpack.security.transport.ssl.enabled</span>: true<br><span class="hljs-attribute">xpack.security.transport.ssl.verification_mode</span>: certificate<br><span class="hljs-attribute">xpack.security.transport.ssl.keystore.path</span>: elastic-certificates.p12<br><span class="hljs-attribute">xpack.security.transport.ssl.truststore.path</span>: elastic-certificates.p12<br></code></pre></td></tr></table></figure><h5 id="单节点配置："><a href="#单节点配置：" class="headerlink" title="单节点配置："></a>单节点配置：</h5><p>主要修改：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">node</span><span class="hljs-selector-class">.name</span>: <span class="hljs-selector-tag">node-1</span><br><span class="hljs-selector-tag">network</span><span class="hljs-selector-class">.host</span>: 192<span class="hljs-selector-class">.168</span><span class="hljs-selector-class">.186</span><span class="hljs-selector-class">.140</span><br><span class="hljs-selector-tag">http</span><span class="hljs-selector-class">.port</span>: 9200<br><span class="hljs-selector-tag">cluster</span><span class="hljs-selector-class">.initial_master_nodes</span>: <span class="hljs-selector-attr">[<span class="hljs-string">&quot;node-1&quot;</span>]</span><br><span class="hljs-selector-tag">http</span><span class="hljs-selector-class">.cors</span><span class="hljs-selector-class">.enabled</span>: <span class="hljs-selector-tag">true</span><br><span class="hljs-selector-tag">http</span><span class="hljs-selector-class">.cors</span><span class="hljs-selector-class">.allow-origin</span>: &quot;*&quot;<br><span class="hljs-selector-tag">http</span><span class="hljs-selector-class">.cors</span><span class="hljs-selector-class">.allow-headers</span>: &quot;<span class="hljs-selector-tag">X-Requested-With</span>, <span class="hljs-selector-tag">Content-Type</span>, <span class="hljs-selector-tag">Content-Length</span>, <span class="hljs-selector-tag">X-User</span>&quot;<br></code></pre></td></tr></table></figure><h4 id="集群配置elasticsearch-yml（SSL认证-证书）"><a href="#集群配置elasticsearch-yml（SSL认证-证书）" class="headerlink" title="集群配置elasticsearch.yml（SSL认证/证书）"></a>集群配置elasticsearch.yml（SSL认证/证书）</h4><p><strong>生成证书—&gt;分发证书到节点—-&gt;修改配置文件—–&gt;elasticsearch各节点为xpack.security.transport添加密码</strong></p><h5 id="生成证书-密码1"><a href="#生成证书-密码1" class="headerlink" title="生成证书(密码1)"></a>生成证书(密码1)</h5><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata">bin/elasticsearch-certutil  <span class="hljs-keyword">ca</span>   <br>bin/elasticsearch-certutil  cert --<span class="hljs-keyword">ca</span> elastic-<span class="hljs-keyword">stack</span>-<span class="hljs-keyword">ca</span>.p12<br></code></pre></td></tr></table></figure><h5 id="分发证书到节点"><a href="#分发证书到节点" class="headerlink" title="分发证书到节点"></a>分发证书到节点</h5><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">scp elastic-certificates.p12 es<span class="hljs-variable">@192</span>.<span class="hljs-number">168.186</span>.<span class="hljs-number">151</span><span class="hljs-symbol">:/home/es/elasticsearch-</span><span class="hljs-number">7.3</span>.<span class="hljs-number">2</span>/config/<br>scp elastic-certificates.p12 es<span class="hljs-variable">@192</span>.<span class="hljs-number">168.186</span>.<span class="hljs-number">152</span><span class="hljs-symbol">:/home/es/elasticsearch-</span><span class="hljs-number">7.3</span>.<span class="hljs-number">2</span>/config/<br></code></pre></td></tr></table></figure><h5 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h5><p>编辑vim elasticsearch.yml，添加如下配置：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">xpack</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.enabled</span>: <span class="hljs-selector-tag">true</span><br><span class="hljs-selector-tag">xpack</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.transport</span><span class="hljs-selector-class">.ssl</span><span class="hljs-selector-class">.enabled</span>: <span class="hljs-selector-tag">truexpack</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.enabled</span>: <span class="hljs-selector-tag">true</span><br><span class="hljs-selector-tag">xpack</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.transport</span><span class="hljs-selector-class">.ssl</span><span class="hljs-selector-class">.verification_mode</span>: <span class="hljs-selector-tag">certificate</span><br><span class="hljs-selector-tag">xpack</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.transport</span><span class="hljs-selector-class">.ssl</span><span class="hljs-selector-class">.keystore</span><span class="hljs-selector-class">.path</span>: <span class="hljs-selector-tag">elastic-certificates</span><span class="hljs-selector-class">.p12</span><br><span class="hljs-selector-tag">xpack</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.transport</span><span class="hljs-selector-class">.ssl</span><span class="hljs-selector-class">.truststore</span><span class="hljs-selector-class">.path</span>: <span class="hljs-selector-tag">elastic-certificates</span><span class="hljs-selector-class">.p12</span><br></code></pre></td></tr></table></figure><h5 id="各节点为xpack-security-transport添加密码-密码为创建证书时设置的密码"><a href="#各节点为xpack-security-transport添加密码-密码为创建证书时设置的密码" class="headerlink" title="各节点为xpack.security.transport添加密码(密码为创建证书时设置的密码)"></a>各节点为xpack.security.transport添加密码(密码为创建证书时设置的密码)</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">bin/elasticsearch-keystore add xpack<span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.transport</span><span class="hljs-selector-class">.ssl</span><span class="hljs-selector-class">.keystore</span>.secure_password<br>bin/elasticsearch-keystore add xpack<span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.transport</span><span class="hljs-selector-class">.ssl</span><span class="hljs-selector-class">.truststore</span>.secure_password<br></code></pre></td></tr></table></figure><h5 id="非root用户重启elasticsearch服务"><a href="#非root用户重启elasticsearch服务" class="headerlink" title="非root用户重启elasticsearch服务"></a>非root用户重启elasticsearch服务</h5><h5 id="设置密码（需要es服务正在运行中）"><a href="#设置密码（需要es服务正在运行中）" class="headerlink" title="设置密码（需要es服务正在运行中）"></a>设置密码（需要es服务正在运行中）</h5><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">bin/elasticsearch-setup-passwords <span class="hljs-built_in">int</span>eractive  <br></code></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/11/19/kONVlUxq5BFfyvC.png" alt="image-20201119102153473"></p><h4 id="修改kibana配置文件（有密码）"><a href="#修改kibana配置文件（有密码）" class="headerlink" title="修改kibana配置文件（有密码）"></a>修改kibana配置文件（有密码）</h4><p><strong>1.修改kibana.yml配置文件，添加以下配置</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#进入kibana安装目录</span><br>cd /xxxx/kibana-7.2.0-linux-x86_64/config<br><br><span class="hljs-comment">#修改配置文件</span><br>vim kibana.yml<br><br><span class="hljs-comment">#添加配置</span><br>elasticsearch.username: <span class="hljs-string">&quot;elastic&quot;</span><br>elasticsearch.password: <span class="hljs-string">&quot;xxx&quot;</span><br></code></pre></td></tr></table></figure><p><strong>2.非root用户重启kibana服务</strong></p><p><strong>3.登录kibana</strong></p><h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><h5 id="1-查询索引文档数量"><a href="#1-查询索引文档数量" class="headerlink" title="1.查询索引文档数量"></a>1.查询索引文档数量</h5><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">curl </span><span class="hljs-built_in">--noproxy</span> <span class="hljs-string">&#x27;*&#x27;</span> <span class="hljs-built_in">--user</span> <span class="hljs-string">&#x27;user:passwd&#x27;</span> -X <span class="hljs-string">GET </span><span class="hljs-string">&#x27;http://ip:9200/_cat/count/index_name?v&#x27;</span><br><br><span class="hljs-string">epoch </span>     <span class="hljs-string">timestamp </span><span class="hljs-string">count</span><br><span class="hljs-string">1614838001 </span><span class="hljs-string">06:06:</span><span class="hljs-string">41 </span> <span class="hljs-string">122090</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">curl </span><span class="hljs-built_in">--noproxy</span> <span class="hljs-string">&#x27;*&#x27;</span> <span class="hljs-built_in">--user</span> <span class="hljs-string">&#x27;user:passwd&#x27;</span> -X <span class="hljs-string">GET </span><span class="hljs-string">&#x27;http://ip:9200/_cat/indices?v</span><br></code></pre></td></tr></table></figure><h5 id="2-查看es状态"><a href="#2-查看es状态" class="headerlink" title="2.查看es状态"></a>2.查看es状态</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs routeros">curl --noproxy <span class="hljs-string">&#x27;*&#x27;</span> --user <span class="hljs-string">&#x27;user:passwd&#x27;</span> -X <span class="hljs-builtin-name">GET</span> <span class="hljs-string">&#x27;http://ip:9200/_cluster/health?pretty&#x27;</span><br><br>&#123;<br>  <span class="hljs-string">&quot;cluster_name&quot;</span> : <span class="hljs-string">&quot;fx&quot;</span>,<br>  <span class="hljs-string">&quot;status&quot;</span> : <span class="hljs-string">&quot;yellow&quot;</span>,<br>  <span class="hljs-string">&quot;timed_out&quot;</span> : <span class="hljs-literal">false</span>,<br>  <span class="hljs-string">&quot;number_of_nodes&quot;</span> : 1,<br>  <span class="hljs-string">&quot;number_of_data_nodes&quot;</span> : 1,<br>  <span class="hljs-string">&quot;active_primary_shards&quot;</span> : 22,<br>  <span class="hljs-string">&quot;active_shards&quot;</span> : 22,<br>  <span class="hljs-string">&quot;relocating_shards&quot;</span> : 0,<br>  <span class="hljs-string">&quot;initializing_shards&quot;</span> : 0,<br>  <span class="hljs-string">&quot;unassigned_shards&quot;</span> : 11,<br>  <span class="hljs-string">&quot;delayed_unassigned_shards&quot;</span> : 0,<br>  <span class="hljs-string">&quot;number_of_pending_tasks&quot;</span> : 0,<br>  <span class="hljs-string">&quot;number_of_in_flight_fetch&quot;</span> : 0,<br>  <span class="hljs-string">&quot;task_max_waiting_in_queue_millis&quot;</span> : 0,<br>  <span class="hljs-string">&quot;active_shards_percent_as_number&quot;</span> : 66.66666666666666<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3-删除索引下的数据"><a href="#3-删除索引下的数据" class="headerlink" title="3.删除索引下的数据"></a>3.删除索引下的数据</h5><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">curl </span><span class="hljs-built_in">--noproxy</span> <span class="hljs-string">&#x27;*&#x27;</span> <span class="hljs-built_in">--user</span> <span class="hljs-string">&#x27;user:passwd&#x27;</span> -X <span class="hljs-string">POST </span><span class="hljs-string">&#x27;http:ip//:9200/cpsl_library_v1.12/_delete_by_query?pretty&#x27;</span> -d <span class="hljs-string">&#x27;&#123;&quot;query&quot;: &#123;&quot;match_all&quot;: &#123;&#125;&#125;&#125;&#x27;</span><br><br><span class="hljs-string">curl </span><span class="hljs-built_in">--noproxy</span> <span class="hljs-string">&#x27;*&#x27;</span> <span class="hljs-built_in">--user</span> <span class="hljs-string">&#x27;elastic:v2m$yYlvN!&#x27;</span> -X <span class="hljs-string">POST </span> <span class="hljs-string">&#x27;http://ip:9200/cpsl_library_v1.12/_delete_by_query?refresh&amp;pretty&#x27;</span> -H <span class="hljs-string">&#x27;Content-Type: application/json&#x27;</span> -d <span class="hljs-string">&#x27;&#123;&quot;query&quot;: &#123;&quot;match_all&quot;: &#123;&#125;&#125;&#125;&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>elasticsearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Kafka安装使用</title>
    <link href="/2020/10/29/Kafka%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8/"/>
    <url>/2020/10/29/Kafka%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h4 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h4><p>1.<a href="https://kafka.apachecn.org/downloads.html">官网下载</a></p><p>2.解压 tar -zxvf  xxxxxxx.tar.gz</p><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><code class="hljs clean"><br>############################# Server Basics #############################<br><br># broker的id，要求唯一，集群部署不能重复<br>broker.id=<span class="hljs-number">0</span><br>############################# Socket Server Settings #############################<br><br># 监听的服务端口，所部署机器的IP或者域名＋端口，记得防火墙开端口 <br># 监听器列表 - 使用逗号分隔URI列表和监听器名称。如果侦听器名称不是安全协议，则还必须设置listener.security.protocol.map。指定主机名为<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>来绑定到所有接口。留空则绑定到默认接口上<br># java.net.InetAddress.getCanonicalHostName() <span class="hljs-keyword">if</span> not configured.<br>#   FORMAT:<br>#     listeners = listener_name:<span class="hljs-comment">//host_name:port</span><br>#   EXAMPLE:<br>#     listeners = PLAINTEXT:<span class="hljs-comment">//your.host.name:9092</span><br>listeners=PLAINTEXT:<span class="hljs-comment">//192.168.186.144:9092</span><br><br># Hostname and port the broker will advertise to producers and consumers. If not set, <br># it uses the value for <span class="hljs-string">&quot;listeners&quot;</span> <span class="hljs-keyword">if</span> configured.  Otherwise, it will use the value<br># returned <span class="hljs-keyword">from</span> java.net.InetAddress.getCanonicalHostName().<br>#advertised.listeners=PLAINTEXT:<span class="hljs-comment">//your.host.name:9092</span><br><br># Maps listener names to security protocols, the default is for them to be the same. See the config documentation for more details<br>#listener.security.protocol.map=PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL<br><br># 服务器用于从接收网络请求并发送网络响应的线程数<br>num.network.threads=<span class="hljs-number">3</span><br><br># 服务器用于处理请求的线程数，可能包括磁盘I/O<br>num.io.threads=<span class="hljs-number">8</span><br><br># 服务端用来处理socket连接的SO_SNDBUF缓冲大小。如果值为<span class="hljs-number">-1</span>，则使用系统默认值。<br>socket.send.buffer.bytes=<span class="hljs-number">102400</span><br><br># 服务端用来处理socket连接的SO_RCVBUFF缓冲大小。如果值为<span class="hljs-number">-1</span>，则使用系统默认值<br>socket.receive.buffer.bytes=<span class="hljs-number">102400</span><br><br># socket请求的最大大小，这是为了防止server跑光内存，不能大于Java堆的大小。（<span class="hljs-number">104857600</span>-&gt;<span class="hljs-number">100</span>MB）<br>socket.request.max.bytes=<span class="hljs-number">104857600</span><br><br><br>############################# Log Basics #############################<br><br># 保存日志数据的目录，如果未设置将使用log.dir的配置。<br>log.dirs=/home/cloud/server/kafka/kafka/logs<br><br># ！！每个topic的默认日志分区数 ！！<br>num.partitions=<span class="hljs-number">3</span><br><br># 每个数据目录，用于启动时日志恢复和关闭时刷新的线程数<br>num.recovery.threads.per.data.dir=<span class="hljs-number">1</span><br><br>############################# Internal Topic Settings  #############################<br># The replication factor for the group metadata internal topics <span class="hljs-string">&quot;__consumer_offsets&quot;</span> and <span class="hljs-string">&quot;__transaction_state&quot;</span><br># For anything other than development testing, a value greater than <span class="hljs-number">1</span> is recommended for to ensure availability such <span class="hljs-keyword">as</span> <span class="hljs-number">3.</span><br><br># offset topic的副本数（设置的越大，可用性越高）。内部topic创建将失败，直到集群大小满足此副本数要求。<br>offsets.topic.replication.factor=<span class="hljs-number">3</span><br># 事务topic的副本数（设置的越大，可用性越高）。内部topic在集群数满足副本数之前，将会一直创建失败。<br>transaction.state.log.replication.factor=<span class="hljs-number">1</span><br># 覆盖事务topic的min.insync.replicas配置<br># 当producer将ack设置为“全部”（或“<span class="hljs-number">-1</span>”）时，min.insync.replicas指定了被认为写入成功的最小副本数。<br># 如果这个最小值不能满足，那么producer将会引发一个异常（NotEnoughReplicas或NotEnoughReplicasAfterAppend）。<br># 当一起使用时，min.insync.replicas和acks允许您强制更大的耐久性保证。 <br># 一个经典的情况是创建一个复本数为<span class="hljs-number">3</span>的topic，将min.insync.replicas设置为<span class="hljs-number">2</span>，并且producer使用“all”选项。 <br># 这将确保如果大多数副本没有写入producer则抛出异常。<br>transaction.state.log.min.isr=<span class="hljs-number">1</span><br><br>############################# Log Flush Policy #############################<br><br># Messages are immediately written to the filesystem but by default we only fsync() to sync<br># the OS cache lazily. The following configurations control the flush <span class="hljs-keyword">of</span> data to disk.<br># There are a few important trade-offs here:<br>#    <span class="hljs-number">1.</span> Durability: Unflushed data may be lost <span class="hljs-keyword">if</span> you are not using replication.<br>#    <span class="hljs-number">2.</span> Latency: Very large flush intervals may lead to latency spikes when the flush does occur <span class="hljs-keyword">as</span> there will be a lot <span class="hljs-keyword">of</span> data to flush.<br>#    <span class="hljs-number">3.</span> Throughput: The flush is generally the most expensive operation, and a small flush interval may lead to exceessive seeks.<br># The settings below allow one to configure the flush policy to flush data after a period <span class="hljs-keyword">of</span> time or<br># every N messages (or both). This can be done globally and overridden on a per-topic basis.<br><br># 在将消息刷新到磁盘之前，在日志分区上累积的消息数量。默认：    <span class="hljs-number">9223372036854775807</span><br>#log.flush.interval.messages=<span class="hljs-number">10000</span><br><br># 在刷新到磁盘之前，任何topic中的消息保留在内存中的最长时间（以毫秒为单位）。如果未设置，则使用<br># 如果未设置，则使用log.flush.scheduler.interval.ms中的值。 <br>#log.flush.interval.ms=<span class="hljs-number">1000</span><br><br>############################# Log Retention Policy #############################<br><br># The following configurations control the disposal <span class="hljs-keyword">of</span> log segments. The policy can<br># be set to delete segments after a period <span class="hljs-keyword">of</span> time, or after a given size has accumulated.<br># A segment will be deleted whenever *either* <span class="hljs-keyword">of</span> these criteria are met. Deletion always happens<br># <span class="hljs-keyword">from</span> the end <span class="hljs-keyword">of</span> the log.<br><br># The minimum age <span class="hljs-keyword">of</span> a log file to be eligible for deletion due to age<br>log.retention.hours=<span class="hljs-number">168</span><br><br># A size-based retention policy for logs. Segments are pruned <span class="hljs-keyword">from</span> the log unless the remaining<br># segments drop below log.retention.bytes. Functions independently <span class="hljs-keyword">of</span> log.retention.hours.<br>#log.retention.bytes=<span class="hljs-number">1073741824</span><br><br># The maximum size <span class="hljs-keyword">of</span> a log segment file. When this size is reached a new log segment will be created.<br>log.segment.bytes=<span class="hljs-number">1073741824</span><br><br># The interval at which log segments are checked to see <span class="hljs-keyword">if</span> they can be deleted according<br># to the retention policies<br>log.retention.check.interval.ms=<span class="hljs-number">300000</span><br><br>############################# Zookeeper #############################<br><br># Zookeeper connection string (see zookeeper docs for details).<br># This is a comma separated host:port pairs, each corresponding to a zk<br># server. e.g. <span class="hljs-string">&quot;127.0.0.1:3000,127.0.0.1:3001,127.0.0.1:3002&quot;</span>.<br># You can also append an optional chroot string to the urls to specify the<br># root directory for all kafka znodes.<br>zookeeper.connect=localhost:<span class="hljs-number">2181</span><br><br># Timeout <span class="hljs-keyword">in</span> ms for connecting to zookeeper<br>zookeeper.connection.timeout.ms=<span class="hljs-number">6000</span><br><br><br>############################# Group Coordinator Settings #############################<br><br># The following configuration specifies the time, <span class="hljs-keyword">in</span> milliseconds, that the GroupCoordinator will delay the initial consumer rebalance.<br># The rebalance will be further delayed by the value <span class="hljs-keyword">of</span> group.initial.rebalance.delay.ms <span class="hljs-keyword">as</span> new members join the group, up to a maximum <span class="hljs-keyword">of</span> max.poll.interval.ms.<br># The default value for this is <span class="hljs-number">3</span> seconds.<br># We override this to <span class="hljs-number">0</span> here <span class="hljs-keyword">as</span> it makes for a better out-<span class="hljs-keyword">of</span>-the-box experience for development and testing.<br># However, <span class="hljs-keyword">in</span> production environments the default value <span class="hljs-keyword">of</span> <span class="hljs-number">3</span> seconds is more suitable <span class="hljs-keyword">as</span> this will help to avoid unnecessary, and potentially expensive, rebalances during application startup.<br>group.initial.rebalance.delay.ms=<span class="hljs-number">0</span><br><br></code></pre></td></tr></table></figure><h4 id="启动zk"><a href="#启动zk" class="headerlink" title="启动zk"></a>启动zk</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">.<span class="hljs-regexp">/bin/</span>zkServer.sh start<br></code></pre></td></tr></table></figure><h4 id="启动kafka"><a href="#启动kafka" class="headerlink" title="启动kafka"></a>启动kafka</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">nohup ./bin/kafka-<span class="hljs-keyword">server</span>-<span class="hljs-keyword">start</span>.sh config/<span class="hljs-keyword">server</span>.properties &gt; <span class="hljs-keyword">server</span>.<span class="hljs-keyword">out</span> &amp;<br>nohup ./bin/kafka-<span class="hljs-keyword">server</span>-<span class="hljs-keyword">start</span>.sh config/<span class="hljs-keyword">server</span><span class="hljs-number">-1.</span>properties &gt; server1.<span class="hljs-keyword">out</span> &amp;<br>nohup ./bin/kafka-<span class="hljs-keyword">server</span>-<span class="hljs-keyword">start</span>.sh config/<span class="hljs-keyword">server</span><span class="hljs-number">-2.</span>properties &gt; server2.<span class="hljs-keyword">out</span> &amp;<br></code></pre></td></tr></table></figure><h4 id="创建topic"><a href="#创建topic" class="headerlink" title="创建topic"></a>创建topic</h4><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">bin/kafka</span><span class="hljs-literal">-</span><span class="hljs-comment">topics</span><span class="hljs-string">.</span><span class="hljs-comment">sh</span> --<span class="hljs-comment">create</span> --<span class="hljs-comment">zookeeper</span> <span class="hljs-comment">localhost:2181</span> --<span class="hljs-comment">replication</span><span class="hljs-literal">-</span><span class="hljs-comment">factor</span> <span class="hljs-comment">1</span> --<span class="hljs-comment">partitions</span> <span class="hljs-comment">1</span> --<span class="hljs-comment">topic</span> <span class="hljs-comment">kafka</span><span class="hljs-literal">-</span><span class="hljs-comment">stream1</span><br></code></pre></td></tr></table></figure><h4 id="查看topic"><a href="#查看topic" class="headerlink" title="查看topic"></a>查看topic</h4><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-comment"># 查看topic列表</span><br><span class="hljs-string">./bin/kafka-topics.sh</span> <span class="hljs-params">--list</span> <span class="hljs-params">--zookeeper</span> 192.168.186.140<span class="hljs-function">:2181</span><br><span class="hljs-comment"># 查看topic描述</span><br><span class="hljs-string">./bin/kafka-topics.sh</span> <span class="hljs-params">--describe</span> <span class="hljs-params">--zookeeper</span> 192.168.186.140<span class="hljs-function">:2181</span> <span class="hljs-params">--topic</span> kafka-test<br><span class="hljs-comment"># 删除topic</span><br><span class="hljs-string">./bin/kafka-topics.sh</span> <span class="hljs-params">--delete</span> <span class="hljs-params">--zookeeper</span> 192.168.186.140<span class="hljs-function">:2181</span> <span class="hljs-params">--topic</span> topic1<br></code></pre></td></tr></table></figure><h4 id="查看消费者组"><a href="#查看消费者组" class="headerlink" title="查看消费者组"></a>查看消费者组</h4><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">./bin/kafka-consumer-groups.sh</span> <span class="hljs-params">--new-consumer</span> <span class="hljs-params">--bootstrap-server</span> 192.168.186.140<span class="hljs-function">:9092</span> <span class="hljs-params">--list</span><br><br><span class="hljs-comment"># 查看特定组信息</span><br><span class="hljs-string">./bin/kafka-consumer-groups.sh</span> <span class="hljs-params">--bootstrap-server</span> 192.168.186.140<span class="hljs-function">:9092</span> <span class="hljs-params">--group</span> kafka_tran_g1 <span class="hljs-params">--describe</span><br></code></pre></td></tr></table></figure><h4 id="消费者"><a href="#消费者" class="headerlink" title="消费者"></a>消费者</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">./bin/kafka-console-consumer.sh --bootstrap-server <span class="hljs-number">192.168</span><span class="hljs-number">.186</span><span class="hljs-number">.140</span>:<span class="hljs-number">9092</span> --<span class="hljs-keyword">from</span>-beginning --topic kafka-test<br><br>./bin/kafka-console-consumer.sh --bootstrap-server <span class="hljs-number">192.168</span><span class="hljs-number">.186</span><span class="hljs-number">.140</span>:<span class="hljs-number">9092</span> --topic kafka-stream2<br></code></pre></td></tr></table></figure><h4 id="生产者"><a href="#生产者" class="headerlink" title="生产者"></a>生产者</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">./bin/kafka-console-producer.sh --broker-list <span class="hljs-number">192.168</span><span class="hljs-number">.186</span><span class="hljs-number">.140</span>:<span class="hljs-number">9092</span> --topic kafka-stream1<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>Kafka</tag>
      
      <tag>Spring-Boot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker</title>
    <link href="/2020/10/10/Docker/"/>
    <url>/2020/10/10/Docker/</url>
    
    <content type="html"><![CDATA[<h1 id="安装-amp-配置"><a href="#安装-amp-配置" class="headerlink" title="安装&amp;配置"></a>安装&amp;配置</h1><p>安装去官网：<a href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></p><h3 id="换源（vim-etc-docker-daemon-json）"><a href="#换源（vim-etc-docker-daemon-json）" class="headerlink" title="换源（vim /etc/docker/daemon.json）"></a>换源（vim /etc/docker/daemon.json）</h3><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs maxima"><br>&#123;<br>    <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<br>        <span class="hljs-string">&quot;https://docker.1ms.run&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker.xuanyuan.me&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker.xpg666.xyz&quot;</span>,<br>        <span class="hljs-string">&quot;https://dytt.online&quot;</span>,<br>        <span class="hljs-string">&quot;https://lispy.org&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker.xiaogenban1993.com&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker-0.unsee.tech&quot;</span>,<br>        <span class="hljs-string">&quot;https://666860.xyz&quot;</span>,<br>        <span class="hljs-string">&quot;https://hub.rat.dev&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker.m.daocloud.io&quot;</span>,<br>        <span class="hljs-string">&quot;https://dockerproxy.net&quot;</span>,<br>        <span class="hljs-string">&quot;https://demo.52013120.xyz&quot;</span>,<br>        <span class="hljs-string">&quot;https://proxy.vvvv.ee&quot;</span>,<br>        <span class="hljs-string">&quot;https://registry.cyou&quot;</span>,<br>        <span class="hljs-string">&quot;https://hub-mirror.c.163.com&quot;</span>,<br>        <span class="hljs-string">&quot;https://mirror.baidubce.com&quot;</span>,<br>        <span class="hljs-string">&quot;https://dockerhub.icu&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker.registry.cyou&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker-cf.registry.cyou&quot;</span>,<br>        <span class="hljs-string">&quot;https://dockercf.jsdelivr.fyi&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker.jsdelivr.fyi&quot;</span>,<br>        <span class="hljs-string">&quot;https://dockertest.jsdelivr.fyi&quot;</span>,<br>        <span class="hljs-string">&quot;https://mirror.aliyuncs.com&quot;</span>,<br>        <span class="hljs-string">&quot;https://dockerproxy.com&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker.nju.edu.cn&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker.mirrors.sjtug.sjtu.edu.cn&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span>,<br>        <span class="hljs-string">&quot;https://mirror.iscas.ac.cn&quot;</span>,<br>        <span class="hljs-string">&quot;https://docker.rainbond.cc&quot;</span><br>    ]<br>&#125;<br>需要重启<br>systemctl daemon-reload<br>systemctl <span class="hljs-built_in">restart</span> docker<br></code></pre></td></tr></table></figure><h3 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment">#启动服务</span><br><span class="hljs-attr">systemctl</span> <span class="hljs-string">start docker</span><br><span class="hljs-comment">#获取镜像</span><br><span class="hljs-attr">docker</span>  <span class="hljs-string">pull [镜像:xx.xx]</span><br><span class="hljs-meta">//docker</span> <span class="hljs-string">pull mysql:8.0.12</span><br><br><span class="hljs-comment">#列出镜像</span><br><span class="hljs-attr">docker</span> <span class="hljs-string">image ls -a</span><br><br><span class="hljs-comment">#运行容器</span><br><span class="hljs-attr">docker</span> <span class="hljs-string">run [镜像]</span><br><br><span class="hljs-comment">#查看正在运行的容器</span><br><span class="hljs-attr">docker</span> <span class="hljs-string">ps</span><br><br><span class="hljs-comment">#进入交互界面</span><br><span class="hljs-attr">docker</span> <span class="hljs-string">exec -it 【短ID】 /bin/bash</span><br><br><span class="hljs-comment">#查找镜像</span><br><span class="hljs-attr">docker</span> <span class="hljs-string">search [镜像]</span><br><br><span class="hljs-comment">#查看终止状态的容器</span><br><span class="hljs-attr">docker</span> <span class="hljs-string">container ls -a</span><br><br><span class="hljs-comment">#保存容器</span><br><span class="hljs-attr">docker</span> <span class="hljs-string">commit 【短ID】 容器名称:容器版本 </span><br><br><span class="hljs-comment">#删除容器（首先kill运行中的容器然后删除终止状态的容器）</span><br><span class="hljs-attr">docker</span> <span class="hljs-string">kill -s KILL [短ID(终止状态)]</span><br><span class="hljs-attr">docker</span> <span class="hljs-string">container rm 【短ID】来删除一个处于终止状态的容器</span><br><span class="hljs-comment">#清理所有处于终止状态的容器</span><br><span class="hljs-attr">docker</span> <span class="hljs-string">container prune</span><br><span class="hljs-comment">#删除镜像</span><br><span class="hljs-attr">docker</span> <span class="hljs-string">image rm 【短ID】</span><br><br><span class="hljs-comment">#若需要删除所有仓库名为 redis 的镜像：</span><br><span class="hljs-attr">docker</span> <span class="hljs-string">image rm $(docker image ls -q redis)</span><br><br><span class="hljs-comment">#查看容器信息</span><br><span class="hljs-attr">docker</span> <span class="hljs-string">inspect 【短ID】</span><br></code></pre></td></tr></table></figure><h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><p><strong>docker 安装 mysql 8 版本</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># docker 中下载 mysql</span><br>docker pull mysql:8.0.12<br><br><span class="hljs-comment">#启动</span><br>   docker <span class="hljs-builtin-name">run</span> --name mysql  -v D:\DockerImgs\MySQLdatabase:/var/lib/mysql -p 3306:3306 -e <span class="hljs-attribute">MYSQL_ROOT_PASSWORD</span>=root -e <span class="hljs-attribute">MYSQL_DATABASE</span>=inst1 -d mysql:8.0.12<br> <br> <br>--name mysql  将容器命名为mysql，后面可以用这个name进行容器的启动暂停等操作<br>-e <span class="hljs-attribute">MYSQL_ROOT_PASSWORD</span>=123456 设置MySQL密码为123456<br>-d 此容器在后台运行,并且返回容器的ID<br>-i 以交互模式运行容器<br>-p 进行端口映射，格式为主机(宿主)端口:容器端口<br><span class="hljs-attribute">--restart</span>=always 当docker重启时，该容器自动重启<br><br><br><span class="hljs-comment">#进入容器</span><br>docker exec -it mysql bash<br><br><span class="hljs-comment">#登录mysql</span><br>mysql -u root -p<br><br><span class="hljs-comment">#查看表</span><br>show databases;<br><br><span class="hljs-comment">##修改本地连接 </span><br>ALTER<span class="hljs-built_in"> USER </span><span class="hljs-string">&#x27;root&#x27;</span>@localhost IDENTIFIED WITH mysql_native_password BY <span class="hljs-string">&#x27;123456&#x27;</span>;<br>flush privileges;<br><span class="hljs-comment">#远程连接</span><br>ALTER<span class="hljs-built_in"> USER </span><span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> IDENTIFIED WITH mysql_native_password BY <span class="hljs-string">&#x27;123456&#x27;</span>;<br>flush privileges;<br><br><span class="hljs-comment">#挂载到本地（需要授权）</span><br> -v D:\DockerImgs\MySQLdatabase:/var/lib/mysql<br></code></pre></td></tr></table></figure><h3 id="Centos7"><a href="#Centos7" class="headerlink" title="Centos7"></a>Centos7</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># docker 中下载 ubuntu</span><br>docker pull ubuntu:<span class="hljs-number">18.04</span><br><br><span class="hljs-comment">#启动且允许用户进行交互</span><br>docker run --name ubuntu ubuntu:<span class="hljs-number">18.04</span> <span class="hljs-regexp">/usr/</span>sbin/init<br>docker run --privileged --name centos centos <span class="hljs-regexp">/usr/</span>sbin/init<br><span class="hljs-comment">#进入</span><br>docker exec -it centos bash<br><span class="hljs-comment">#查看信息</span><br>root@af8bae53bdd3:<span class="hljs-regexp">/#cat /</span>etc/os-release<br><br><span class="hljs-comment">#安装firewalld 防火墙</span><br>yum install firewalld<br><br><span class="hljs-comment">#安装ifconfig</span><br>yum search ifconfig<br>yum install net-tools.x86_64 -y<br><br><span class="hljs-comment">#设置密码</span><br>passwd    <span class="hljs-comment">#如果没有该命令 使用yum install passwd</span><br><br><span class="hljs-comment">#安装Openssh </span><br>yum -y install openssh-server<br>yum -y install openssh-clients<br><span class="hljs-comment">#修改/etc/ssh/sshd_config配置并保存：</span><br>vi <span class="hljs-regexp">/etc/</span>ssh/sshd_config<br>PermitRootLogin yes    UsePAM no<br><br>port=<span class="hljs-number">22</span> <span class="hljs-comment">#开启22端口</span><br>RSAAuthentication yes <span class="hljs-comment">#启用 RSA 认证</span><br>PubkeyAuthentication yes <span class="hljs-comment">#启用公钥私钥配对认证方式</span><br>AuthorizedKeysFile .ssh/authorized_keys <span class="hljs-comment">#公钥文件路径（和上面生成的文件同）</span><br>PermitRootLogin yes <span class="hljs-comment">#root能使用ssh登录</span><br><br><span class="hljs-comment">#启动ssh服务</span><br>systemctl start sshd<br>systemctl status sshd<br><span class="hljs-comment">#重启ssh服务，并设置开机启动：</span><br>yum install initscripts -y<br>service sshd restart<br>chkconfig sshd on<br><br><span class="hljs-comment">#安装jdk</span><br>查看yum库中的java安装包 ：yum -y list java*<br>yum -y install java-<span class="hljs-number">11</span>-openjdk.x86_64 java-<span class="hljs-number">11</span>-openjdk-devel.x86_64<br><span class="hljs-comment">#安装路径</span><br> cd <span class="hljs-regexp">/usr/</span>lib/jvm<br> <br> <span class="hljs-comment">#安装MySQL</span><br>  yum install wget.x86_64 -y<br>  wget http:<span class="hljs-regexp">//</span>repo.mysql.com/mysql80-community-release-el7-<span class="hljs-number">1</span>.noarch.rpm<br>  yum -y install mysql80-community-release-el7-<span class="hljs-number">1</span>.noarch.rpm<br>  yum -y install mysql-community-server<br>  <br>  <span class="hljs-comment">#查看默认密码</span><br>  grep <span class="hljs-string">&#x27;temporary password&#x27;</span> <span class="hljs-regexp">/var/</span>log/mysqld.log<br>  <span class="hljs-comment">#修改密码</span><br>  ALTER USER <span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="hljs-string">&#x27;Xiao_00oo&#x27;</span>;(过于简单改不了)<br>  <br>  （<br>      ===<span class="hljs-comment">#跳过密码(算了吧)</span><br>      vi <span class="hljs-regexp">/etc/my</span>.cnf <br>      配置文件添加skip-grant-tables <br>      ===<br>  ）<br>  <span class="hljs-comment">#修改远程连接</span><br>  update user set host = <span class="hljs-string">&#x27;%&#x27;</span> where user = <span class="hljs-string">&#x27;root&#x27;</span>;<br>  <br>  <span class="hljs-comment">#保存后重启mysql</span><br>  systemctl restart mysqld<br>  <br>  <span class="hljs-comment">#查看状态</span><br>  systemctl status mysqld<br>  <br>  <span class="hljs-comment">#卸载mysql</span><br>  yum remove mysql mysql-server mysql-libs compat-mysql8<br>  <br>  <span class="hljs-comment">#下载tomcat9</span><br>  wget http:<span class="hljs-regexp">//mi</span>rror.bit.edu.cn<span class="hljs-regexp">/apache/</span>tomcat<span class="hljs-regexp">/tomcat-9/</span>v9.<span class="hljs-number">0.24</span><span class="hljs-regexp">/bin/</span>apache-tomcat-<span class="hljs-number">9.0</span>.<span class="hljs-number">24</span>.tar.gz<br>  <br>  <span class="hljs-comment">#解压</span><br>   tar zxvf apache-tomcat-<span class="hljs-number">9.0</span>.<span class="hljs-number">24</span>.tar.gz<br>  <br>  <span class="hljs-comment">#启动 cd到安装目录 </span><br>  启动服务 ./catlina run<br>  关闭服务 ctrl+c<br>  <br> <span class="hljs-comment">#开端口命令：</span><br>     【单个】<br>    firewall-cmd --zone=public --add-port=<span class="hljs-number">80</span>/tcp --permanent<br>    【范围】<br>    firewall-cmd --zone=public --add-port=<span class="hljs-number">50000</span>-<span class="hljs-number">50100</span>/tcp --permanent<br>    【删除】<br>    firewall-cmd --zone=public --remove-port=<span class="hljs-number">80</span>/tcp --permanent<br> <br> <span class="hljs-comment">#重启防火墙：</span><br>     systemctl restart firewalld.service<br> <br> <span class="hljs-comment">#找出公共区域的所有设置</span><br>     firewall-cmd --zone=public --list-all<br>     firewall-cmd --list-all<br> <span class="hljs-comment">#用于显示 tcp，udp 的端口和进程等相关情况</span><br>     netstat -tunlp <br> <span class="hljs-comment">#后台运行程序并把日志输出到output文件中</span><br> nohup PORT=<span class="hljs-number">9999</span> node app.js &gt;music.txt <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> &amp;<br></code></pre></td></tr></table></figure><h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-comment"># 启动Redis</span><br>    docker run -di <span class="hljs-params">--name</span> myredis -p 6379<span class="hljs-function">:6379</span> redis<br>    docker exec -it myredis redis-cli <br>    <br>docker run <span class="hljs-params">--name</span> myredis -v C:\Users\Admin\Desktop\redis-2.4.5-win32-win64\64bit:<span class="hljs-string">/data</span> -di -p 6379<span class="hljs-function">:6379</span> redis<br>     -p 6379<span class="hljs-function">:6379</span> : 将容器的6379端口映射到主机的6379端口<br><br> -d : 将容器的在后台运行<br><br> -v $PWD/data:<span class="hljs-string">/data</span> : 将主机中当前目录下的data挂载到容器的<span class="hljs-string">/data</span> <span class="hljs-string">.redis</span>数据卷,如未加上这个,容器重启后数据将丢失.<br><br> redis-server <span class="hljs-params">--appendonly</span> yes : 在容器执行redis-server启动命令，并打开redis持久化配置<br><br>  <span class="hljs-params">--requirepass</span> <span class="hljs-string">&quot;ReDis@.1*1PWD&quot;</span>  设置引号里字符为密码<br><br> –restart=always : 随docker启动而启动<br> <br> <br> <br>$ <span class="hljs-keyword">cd</span> src<br>$  <span class="hljs-string">./src/redis-server</span> <span class="hljs-string">./redis.conf</span><br>    <span class="hljs-string">./src/redis-cli</span><br><br></code></pre></td></tr></table></figure><h3 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment">#拉取镜像</span><br>    <span class="hljs-attr">docker</span> <span class="hljs-string">pull tomcat  默认是最新的</span><br>    <span class="hljs-attr">docker</span> <span class="hljs-string">pull tomcat:8  指定版本</span><br><span class="hljs-comment"># 启动</span><br>    <span class="hljs-attr">docker</span> <span class="hljs-string">run -it --rm -p 8888:8080 tomcat  打印日志</span><br>    <span class="hljs-attr">docker</span> <span class="hljs-string">run -it -d -p 8888:8080 tomcat:8  指定版本且后台启动</span><br><span class="hljs-comment"># 访问</span><br>    <span class="hljs-attr">ip</span>:<span class="hljs-string">8888</span><br><span class="hljs-comment">####如果出现404，则</span><br>    <span class="hljs-meta">使用命令</span>: <span class="hljs-string">docker exec -it 运行的tomcat容器ID /bin/bash 进入到tomcat的目录</span><br>    <span class="hljs-meta">使用命令</span>: <span class="hljs-string">ls -l 发现有webapps 和 webapps.dist 两个文件夹</span><br>    <span class="hljs-meta">查看webapps</span> <span class="hljs-string">文件夹，发现里面没有文件，而 webapps.dist 里面有文件</span><br>    <span class="hljs-attr">使用过tomcat的都应该知道，webapps是tomcat存放静态资源的目录</span><br>    <span class="hljs-attr">只要把webapps.dist重命名为webapps就好了</span><br>     <span class="hljs-attr">mv</span> <span class="hljs-string">webapps webapps2</span><br>     <span class="hljs-attr">mv</span> <span class="hljs-string">webapps.dist/ webapps</span><br>    <span class="hljs-attr">再次访问就ok了</span><br></code></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/09/30/tFSDfVOzy4l7MqY.png" alt="image-20200930104659743"></p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-comment">#复制tomcat配置文件和webapps</span><br>     docker cp 【短ID】<span class="hljs-symbol">:/usr/local/tomcat/conf</span> /home/data/tomcat<br>     docker cp 【短ID】<span class="hljs-symbol">:/usr/local/tomcat/conf/webapps</span> /home/data/tomcat<br><span class="hljs-comment">#挂载目录启动      </span><br>    docker run -d --name mytomcat -p <span class="hljs-number">8888:8080</span> -v /home/data/tomcat/conf/<span class="hljs-symbol">:/usr/local/tomcat/conf/</span> -v /home/data/tomcat/webapps/<span class="hljs-symbol">:/usr/local/tomcat/webapps/</span> tomcat<br></code></pre></td></tr></table></figure><h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#获取nginx</span><br>    docker pull nginx<br><span class="hljs-comment">#运行</span><br>    docker run -id -p <span class="hljs-number">82</span>:<span class="hljs-number">80</span> nginx<br><span class="hljs-comment">#访问</span><br>    ip:<span class="hljs-number">82</span><br><span class="hljs-comment">#重启</span><br>    docker restart 【短ID】<br><span class="hljs-comment">#停止</span><br>    docker stop 【短ID】<br><span class="hljs-comment">#复制配置文件夹到服务器---(/home/data需要自己创建)</span><br>    docker cp 【短ID】:<span class="hljs-regexp">/etc/</span>nginx <span class="hljs-regexp">/home/</span>data<br>    docker cp ea14a70c74ab:<span class="hljs-regexp">/etc/</span>nginx <span class="hljs-regexp">/home/</span>data<br><span class="hljs-comment">#挂载容器目录启动nginx容器</span><br>    docker run -id --name mynginx -v <span class="hljs-regexp">/home/</span>data<span class="hljs-regexp">/nginx:/</span>etc/nginx -p <span class="hljs-number">82</span>:<span class="hljs-number">80</span> nginx<br><span class="hljs-comment">#挂载静态资源目录 (/home/data/web)</span><br>    docker run -id --name mynginx -v <span class="hljs-regexp">/home/</span>data<span class="hljs-regexp">/nginx:/</span>etc<span class="hljs-regexp">/nginx -v /</span>home<span class="hljs-regexp">/data/</span>web:<span class="hljs-regexp">/home/</span>data/web -p <span class="hljs-number">82</span>:<span class="hljs-number">80</span> nginx<br><span class="hljs-comment">#访问</span><br>    ip:<span class="hljs-number">82</span><br></code></pre></td></tr></table></figure><h3 id="MinIO-Docker"><a href="#MinIO-Docker" class="headerlink" title="MinIO Docker"></a>MinIO Docker</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># docker安装镜像</span><br>    docker pull minio/minio<br><span class="hljs-comment"># 启动</span><br><br>docker <span class="hljs-builtin-name">run</span> -p 9000:9000 -p 9001:9001 --name minio \<br>  -e <span class="hljs-string">&quot;MINIO_ROOT_USER=Minio_Admin&quot;</span> \<br>  -e <span class="hljs-string">&quot;MINIO_ROOT_PASSWORD=Minio_Admin&quot;</span> \<br>  -v /mnt/minio/data:/data \<br>  -v /mnt/minio/config:/root/.minio \<br>  minio/minio:RELEASE.2021-07-22T05-23-32Z<span class="hljs-built_in"> server </span>/data --console-address <span class="hljs-string">&quot;:9001&quot;</span><br></code></pre></td></tr></table></figure><h3 id="Docker-Build"><a href="#Docker-Build" class="headerlink" title="Docker Build"></a>Docker Build</h3><h4 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h4><h5 id="1-编写Dockerfile"><a href="#1-编写Dockerfile" class="headerlink" title="1.编写Dockerfile"></a>1.编写Dockerfile</h5><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> openjdk:<span class="hljs-number">8</span>u212-jre<br><span class="hljs-keyword">MAINTAINER</span> xxx xxxxx@qq.com<br><br><span class="hljs-keyword">COPY</span><span class="bash"> docker-test.jar /docker/docker-test.jar</span><br><span class="hljs-keyword">ENTRYPOINT</span><span class="bash"> [<span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-string">&quot;-Xmx256m&quot;</span>, <span class="hljs-string">&quot;-jar&quot;</span>, <span class="hljs-string">&quot;/docker/docker-test.jar&quot;</span>]</span><br></code></pre></td></tr></table></figure><ol><li><p><code>FROM openjdk:8u212-jre</code>表示由<code>openjdk:8u212-jre</code>基础镜像构建。因为我们的项目使用的是JDK 1.8，所以我们要依赖于1.8版本的JDK镜像构建，openjdk官方Docker镜像仓库为<a href="https://hub.docker.com/_/openjdk?tab=tags%EF%BC%8C%E6%88%91%E6%8C%91%E4%BA%86%E4%B8%AA%E4%BD%93%E7%A7%AF%E7%9B%B8%E5%AF%B9%E8%BE%83%E5%B0%8F%E7%9A%84openjdk:8u212-jre%EF%BC%9B">https://hub.docker.com/_/openjdk?tab=tags，我挑了个体积相对较小的openjdk:8u212-jre；</a></p></li><li><p><code>MAINTAINER xxx xxxxx@qq.com</code>指定镜像的作者及联系方式；</p></li><li><p><code>COPY docker-test.jar /docker/docker-test.jar</code>表示将当前目录下的docker-test.jar拷贝到<code>openjdk:8u212-jre</code>镜像里的/docker目录下，名称也为docker-test.jar；</p></li><li><p><code>ENTRYPOINT [&quot;java&quot;, &quot;-Xmx256m&quot;, &quot;-jar&quot;, &quot;/docker/docker-test.jar&quot;]</code>表示运行<code>java -jar</code>运行镜像里的jar包，JVM内存最大分配为256m（因为要运行的微服务较多并且虚拟机内存只有6GB，所以内存分配小了点，实际可以根据宿主服务器的配置做出相应调整）。</p></li></ol><h5 id="2-构建镜像"><a href="#2-构建镜像" class="headerlink" title="2.构建镜像"></a>2.构建镜像</h5><p>DockerFile创建好后，在当前目录下运行以下命令构建镜像：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">docker build -t docker-<span class="hljs-keyword">test</span> .<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux安装RabbitMQ</title>
    <link href="/2020/09/22/Centos7%E5%AE%89%E8%A3%85RabbitMQ/"/>
    <url>/2020/09/22/Centos7%E5%AE%89%E8%A3%85RabbitMQ/</url>
    
    <content type="html"><![CDATA[<h5 id="安装Erlang"><a href="#安装Erlang" class="headerlink" title="安装Erlang"></a>安装Erlang</h5><p>RabbitMQ是用Erlang语言编写的，在本教程中我们将安装最新版本的Erlang到服务器中。 Erlang在默认的YUM存储库中不可用，因此您将需要安装EPEL存储库。 运行以下命令相同。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">yum -y <span class="hljs-keyword">install</span> epel-<span class="hljs-keyword">release</span><br><br>yum -y <span class="hljs-keyword">update</span><br></code></pre></td></tr></table></figure><p>现在使用以下命令安装Erlang。</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum -y <span class="hljs-keyword">install</span> erlang socat<br></code></pre></td></tr></table></figure><p>您现在可以使用以下命令检查Erlang版本。</p><p>erl -version</p><p>您将得到以下输出。</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">[<span class="hljs-symbol">root@</span>liptan-pc ~]# erl -version<br>Erlang (ASYNC_THREADS,HIPE) (BEAM) emulator version <span class="hljs-number">5.10</span><span class="hljs-number">.4</span><br></code></pre></td></tr></table></figure><p>要切换到Erlang <a href="https://www.linuxcool.com/">shell</a>，可以键入以下命令。</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">erl</span><br></code></pre></td></tr></table></figure><p>shell将更改，您将得到以下输出。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Erlang</span> R<span class="hljs-number">16</span>B<span class="hljs-number">03</span>-<span class="hljs-number">1</span> (erts-<span class="hljs-number">5</span>.<span class="hljs-number">10</span>.<span class="hljs-number">4</span>)<span class="hljs-meta"> [source] [64-bit] [async-threads:10] [hipe] [kernel-poll:false]</span><br><br><span class="hljs-attribute">Eshell</span> V<span class="hljs-number">5</span>.<span class="hljs-number">10</span>.<span class="hljs-number">4</span>  (abort with ^G)<br><span class="hljs-attribute">1</span>&gt;<br></code></pre></td></tr></table></figure><p>您可以通过按ctrl + C两次退出shell。 Erlang现在安装在系统上，现在可以继续安装RabbitMQ。</p><h5 id="安装RabbitMQ"><a href="#安装RabbitMQ" class="headerlink" title="安装RabbitMQ"></a>安装RabbitMQ</h5><p>RabbitMQ为预编译并可以直接安装的企业<a href="https://www.linuxprobe.com/">Linux系统</a>提供RPM软件包。 唯一需要的依赖是将Erlang安装到系统中。 我们已经安装了Erlang，我们可以进一步下载RabbitMQ。 通过运行下载Erlang RPM软件包。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wget</span> https://www.rabbitmq.com/releases/rabbitmq-server/v<span class="hljs-number">3</span>.<span class="hljs-number">6</span>.<span class="hljs-number">10</span>/rabbitmq-server-<span class="hljs-number">3</span>.<span class="hljs-number">6</span>.<span class="hljs-number">10</span>-<span class="hljs-number">1</span>.el<span class="hljs-number">7</span>.noarch.rpm<br></code></pre></td></tr></table></figure><p>如果你没有安装wget ，可以运行yum -y install wget 。 您可以随时找到最新版本的RabbitMQ下载页面的链接。</p><p>通过运行导入GPG密钥：</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">rpm –<span class="hljs-keyword">import</span> <span class="hljs-attr">https:</span><span class="hljs-comment">//www.rabbitmq.com/rabbitmq-release-signing-key.asc</span><br></code></pre></td></tr></table></figure><p>运行RPM安装RPM包：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">rpm</span> -Uvh rabbitmq-server-<span class="hljs-number">3</span>.<span class="hljs-number">6</span>.<span class="hljs-number">10</span>-<span class="hljs-number">1</span>.el<span class="hljs-number">7</span>.noarch.rpm<br></code></pre></td></tr></table></figure><p>RabbitMQ现已安装在您的系统上。</p><h5 id="开始RabbitMQ"><a href="#开始RabbitMQ" class="headerlink" title="开始RabbitMQ"></a>开始RabbitMQ</h5><p>您可以通过运行以下命令启动RabbitMQ服务器进程。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">systemctl <span class="hljs-keyword">start</span> rabbitmq-<span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><p>要在引导时自动启动RabbitMQ，请运行以下命令。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">systemctl <span class="hljs-keyword">enable</span> rabbitmq-<span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><p>要检查RabbitMQ服务器的状态，请运行：</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">systemctl status rabbitmq-<span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><p>如果启动成功，您应该得到以下输出。</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">? rabbitmq-server.service - RabbitMQ broker<br>   Loaded: loaded (/usr/lib/systemd/system/rabbitmq-server.service; enabled; vendor preset: disabled)<br>   Active: active (running) since Sat <span class="hljs-number">2017</span><span class="hljs-number">-07</span><span class="hljs-number">-15</span> <span class="hljs-number">18</span>:<span class="hljs-number">59</span>:<span class="hljs-number">14</span> UTC; <span class="hljs-number">3</span>min <span class="hljs-number">22</span>s ago<br> Main PID: <span class="hljs-number">29006</span> (beam.smp)<br>   Status: <span class="hljs-string">&quot;Initialized&quot;</span><br>   CGroup: /system.slice/rabbitmq-server.service<br>           ??<span class="hljs-number">29006</span> /usr/lib64/erlang/erts<span class="hljs-number">-9.0</span>/bin/beam.smp -W w -A <span class="hljs-number">64</span> -P <span class="hljs-number">1048576</span> -t <span class="hljs-number">5000000</span> -stbt db -zdbbl <span class="hljs-number">32000</span> -K tr...<br>           ??<span class="hljs-number">29149</span> /usr/lib64/erlang/erts<span class="hljs-number">-9.0</span>/bin/epmd -daemon<br>           ??<span class="hljs-number">29283</span> erl_child_setup <span class="hljs-number">1024</span><br>           ??<span class="hljs-number">29303</span> inet_gethost <span class="hljs-number">4</span><br>           ??<span class="hljs-number">29304</span> inet_gethost <span class="hljs-number">4</span><br><br>Jul <span class="hljs-number">15</span> <span class="hljs-number">18</span>:<span class="hljs-number">59</span>:<span class="hljs-number">13</span> centos rabbitmq-server[<span class="hljs-number">29006</span>]: Starting broker...<br>Jul <span class="hljs-number">15</span> <span class="hljs-number">18</span>:<span class="hljs-number">59</span>:<span class="hljs-number">14</span> centos rabbitmq-server[<span class="hljs-number">29006</span>]: systemd unit <span class="hljs-keyword">for</span> activation check: <span class="hljs-string">&quot;rabbitmq-server.service&quot;</span><br>Jul <span class="hljs-number">15</span> <span class="hljs-number">18</span>:<span class="hljs-number">59</span>:<span class="hljs-number">14</span> centos systemd[<span class="hljs-number">1</span>]: Started RabbitMQ broker.<br>Jul <span class="hljs-number">15</span> <span class="hljs-number">18</span>:<span class="hljs-number">59</span>:<span class="hljs-number">14</span> centos rabbitmq-server[<span class="hljs-number">29006</span>]: completed with <span class="hljs-number">0</span> plugins.<br></code></pre></td></tr></table></figure><h5 id="修改防火墙和SELinux规则"><a href="#修改防火墙和SELinux规则" class="headerlink" title="修改防火墙和SELinux规则"></a>修改防火墙和<a href="/2020/08/10/SELinux/">SELinux规则</a></h5><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><br><span class="hljs-comment">#放行5672和15672两个端口，（--permanent表示永久生效，没有此参数重启后失效）</span><br>firewall-<span class="hljs-keyword">cmd</span><span class="bash"> --zone=public --add-port=5672/tcp --permanent</span><br> <br>firewall-<span class="hljs-keyword">cmd</span><span class="bash"> --zone=public --add-port=15672/tcp --permanent</span><br> <br><span class="hljs-comment">#重载防火墙是设置生效</span><br>firewall-<span class="hljs-keyword">cmd</span><span class="bash"> --reload</span><br> <br><span class="hljs-comment">#查看放行端口列表，此时列表显示如下图</span><br>firewall-<span class="hljs-keyword">cmd</span><span class="bash"> --list-all</span><br></code></pre></td></tr></table></figure><p>如果您启用SELinux，则必须运行以下命令以允许RabbitMQ服务。</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">setsebool -P nis_enabled <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h5 id="访问Web控制台"><a href="#访问Web控制台" class="headerlink" title="访问Web控制台"></a>访问Web控制台</h5><p>启动RabbitMQ Web管理控制台，方法是运行：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">rabbitmq-plugins <span class="hljs-builtin-name">enable</span> rabbitmq_management<br></code></pre></td></tr></table></figure><p>通过运行以下命令，将RabbitMQ文件的所有权提供给RabbitMQ用户：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal">chown -R <span class="hljs-symbol">rabbitmq:</span>rabbitmq /var/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">rabbitmq</span>/</span><br></code></pre></td></tr></table></figure><p>现在，您将需要为RabbitMQ Web管理控制台创建管理用户。 运行以下命令相同。</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-comment">#查看当前用户列表</span><br>rabbitmqctl list_users<br><span class="hljs-comment">#添加admin用户，用户名和密码都为admin </span><br>rabbitmqctl add_user <span class="hljs-literal">admin</span> <span class="hljs-literal">admin</span><br><span class="hljs-comment">#设置admin的角色为administrator</span><br>rabbitmqctl set_user_tags <span class="hljs-literal">admin</span> administrator<br><span class="hljs-comment">#设置admin用户的权限，可访问所有</span><br>rabbitmqctl set_permissions -p / <span class="hljs-literal">admin</span> “.*” “.*” “.*”<br>修改密码<br>rabbitmqctl  change_password  <span class="hljs-literal">admin</span>  <span class="hljs-string">&#x27;Newpassword&#x27;</span><br></code></pre></td></tr></table></figure><p>将管理员更改为管理员用户的首选用户名。 确保将StrongPassword更改为非常强大的密码。</p><p>要访问RabbitMQ的管理面板，请使用您最喜爱的Web浏览器并打开以下URL。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>Your_Server_IP:<span class="hljs-number">15672</span>/<br></code></pre></td></tr></table></figure><h5 id="开启远程访问"><a href="#开启远程访问" class="headerlink" title="开启远程访问"></a>开启远程访问</h5><p>在使用上述新建的账号访问webUI界面可以看到Config file，在overview下面, 如果没有找到配置文件后面会加上（not found）</p><p><img src="https://i.loli.net/2020/09/22/Q1dIyYVlfcCTBJR.png" alt="image-20200922163249512"></p><p>没有就到该目录下新建一个，并开启远程访问（在结合SpringBoot时，RabbitMQ初始化默认是使用guest账户，因此需要给该账户开启远程访问），配置如下</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs prolog">[                                                                                                           &#123; rabbit , [ &#123; tcp_listeners , [ <span class="hljs-number">5672</span> ] &#125; , &#123; loopback_users , [ <span class="hljs-string">&quot;guest&quot;</span> ] &#125; ] &#125;<br>].<br></code></pre></td></tr></table></figure><p><strong>ps：最后的英文句号不能漏掉</strong></p><h5 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h5><p>插件地址： <a href="https://www.rabbitmq.com/community-plugins.html">https://www.rabbitmq.com/community-plugins.html</a></p><p>插件目录：/usr/lib/rabbitmq/lib/rabbitmq_server-<em>version</em>/plugins</p><p>文件拷贝到插件目录后，通过命令<code>sudo rabbitmq-plugins enable plugin-name</code>启用插件。</p><p>至此插件安装完成。</p><p>sudo rabbitmq-plugins list 查看已有插件列表</p>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>Rabbit</tag>
      
      <tag>消息队列</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JDK脚本安装</title>
    <link href="/2020/08/11/JDK%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85/"/>
    <url>/2020/08/11/JDK%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h4 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h4><p><strong>脚本与压缩包同目录</strong></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment">#判断是否安装有openJDK</span><br>yum list installed |grep -e java -e jdk<br><span class="hljs-keyword">if</span> [ $? -eq <span class="hljs-number">0</span> ]<br>then<br>        read -p <span class="hljs-string">&quot;继续执行将卸载已有JDK,y确定，其他退出?&quot;</span> choose<br>        <span class="hljs-keyword">if</span> [ <span class="hljs-variable">$choose</span>==<span class="hljs-string">&quot;y&quot;</span> ]<br>        then<br>                yum -y remove java-* &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>                yum -y remove tzdata-java* &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>        <span class="hljs-keyword">else</span><br>                <span class="hljs-keyword">exit</span> <span class="hljs-number">1</span><br>        fi<br>fi<br><br><span class="hljs-comment">#判断安装包是否存在</span><br><span class="hljs-keyword">if</span> [ -f jdk-<span class="hljs-number">8</span>u261-linux-x64.tar.gz ]<br><span class="hljs-comment">#判断是否已经安装</span><br>then<br>        java &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>        <span class="hljs-keyword">if</span> [ $? -eq <span class="hljs-number">0</span> ]<br>        then<br>                echo <span class="hljs-string">&quot;已经安装JDK&quot;</span><br>                <span class="hljs-keyword">exit</span> <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span><br>                echo <span class="hljs-string">&quot;开始安装JDK&quot;</span><br>                tar zxvf jdk-<span class="hljs-number">8</span>u261-linux-x64.tar.gz -C <span class="hljs-regexp">/usr/</span>local<br>                echo <span class="hljs-string">&quot;JDK安装完成，开始配置环境变量&quot;</span><br>            cat <span class="hljs-regexp">/dev/</span>null &gt; <span class="hljs-regexp">/etc/</span>profile.d/jdkconf.sh<br>                echo <span class="hljs-string">&#x27;export JAVA_HOME=/usr/local/jdk1.8.0_261&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile.d/jdkconf.sh<br>                echo <span class="hljs-string">&#x27;export PATH=$PATH:$JAVA_HOME/bin&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile.d/jdkconf.sh<br>                echo <span class="hljs-string">&#x27;export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile.d/jdkconf.sh<br>                echo <span class="hljs-string">&quot;环境变量配置完成&quot;</span><br>        fi<br><span class="hljs-keyword">else</span><br>        echo <span class="hljs-string">&quot;请将当前shell脚本和安装包放在同一目录&quot;</span><br>fi<br><br>chmod +x <span class="hljs-regexp">/etc/</span>profile.d/jdkconf.sh<br><br>source <span class="hljs-regexp">/etc/</span>profile.d/jdkconf.sh<br><br>echo <span class="hljs-string">&quot;======JDK安装完成，请使用命令：java -version检查是否成功安装,若失败请执行source /etc/profile.d/jdkconf.sh=======&quot;</span><br><br><br><br></code></pre></td></tr></table></figure><h4 id="rpm包"><a href="#rpm包" class="headerlink" title="rpm包"></a>rpm包</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment">#判断是否安装有openJDK</span><br>yum list installed |grep -e java -e jdk<br><span class="hljs-keyword">if</span> [ $? -eq <span class="hljs-number">0</span> ]<br>then<br>        read -p <span class="hljs-string">&quot;继续执行将卸载已有JDK,y确定，其他退出?&quot;</span> choose<br>        <span class="hljs-keyword">if</span> [ <span class="hljs-variable">$choose</span>==<span class="hljs-string">&quot;y&quot;</span> ]<br>        then<br>                yum -y remove java-* &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>                yum -y remove tzdata-java* &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>        <span class="hljs-keyword">else</span><br>                <span class="hljs-keyword">exit</span> <span class="hljs-number">1</span><br>        fi<br>fi<br><br><span class="hljs-comment">#判断安装包是否存在</span><br><span class="hljs-keyword">if</span> [ -f jdk-<span class="hljs-number">8</span>u261-linux-x64.rpm ]<br><span class="hljs-comment">#判断是否已经安装</span><br>then<br>        java &amp;&gt; <span class="hljs-regexp">/dev/</span>null<br>        <span class="hljs-keyword">if</span> [ $? -eq <span class="hljs-number">0</span> ]<br>        then<br>                echo <span class="hljs-string">&quot;已经安装JDK&quot;</span><br>                <span class="hljs-keyword">exit</span> <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span><br>                echo <span class="hljs-string">&quot;开始安装JDK&quot;</span><br>                rpm -ivh jdk-<span class="hljs-number">8</span>u261-linux-x64.rpm &amp;&gt;<span class="hljs-regexp">/dev/</span>null<br>                echo <span class="hljs-string">&quot;JDK安装完成，开始配置环境变量&quot;</span><br>                echo <span class="hljs-string">&#x27;export JAVA_HOME=/usr/java/jdk1.8.0_261-amd64&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile.d/jdkconf.sh<br>                echo <span class="hljs-string">&#x27;export PATH=$JAVA_HOME/bin:$PATH&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile.d/jdkconf.sh<br>                echo <span class="hljs-string">&#x27;export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>profile.d/jdkconf.sh<br>                echo <span class="hljs-string">&quot;环境变量配置完成&quot;</span><br>        fi<br><span class="hljs-keyword">else</span><br>        echo <span class="hljs-string">&quot;请将当前shell脚本和安装包放在同一目录&quot;</span><br>fi<br>chmod +x <span class="hljs-regexp">/etc/</span>profile.d/jdkconf.sh<br><br>sh <span class="hljs-regexp">/etc/</span>profile.d/jdkconf.sh<br><br>echo <span class="hljs-string">&quot;======JDK安装完成，请使用命令：java -version检查是否成功安装=======&quot;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>JDK</tag>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos7安装Node+Npm</title>
    <link href="/2020/08/10/Centos7%E5%AE%89%E8%A3%85Node+Npm/"/>
    <url>/2020/08/10/Centos7%E5%AE%89%E8%A3%85Node+Npm/</url>
    
    <content type="html"><![CDATA[<h4 id="Centos7安装Node-Npm"><a href="#Centos7安装Node-Npm" class="headerlink" title="Centos7安装Node+Npm"></a>Centos7安装Node+Npm</h4><ul><li>node官网下载node（**Linux Binaries (x64)**）安装包 [<a href="https://nodejs.org/zh-cn/download/]">https://nodejs.org/zh-cn/download/]</a></li><li>执行解压操作</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">tar</span> <span class="hljs-selector-tag">-xvf</span> <span class="hljs-selector-tag">node-v10</span><span class="hljs-selector-class">.16</span><span class="hljs-selector-class">.3-linux-x64</span><span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.xz</span> <br></code></pre></td></tr></table></figure><h5 id="确认一下nodejs下bin目录是否有node-和npm文件-如果有执行软连接，如果没有重新下载"><a href="#确认一下nodejs下bin目录是否有node-和npm文件-如果有执行软连接，如果没有重新下载" class="headerlink" title="确认一下nodejs下bin目录是否有node 和npm文件,如果有执行软连接，如果没有重新下载"></a><strong>确认一下nodejs下bin目录是否有node 和npm文件,如果有执行软连接，如果没有重新下载</strong></h5><ul><li>建立软连接，变为全局,对应自己路径</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">ln -s /usr/<span class="hljs-built_in">local</span>/src/node-v10.16.3-linux-x64/bin/npm  /usr/<span class="hljs-built_in">local</span>/bin/(此处不改)<br>ln -s /usr/<span class="hljs-built_in">local</span>/src/node-v10.16.3-linux-x64/bin/node /usr/<span class="hljs-built_in">local</span>/bin/<br></code></pre></td></tr></table></figure><ul><li>验证node是否生效</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs undefined">npm -v <br>node -v<br></code></pre></td></tr></table></figure><h4 id="npm换源"><a href="#npm换源" class="headerlink" title="npm换源"></a>npm换源</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino">npm <span class="hljs-built_in">config</span> <span class="hljs-built_in">set</span> registry https:<span class="hljs-comment">//registry.npmmirror.com</span><br><span class="hljs-comment">// 配置后可通过下面方式来验证是否成功</span><br>npm <span class="hljs-built_in">config</span> <span class="hljs-built_in">get</span> registry<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>node</tag>
      
      <tag>npm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos7搭建FTP</title>
    <link href="/2020/08/10/Centos7%E6%90%AD%E5%BB%BAFTP/"/>
    <url>/2020/08/10/Centos7%E6%90%AD%E5%BB%BAFTP/</url>
    
    <content type="html"><![CDATA[<h4 id="安装前准备"><a href="#安装前准备" class="headerlink" title="安装前准备"></a>安装前准备</h4><p>vsftpd是linux下的一款小巧轻快，安全易用的FTP服务器软件，是一款在各个Linux发行版中最受推崇的FTP服务器软件。</p><p>1.安装vsftpd，直接yum 安装就可以了</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> -y vsftpd<br></code></pre></td></tr></table></figure><p>2.相关配置文件：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/etc/</span>vsftpd/<br></code></pre></td></tr></table></figure><p>3.启动服务</p><p><code>systemctl enable vsftpd.service</code> //设置开机自启动</p><p><code>systemctl start vsftpd.service</code> //启动ftp服务</p><p><code>netstat -antup | grep ftp</code> //查看ftp服务端口</p><p>3.修改相关配置文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/etc/</span>vsftpd/vsftpd.conf<br></code></pre></td></tr></table></figure><h4 id="创建ftp本地用户"><a href="#创建ftp本地用户" class="headerlink" title="创建ftp本地用户"></a>创建ftp本地用户</h4><p>1.创建用户并指定目录</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">useradd -d <span class="hljs-regexp">/data/</span>ftp ftpuser  <span class="hljs-comment">#目录自己创建  </span><br>passwd ftpuser  <span class="hljs-comment">#(回车)给用户ftpuser设置登录密码</span><br></code></pre></td></tr></table></figure><p>2.修改配置文件</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">userlist_enable</span>=<span class="hljs-literal">YES</span>     <span class="hljs-comment">#启动用户列表</span><br><span class="hljs-attr">userlist_deny</span>=<span class="hljs-literal">NO</span>        <span class="hljs-comment">#决定是否对用户列表的用户拒绝访问ftp </span><br><span class="hljs-attr">userlist_file</span>=/etc/vsftpd/user_list<br></code></pre></td></tr></table></figure><p>3.在user_list中写入 ftp这个用户</p><p>4.配置vsftpd.conf 锁定根目录</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">local_root</span>= /var/www        <span class="hljs-comment">#本地用户登录后自动转到的ftp根目录</span><br><span class="hljs-attr">chroot_local_user</span>=<span class="hljs-literal">YES</span>       <span class="hljs-comment">#将所有用户限定在指定的主目录内</span><br><span class="hljs-attr">chroot_list_enable</span>=<span class="hljs-literal">NO</span>       <span class="hljs-comment">#不启用列外的用户列表</span><br><span class="hljs-attr">chroot_list_file</span>=/etc/vsftpd/chroot_list  <span class="hljs-comment">#指定列外的用户列表文件 此文件是让用户登录后可以查看其他目录，若要使用户仅在指定的ftp目录，该文件就不要填写该用户,若没有该文件则新建</span><br></code></pre></td></tr></table></figure><p>5.修改ftp目录的权限,将用户添加到root组</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">usermod</span> <span class="hljs-string">-g root ftpuser</span><br><span class="hljs-attr">chown</span> <span class="hljs-string">ftpuser:root /data/ftp</span><br><span class="hljs-attr">！！添加到root用户组后需要修改配置文件，加上以下配置：</span><br><span class="hljs-attr">allow_writeable_chroot</span>=<span class="hljs-string">YES</span><br></code></pre></td></tr></table></figure><h4 id="参考配置（vsftpd-conf）"><a href="#参考配置（vsftpd-conf）" class="headerlink" title="参考配置（vsftpd.conf）"></a>参考配置（vsftpd.conf）</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">anonymous_enable</span>=<span class="hljs-literal">NO</span><br><span class="hljs-attr">local_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">write_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">local_umask</span>=<span class="hljs-number">000</span><br><span class="hljs-attr">dirmessage_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">xferlog_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">connect_from_port_20</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">xferlog_std_format</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">chroot_local_user</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">chroot_list_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">chroot_list_file</span>=/etc/vsftpd/chroot_list<br><span class="hljs-attr">listen</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">listen_ipv6</span>=<span class="hljs-literal">NO</span><br><span class="hljs-attr">pam_service_name</span>=vsftpd<br><span class="hljs-attr">tcp_wrappers</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">userlist_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">userlist_deny</span>=<span class="hljs-literal">NO</span><br><span class="hljs-attr">userlist_file</span>=/etc/vsftpd/user_list<br><span class="hljs-comment">#目录自己创建，记得对应新建用户时的用户目录</span><br><span class="hljs-attr">local_root</span>= /data/ftp<br><span class="hljs-attr">allow_writeable_chroot</span>=<span class="hljs-literal">YES</span><br><span class="hljs-attr">pasv_enable</span>=<span class="hljs-literal">YES</span><br><span class="hljs-comment">#被动模式端口范围</span><br><span class="hljs-attr">pasv_min_port</span>=<span class="hljs-number">30000</span><br><span class="hljs-attr">pasv_max_port</span>=<span class="hljs-number">30999</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>ftp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos7常用命令</title>
    <link href="/2020/08/10/Centos7%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <url>/2020/08/10/Centos7%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h4 id="开端口"><a href="#开端口" class="headerlink" title="开端口"></a>开端口</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs routeros">【单个】<br>firewall-cmd <span class="hljs-attribute">--zone</span>=public <span class="hljs-attribute">--add-port</span>=2181/tcp --permanent<br>【范围】<br>firewall-cmd <span class="hljs-attribute">--zone</span>=public <span class="hljs-attribute">--add-port</span>=30000-30999/tcp --permanent<br>【删除】<br>firewall-cmd <span class="hljs-attribute">--zone</span>=public <span class="hljs-attribute">--remove-port</span>=8080/tcp --permanent<br>【刷新配置】<br>firewall-cmd --reload<br><span class="hljs-comment">#找出公共区域的所有设置</span><br>firewall-cmd <span class="hljs-attribute">--zone</span>=public --list-all<br>firewall-cmd --list-all<br></code></pre></td></tr></table></figure><h4 id="重启防火墙："><a href="#重启防火墙：" class="headerlink" title="重启防火墙："></a>重启防火墙：</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">systemctl</span> <span class="hljs-selector-tag">restart</span> <span class="hljs-selector-tag">firewalld</span><span class="hljs-selector-class">.service</span><br><span class="hljs-selector-tag">systemctl</span> <span class="hljs-selector-tag">stop</span> <span class="hljs-selector-tag">firewalld</span><span class="hljs-selector-class">.service</span><br></code></pre></td></tr></table></figure><h4 id="开机启动配置"><a href="#开机启动配置" class="headerlink" title="开机启动配置"></a>开机启动配置</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs applescript">/etc/rc.<span class="hljs-keyword">local</span><br>可加入命令，如：nohup java -jar <span class="hljs-built_in">text</span>.jar<br></code></pre></td></tr></table></figure><h4 id="shell脚本执行报错（-bin-bash-M-坏的解释器-没有那个文件或目录）"><a href="#shell脚本执行报错（-bin-bash-M-坏的解释器-没有那个文件或目录）" class="headerlink" title="shell脚本执行报错（ /bin/bash^M: 坏的解释器: 没有那个文件或目录）"></a>shell脚本执行报错（ /bin/bash^M: 坏的解释器: 没有那个文件或目录）</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">sed -i <span class="hljs-string">&quot;s/\r//&quot;</span> <span class="hljs-keyword">install</span>.sh<br></code></pre></td></tr></table></figure><h4 id="查看系统版本"><a href="#查看系统版本" class="headerlink" title="查看系统版本"></a>查看系统版本</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/proc/</span>version<br>cat <span class="hljs-regexp">/etc/</span>redhat-release<br></code></pre></td></tr></table></figure><h4 id="查看文件-文件夹大小"><a href="#查看文件-文件夹大小" class="headerlink" title="查看文件/文件夹大小"></a>查看文件/文件夹大小</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata">指定目录的总大小，可以使用 du -<span class="hljs-keyword">sh</span> 目录名称，du -<span class="hljs-keyword">sh</span> <span class="hljs-keyword">test</span>/ 或 du -<span class="hljs-keyword">h</span> <span class="hljs-keyword">test</span>/<br>当前目录大小 du -<span class="hljs-keyword">sh</span> 或  du -<span class="hljs-keyword">h</span><br>文件大小 du -<span class="hljs-keyword">h</span> index.html<br></code></pre></td></tr></table></figure><h4 id="查看系统时间"><a href="#查看系统时间" class="headerlink" title="查看系统时间"></a>查看系统时间</h4><ul><li>查看系统时间的命令： date</li></ul><h4 id="查看硬件时间"><a href="#查看硬件时间" class="headerlink" title="查看硬件时间"></a>查看硬件时间</h4><ul><li>查看硬件时间的命令：  hwclock</li></ul><h4 id="时间服务器上的时间同步的方法"><a href="#时间服务器上的时间同步的方法" class="headerlink" title="时间服务器上的时间同步的方法"></a>时间服务器上的时间同步的方法</h4><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vala">安装ntpdate工具<br><span class="hljs-meta"># yum -y install ntp ntpdate</span><br><br>设置系统时间与网络时间同步<br><span class="hljs-meta"># ntpdate cn.pool.ntp.org</span><br><br>将系统时间写入硬件时间<br><span class="hljs-meta"># hwclock --systohc</span><br></code></pre></td></tr></table></figure><h4 id="安装net-tools"><a href="#安装net-tools" class="headerlink" title="安装net-tools"></a>安装net-tools</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">yum</span> install -y net-tools.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span> <br></code></pre></td></tr></table></figure><h4 id="安装lrzsz"><a href="#安装lrzsz" class="headerlink" title="安装lrzsz"></a>安装lrzsz</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum -y <span class="hljs-keyword">install</span> lrzsz<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CentOS 7中添加一个新用户并授权</title>
    <link href="/2020/08/10/Centos7%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7/"/>
    <url>/2020/08/10/Centos7%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7/</url>
    
    <content type="html"><![CDATA[<h1 id="CentOS-7中添加一个新用户并授权"><a href="#CentOS-7中添加一个新用户并授权" class="headerlink" title="CentOS 7中添加一个新用户并授权"></a>CentOS 7中添加一个新用户并授权</h1><h2 id="创建新用户"><a href="#创建新用户" class="headerlink" title="创建新用户"></a>创建新用户</h2><p>创建一个用户名为：linuxidc</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># adduser linuxidc</span><br></code></pre></td></tr></table></figure><p>为这个用户初始化密码，linux会判断密码复杂度，不过可以强行忽略：</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@localhost</span> ~]<span class="hljs-meta"># passwd linuxidc</span><br>更改用户 zhangbiao 的密码 。<br>新的 密码：<br>无效的密码： 密码未通过字典检查 - 过于简单化/系统化<br>重新输入新的 密码：<br>passwd：所有的身份验证令牌已经成功更新。<br></code></pre></td></tr></table></figure><h2 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h2><p>个人用户的权限只可以在本home下有完整权限，其他目录要看别人授权。而经常需要root用户的权限，这时候sudo可以化身为root来操作。我记得我曾经sudo创建了文件，然后发现自己并没有读写权限，因为查看权限是root创建的。</p><p>新创建的用户并不能使用sudo命令，需要给他添加授权。</p><p>sudo命令的授权管理是在sudoers文件里的。可以看看sudoers：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">[root@localhost ~]<span class="hljs-comment"># sudoers</span><br>bash: sudoers: 未找到命令...<br>[root@localhost ~]<span class="hljs-comment"># whereis sudoers</span><br>sudoers: <span class="hljs-regexp">/etc/</span>sudoers <span class="hljs-regexp">/etc/</span>sudoers.d <span class="hljs-regexp">/usr/</span>libexec<span class="hljs-regexp">/sudoers.so /u</span>sr<span class="hljs-regexp">/share/m</span>an<span class="hljs-regexp">/man5/</span>sudoers.<span class="hljs-number">5</span>.gz<br></code></pre></td></tr></table></figure><p>找到这个文件位置之后再查看权限：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">[<span class="hljs-symbol">root@</span>localhost ~]# ls -l /etc/sudoers<br>-r--r----- <span class="hljs-number">1</span> root root <span class="hljs-number">4251</span> <span class="hljs-number">9</span>月  <span class="hljs-number">25</span> <span class="hljs-number">15</span>:<span class="hljs-number">08</span> /etc/sudoers<br></code></pre></td></tr></table></figure><p>是的，只有只读的权限，如果想要修改的话，需要先添加w权限：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[root@localhost ~]<span class="hljs-comment"># chmod -v u+w /etc/sudoers</span><br>mode <span class="hljs-keyword">of</span> <span class="hljs-string">&quot;/etc/sudoers&quot;</span> changed <span class="hljs-keyword">from</span> <span class="hljs-number">0440</span> (r--r-----) <span class="hljs-keyword">to</span> <span class="hljs-number">0640</span> (rw-r-----)<br></code></pre></td></tr></table></figure><p>然后就可以添加内容了，在下面的一行下追加新增的用户：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">[root@localhost ~]# vim /etc/sudoers<br><br><br>## Allow root <span class="hljs-keyword">to</span> run <span class="hljs-keyword">any</span> commands anywher  <br>root    <span class="hljs-keyword">ALL</span>=(<span class="hljs-keyword">ALL</span>)       <span class="hljs-keyword">ALL</span>  <br>linuxidc  <span class="hljs-keyword">ALL</span>=(<span class="hljs-keyword">ALL</span>)       <span class="hljs-keyword">ALL</span>  #这个是新增的用户<br> 默认<span class="hljs-number">5</span>分钟后刚才输入的sudo密码过期，下次sudo需要重新输入密码，如果觉得在sudo的时候输入密码麻烦，把刚才的输入换成如下内容即可：<br>linuxidc <span class="hljs-keyword">ALL</span>=(<span class="hljs-keyword">ALL</span>) NOPASSWD:<span class="hljs-keyword">ALL</span><br></code></pre></td></tr></table></figure><p>wq保存退出，这时候要记得将写权限收回：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livescript">[root@localhost ~]<span class="hljs-comment"># chmod -v u-w /etc/sudoers</span><br>mode <span class="hljs-keyword">of</span> <span class="hljs-string">&quot;/etc/sudoers&quot;</span> changed <span class="hljs-keyword">from</span> <span class="hljs-number">0640</span> (rw-r-----) <span class="hljs-keyword">to</span> <span class="hljs-number">0440</span> (r--r-----)<br></code></pre></td></tr></table></figure><p>这时候使用新用户登录，使用sudo：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros">[linuxidc@localhost ~]$ sudo cat /etc/passwd<br>[sudo] password <span class="hljs-keyword">for</span> linuxidc: <br><br>We trust you have received the usual lecture <span class="hljs-keyword">from</span> the local System<br>Administrator. It usually boils down <span class="hljs-keyword">to</span> these three things:<br><br>    #1) Respect the privacy of others.<br>    #2) Think before you type.<br>    #3) With great power comes great responsibility.<br></code></pre></td></tr></table></figure><p>第一次使用会提示你，你已经化身超人，身负责任。而且需要输入密码才可以下一步。如果不想需要输入密码怎么办，将最后一个ALL修改成NOPASSWD: ALL。</p>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Consul</title>
    <link href="/2020/08/10/Consul/"/>
    <url>/2020/08/10/Consul/</url>
    
    <content type="html"><![CDATA[<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>1.下载</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wget</span> https://releases.hashicorp.com/consul/<span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">3</span>/consul_<span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">3</span>_linux_amd<span class="hljs-number">64</span>.zip <br><span class="hljs-attribute">curl</span> https://releases.hashicorp.com/consul/<span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">3</span>/consul_<span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">3</span>_linux_amd<span class="hljs-number">64</span>.zip &gt; consul.zip<br></code></pre></td></tr></table></figure><p><strong>ps:下载过慢请试着直接浏览器下载，再用FTP工具上传至服务器</strong></p><p>2.解压</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-number">1.</span>安装unzip<br>    yum -y install zip unzip<br><span class="hljs-number">2.</span>解压<br>    unzip consul.zip<br></code></pre></td></tr></table></figure><h4 id="ui界面启动"><a href="#ui界面启动" class="headerlink" title="ui界面启动"></a>ui界面启动</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">./consul agent -dev  -client <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span> -ui<br>访问 IP:<span class="hljs-number">8500</span><br>记得开端口，或者把防火墙关闭<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>Consul</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mongo常用查询</title>
    <link href="/2020/08/10/Mongo%E5%B8%B8%E7%94%A8%E6%9F%A5%E8%AF%A2/"/>
    <url>/2020/08/10/Mongo%E5%B8%B8%E7%94%A8%E6%9F%A5%E8%AF%A2/</url>
    
    <content type="html"><![CDATA[<h4 id="查询并显示集合中的数据"><a href="#查询并显示集合中的数据" class="headerlink" title="查询并显示集合中的数据"></a>查询并显示集合中的数据</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.getCollection(<span class="hljs-string">&#x27;pixiv&#x27;</span>).aggregate([<br>    &#123; <span class="hljs-attr">$group</span>: &#123; <span class="hljs-attr">_id</span> : <span class="hljs-string">&#x27;$author.id&#x27;</span>, <span class="hljs-attr">count</span>: &#123; <span class="hljs-attr">$sum</span> : <span class="hljs-number">1</span> &#125; &#125; &#125;,<br>    &#123; <span class="hljs-attr">$match</span>: &#123; <span class="hljs-attr">count</span>: &#123; <span class="hljs-attr">$gt</span> : <span class="hljs-number">1</span>&#125; &#125; &#125;<br>])<br></code></pre></td></tr></table></figure><h4 id="查询条件为数据中对象某个属性值"><a href="#查询条件为数据中对象某个属性值" class="headerlink" title="查询条件为数据中对象某个属性值"></a>查询条件为数据中对象某个属性值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.getCollection(<span class="hljs-string">&#x27;pixiv&#x27;</span>).find(&#123;<span class="hljs-string">&quot;author.id&quot;</span>:<span class="hljs-number">35562628</span>&#125;)<br></code></pre></td></tr></table></figure><h4 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">db.getCollection(<span class="hljs-string">&#x27;pixiv&#x27;</span>).find(&#123;<span class="hljs-string">&quot;author.name&quot;</span><span class="hljs-symbol">:/Rella/</span>&#125;)<br></code></pre></td></tr></table></figure><h4 id="匹配删除"><a href="#匹配删除" class="headerlink" title="匹配删除"></a>匹配删除</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">db</span>.getCollection(<span class="hljs-string">&quot;Rainbow&quot;</span>).remove(&#123;<span class="hljs-string">&quot;content&quot;</span>:&#123;$regex:/^访问太频繁服务器受不了啦/&#125;&#125;)<br><span class="hljs-attribute">db</span>.getCollection(<span class="hljs-string">&quot;job&quot;</span>).deleteMany(&#123;&#x27;md<span class="hljs-number">5</span>&#x27;:&#x27;f<span class="hljs-number">78</span>f<span class="hljs-number">90</span>cbb<span class="hljs-number">3</span>f<span class="hljs-number">3</span>ebe<span class="hljs-number">5</span>a<span class="hljs-number">2</span>a<span class="hljs-number">6931</span>f<span class="hljs-number">3</span>c<span class="hljs-number">6156</span>ee&#x27;&#125;)<br></code></pre></td></tr></table></figure><h4 id="命令导出数据库"><a href="#命令导出数据库" class="headerlink" title="命令导出数据库"></a>命令导出数据库</h4><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">./mongoexport</span> -h 127.0.0.1 <span class="hljs-params">--port</span> 50003 -d Images -c picjson -o <span class="hljs-string">/home/picjson.js</span> <span class="hljs-params">--type</span> json -f <span class="hljs-string">&quot;_id,tags,pid,p,uid,title,author,url,r18,width,height,_v&quot;</span><br></code></pre></td></tr></table></figure><h4 id="命令导入数据库"><a href="#命令导入数据库" class="headerlink" title="命令导入数据库"></a>命令导入数据库</h4><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">./mongoimport</span> -h 127.0.0.1 <span class="hljs-params">--port</span> 50003 -d Pixiv -c picjson <span class="hljs-params">--file</span> <span class="hljs-string">/home/picjson.js</span> <span class="hljs-params">--type</span> json<br></code></pre></td></tr></table></figure><h4 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain"><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>mongodb</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux安装MongoDB</title>
    <link href="/2020/08/10/MongoDB/"/>
    <url>/2020/08/10/MongoDB/</url>
    
    <content type="html"><![CDATA[<h2 id="1-下载"><a href="#1-下载" class="headerlink" title="1.下载"></a>1.下载</h2><p>　　官方下载地址：<a href="https://www.mongodb.com/download-center/community">https://www.mongodb.com/download-center/community</a></p><h2 id="2-上传解压"><a href="#2-上传解压" class="headerlink" title="2.上传解压"></a>2.上传解压</h2><h3 id="1-使用工具（FileZilla）上传至服务器"><a href="#1-使用工具（FileZilla）上传至服务器" class="headerlink" title="　　1.使用工具（FileZilla）上传至服务器"></a>　　1.使用工具（FileZilla）上传至服务器</h3><p>　　<img src="https://i.loli.net/2020/08/10/1EluM4Qy2CVPpZ6.png" alt="img"></p><h3 id="2-解压安装"><a href="#2-解压安装" class="headerlink" title="　　2.解压安装"></a>　　2.解压安装</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">解压：tar -zxvf mongodb-linux-x86_64<span class="hljs-number">-4.0</span><span class="hljs-number">.6</span>.tgz<br>移动：mv ./mongodb-linux-x86_64<span class="hljs-number">-4.0</span><span class="hljs-number">.6</span> /usr/local/mongodb<br></code></pre></td></tr></table></figure><p>　　<img src="https://i.loli.net/2020/12/18/glJos1c4pRftZeq.png" alt="img"></p><h2 id="3-配置conf与目录"><a href="#3-配置conf与目录" class="headerlink" title="3.配置conf与目录"></a>3.配置conf与目录</h2><h3 id="1-进入mongodb目录"><a href="#1-进入mongodb目录" class="headerlink" title="　　1.进入mongodb目录　　　"></a>　　1.进入mongodb目录　　　</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/mongodb/</span><br></code></pre></td></tr></table></figure><p>　　　　<img src="https://i.loli.net/2020/12/18/uta8KDdAFbHUhep.png" alt="img"></p><h3 id="2-创建db目录和日志文件"><a href="#2-创建db目录和日志文件" class="headerlink" title="　　2.创建db目录和日志文件　　"></a>　　2.创建db目录和日志文件　　</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir -p .<span class="hljs-regexp">/data/</span>db<br>mkdir -p ./logs<br>touch .<span class="hljs-regexp">/logs/m</span>ongodb.log<br></code></pre></td></tr></table></figure><p>　　　　<img src="https://i.loli.net/2020/12/18/KJgWeotVpI2Da35.png" alt="img"></p><h3 id="3-创建mongodb-conf文件"><a href="#3-创建mongodb-conf文件" class="headerlink" title="　　3.创建mongodb.conf文件"></a>　　3.创建mongodb.conf文件</h3><p>　　　　<strong>vim mongodb.conf</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment">#端口号</span><br><span class="hljs-attr">port</span>=<span class="hljs-number">27017</span><br><span class="hljs-comment">#db目录</span><br><span class="hljs-attr">dbpath</span>=/usr/local/mongodb/data/db<br><span class="hljs-comment">#日志目录</span><br><span class="hljs-attr">logpath</span>=//usr/local/mongodb/logs/mongodb.log<br><span class="hljs-comment">#后台</span><br><span class="hljs-attr">fork</span>=<span class="hljs-literal">true</span><br><span class="hljs-comment">#日志输出</span><br><span class="hljs-attr">logappend</span>=<span class="hljs-literal">true</span><br><span class="hljs-comment">#允许远程IP连接</span><br><span class="hljs-attr">bind_ip</span>=<span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span><br></code></pre></td></tr></table></figure><h2 id="4-启动测试"><a href="#4-启动测试" class="headerlink" title="4.启动测试"></a>4.启动测试</h2><h3 id="1-启动"><a href="#1-启动" class="headerlink" title="　　1.启动　"></a>　　1.启动　</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">.<span class="hljs-regexp">/bin/m</span>ongod --config mongodb.conf<br></code></pre></td></tr></table></figure><p> 　<img src="https://i.loli.net/2020/12/18/xtuVGrRTWA1BelK.png" alt="img"></p><h3 id="2-连接"><a href="#2-连接" class="headerlink" title="　　2.连接　"></a>　　2.连接　</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">.<span class="hljs-regexp">/bin/m</span>ongo  --默认端口<span class="hljs-number">27017</span><br>.<span class="hljs-regexp">/bin/m</span>ongo localhost:<span class="hljs-number">23234</span>  --指定端口，需要与配置的端口号一致<br></code></pre></td></tr></table></figure><p>　　<img src="https://i.loli.net/2020/12/18/F8DEWIfRJ9d7C4i.png" alt="img"></p><h3 id="3-测试"><a href="#3-测试" class="headerlink" title="　　3.测试　　"></a>　　3.测试　　<img src="https://i.loli.net/2020/12/18/xIGOgkawAnuHLlQ.png" alt="img"></h3><hr><p><strong>到此就可以使用了。</strong></p><h2 id="5-配置mongodb服务开机启动"><a href="#5-配置mongodb服务开机启动" class="headerlink" title="5.配置mongodb服务开机启动"></a>5.配置mongodb服务开机启动</h2><h3 id="1-设置mongodb-service开机服务启动"><a href="#1-设置mongodb-service开机服务启动" class="headerlink" title="1.设置mongodb.service开机服务启动"></a>1.设置mongodb.service开机服务启动</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs routeros">cd /lib/systemd/system<br>vim mongodb.service<br><br>添加如下配置--记得路径和自己的配置路径要一致<br><br>[Unit]<br><span class="hljs-attribute">Description</span>=mongodb<br><span class="hljs-attribute">After</span>=network.target remote-fs.target nss-lookup.target<br><br>[Service]<br><span class="hljs-attribute">Type</span>=forking<br><span class="hljs-attribute">ExecStart</span>=/usr/local/mongodb/mongodb/bin/mongod --config /usr/local/mongodb/mongodb/mongodb.conf<br><span class="hljs-attribute">ExecReload</span>=/bin/kill -s HUP <span class="hljs-variable">$MAINPID</span><br><span class="hljs-attribute">ExecStop</span>=/usr/local/mongodb/mongodb/bin/mongod --shutdown --config /usr/local/mongodb/mongodb/mongodb.conf<br><span class="hljs-attribute">PrivateTmp</span>=<span class="hljs-literal">true</span><br><br>[Install]<br><span class="hljs-attribute">WantedBy</span>=multi-user.target<br><br></code></pre></td></tr></table></figure><p>   然后设置mongodb.service权限</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">chmod</span> +<span class="hljs-selector-tag">x</span> <span class="hljs-selector-tag">mongodb</span><span class="hljs-selector-class">.service</span><br></code></pre></td></tr></table></figure><p>​    #启动服务 </p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">systemctl <span class="hljs-literal">start</span> mongodb.service  <br></code></pre></td></tr></table></figure><p>   #停止服务</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">systemctl <span class="hljs-built_in">stop</span> mongodb.service<br></code></pre></td></tr></table></figure><p>   #添加开机自启动</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">systemctl <span class="hljs-builtin-name">enable</span> mongodb.service<br></code></pre></td></tr></table></figure><p>   #重启服务</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">systemctl</span> <span class="hljs-selector-tag">restart</span> <span class="hljs-selector-tag">mongodb</span><span class="hljs-selector-class">.service</span><br></code></pre></td></tr></table></figure><h3 id="2）添加环境变量"><a href="#2）添加环境变量" class="headerlink" title="2）添加环境变量"></a>2）添加环境变量</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs routeros">1、直接用export命令：<br>   <span class="hljs-builtin-name">export</span>  <span class="hljs-attribute">PATH</span>=<span class="hljs-variable">$PATH</span>:/usr/local/mongodb/bin<br>2、修改profile文件：<br>   cat &gt;&gt;/etc/profile&lt;&lt;<span class="hljs-string">&quot;EOF&quot;</span><br>   <span class="hljs-builtin-name">export</span> <span class="hljs-attribute">PATH</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$PATH</span>:/usr/local/mongodb/bin&quot;</span><br>   EOF<br><br>   刷新profile文件：<br>   source /etc/profile<br>   <br>3、 修改.bashrc文件：<br>     cat &gt;&gt;/root/.bashrc&lt;&lt;<span class="hljs-string">&quot;EOF&quot;</span><br>       <span class="hljs-builtin-name">export</span> <span class="hljs-attribute">PATH</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$PATH</span>:/usr/local/mongodb/bin&quot;</span><br>       EOF<br></code></pre></td></tr></table></figure><p>   上述三步依次执行完毕，环境变量配置完成！！！！</p><p>   重启服务器，输入mongo 回车就有了。。。。。</p>]]></content>
    
    
    
    <tags>
      
      <tag>mongo</tag>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySQ5.7脚本安装</title>
    <link href="/2020/08/10/Mysql5.7%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85/"/>
    <url>/2020/08/10/Mysql5.7%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h4 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment">#压缩包目录</span><br>data=<span class="hljs-string">&quot;home/mysql&quot;</span><br><br>echo <span class="hljs-string">&quot;将mysql压缩包解压&quot;</span><br><br>tar xvf mysql-<span class="hljs-number">5.7</span>.<span class="hljs-number">30</span>-linux-glibc2.<span class="hljs-number">12</span>-x86_64.tar.gz <br><br>echo <span class="hljs-string">&quot;新建mysql文件夹&quot;</span><br><span class="hljs-keyword">if</span> [ ! -d <span class="hljs-string">&quot;/&quot;</span><span class="hljs-variable">$&#123;data&#125;</span><span class="hljs-string">&quot;/mysql-5.7.30-linux-glibc2.12-x86_64&quot;</span> ]; then<br>        echo <span class="hljs-string">&quot;mysql解压未完成&quot;</span><br>        <span class="hljs-keyword">exit</span><br>fi<br><br>echo <span class="hljs-string">&quot;mysql解压完成修改文件夹&quot;</span><br><br>mv mysql-<span class="hljs-number">5.7</span>.<span class="hljs-number">30</span>-linux-glibc2.<span class="hljs-number">12</span>-x86_64 mysql<br><br>mv mysql <span class="hljs-regexp">/usr/</span>local<br><br>echo <span class="hljs-string">&quot;mysql解压完成&quot;</span><br><br>echo <span class="hljs-string">&quot;切换目录&quot;</span><br><br>cd <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/mysql/</span><br><br>echo <span class="hljs-string">&quot;新建数据库data目录&quot;</span><br><br>mkdir data<br><br>echo <span class="hljs-string">&quot;初始化mysql&quot;</span><br><br>cd <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/mysql/</span><br><br>bin<span class="hljs-regexp">/mysqld --initialize --user=root --basedir=/u</span>sr<span class="hljs-regexp">/local/my</span>sql --datadir=<span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/mysql/</span>data<br><br><br>echo <span class="hljs-string">&quot;修改配置文件&quot;</span><br>cat <span class="hljs-regexp">/dev/</span>null &gt; <span class="hljs-regexp">/etc/my</span>.cnf<br><span class="hljs-keyword">if</span> [ -f <span class="hljs-string">&quot;/etc/my.cnf&quot;</span> ]; then<br>        mv <span class="hljs-regexp">/etc/my</span>.cnf <span class="hljs-regexp">/etc/my</span>.cnf.bak<br>fi<br><br><span class="hljs-comment">#跳过密码验证</span><br>echo <span class="hljs-string">&#x27;[mysqld]&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;bind-address=0.0.0.0&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;basedir = /usr/local/mysql&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;datadir = /usr/local/mysql/data&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;socket=/tmp/mysql.sock&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;user=root&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;port=3306&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;character-set-server=utf8&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br><span class="hljs-comment">#echo &#x27;skip-grant-tables&#x27; &gt;&gt; /etc/my.cnf</span><br>echo <span class="hljs-string">&#x27;# Disabling symbolic-links is recommended to prevent assorted security risks&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;symbolic-links=0&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;# skip-grant-tables&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;[mysqld_safe]&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;log-error=/var/log/mysqld.log&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;pid-file=/var/run/mysqld/mysqld.pid&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;!includedir /etc/my.cnf.d&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;[client]&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;user=root&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;password=123456&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;port=3306&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br><br><br><br>echo <span class="hljs-string">&quot;配置修改完成，将mysql加入服务&quot;</span><br><br>cp <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/mysql/</span>support-files<span class="hljs-regexp">/mysql.server /</span>etc<span class="hljs-regexp">/init.d/my</span>sqld<br><br><span class="hljs-comment">#chmod +x /etc/init.d/mysqld</span><br><br><br>echo <span class="hljs-string">&quot;添加mysql指令&quot;</span><br><br>ln -s <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/mysql/</span>bin<span class="hljs-regexp">/mysql  /u</span>sr<span class="hljs-regexp">/local/</span>bin<br>ln -s <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/mysql/</span>bin<span class="hljs-regexp">/mysqladmin  /u</span>sr<span class="hljs-regexp">/local/</span>bin<br><br><span class="hljs-comment">#echo &quot;服务启动&quot;</span><br><br>sudo service mysqld start<br><br>sudo systemctl restart mysqld<br><br>systemctl status mysqld<br><br><span class="hljs-comment">#开启端口</span><br>firewall-cmd --zone=public --add-port=<span class="hljs-number">3306</span>/tcp --permanent<br><br>systemctl restart firewalld.service<br><br><span class="hljs-comment">#修改root初始化密码</span><br>mysql -uroot -p &lt; <span class="hljs-regexp">/home/mi</span>rror<span class="hljs-regexp">/mysql/i</span>nit.sql<br><br><span class="hljs-comment">#关闭跳过密码验证</span><br>cat <span class="hljs-regexp">/dev/</span>null &gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;[mysqld]&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;bind-address=0.0.0.0&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;basedir=/usr/local/mysql&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;datadir=/usr/local/mysql/data&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;socket=/tmp/mysql.sock&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;user=root&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;port=3306&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;character-set-server=utf8&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;#skip-grant-tables&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;# Disabling symbolic-links is recommended to prevent assorted security risks&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;symbolic-links=0&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;[mysqld_safe]&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;log-error=/var/log/mysqld.log&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;pid-file=/var/run/mysqld/mysqld.pid&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br>echo <span class="hljs-string">&#x27;!includedir /etc/my.cnf.d&#x27;</span> &gt;&gt; <span class="hljs-regexp">/etc/my</span>.cnf<br><br>sudo systemctl restart mysqld<br><br>sudo systemctl status mysqld<br></code></pre></td></tr></table></figure><h4 id="1、-修改用户密码（init-sql）"><a href="#1、-修改用户密码（init-sql）" class="headerlink" title="1、 修改用户密码（init.sql）"></a>1、 修改用户密码（init.sql）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">flush</span> <span class="hljs-keyword">privileges</span>;<br><span class="hljs-comment">#修改root密码为root</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> <span class="hljs-keyword">identified</span> <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;root&#x27;</span>;  <br><span class="hljs-comment">#刷新权限</span><br><span class="hljs-keyword">flush</span> <span class="hljs-keyword">privileges</span>;<br></code></pre></td></tr></table></figure><h4 id="2、远程登录"><a href="#2、远程登录" class="headerlink" title="2、远程登录"></a>2、远程登录</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">use mysql;<br>update<span class="hljs-built_in"> user </span><span class="hljs-builtin-name">set</span> host = <span class="hljs-string">&#x27;%&#x27;</span> where<span class="hljs-built_in"> user </span>= <span class="hljs-string">&#x27;root&#x27;</span>;<br><span class="hljs-comment">#刷新权限</span><br>flush privileges;<br></code></pre></td></tr></table></figure><h4 id="3、添加用户"><a href="#3、添加用户" class="headerlink" title="3、添加用户"></a>3、添加用户</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">#添加用户“xiao&quot;，密码为: aquatic@zkcm</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;cpbdb&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> <span class="hljs-keyword">identified</span> <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;cpbdb@zkcm&#x27;</span>;<br><span class="hljs-comment">#赋权所有权限，并且可以查看所有表</span><br><span class="hljs-keyword">grant</span> <span class="hljs-keyword">all</span> <span class="hljs-keyword">privileges</span> <span class="hljs-keyword">on</span> *.* <span class="hljs-keyword">to</span> <span class="hljs-string">&#x27;cpbdb&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span>;<br><span class="hljs-comment">#赋权test数据库所有权限，只可以使用数据库test</span><br><span class="hljs-keyword">grant</span> <span class="hljs-keyword">all</span> <span class="hljs-keyword">privileges</span> <span class="hljs-keyword">on</span> cpbdb.* <span class="hljs-keyword">to</span> <span class="hljs-string">&#x27;cpbdb&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span>;<br><span class="hljs-comment">#刷新权限</span><br><span class="hljs-keyword">flush</span> <span class="hljs-keyword">privileges</span>;<br><span class="hljs-comment">#收回权限</span><br><span class="hljs-keyword">revoke</span> <span class="hljs-keyword">all</span> <span class="hljs-keyword">privileges</span> <span class="hljs-keyword">on</span> *.* <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;cpbdb&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span>;<br><span class="hljs-comment">#主从</span><br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">REPLICATION</span> <span class="hljs-keyword">SLAVE</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;slave&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;123456&#x27;</span>;<br><span class="hljs-keyword">CHANGE</span> <span class="hljs-keyword">MASTER</span> <span class="hljs-keyword">TO</span><br>MASTER_HOST=<span class="hljs-string">&#x27;192.168.186.150&#x27;</span>,<br>MASTER_USER=<span class="hljs-string">&#x27;slave&#x27;</span>,<br>MASTER_PASSWORD=<span class="hljs-string">&#x27;123456&#x27;</span>,<br>MASTER_LOG_FILE=<span class="hljs-string">&#x27;mysql-bin.000008&#x27;</span>,MASTER_LOG_POS=<span class="hljs-number">154</span>;<br><br></code></pre></td></tr></table></figure><h4 id="4、查找并删除mysql有关的文件"><a href="#4、查找并删除mysql有关的文件" class="headerlink" title="4、查找并删除mysql有关的文件"></a>4、查找并删除mysql有关的文件</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-built_in">find</span> / -name mysql<br>rm -rf 上边查找到的路径，多个路径用空格隔开<br>#或者下边一条命令即可<br><span class="hljs-built_in">find</span> / -name mysql|xargs rm -rf<br></code></pre></td></tr></table></figure><h4 id="5、建库"><a href="#5、建库" class="headerlink" title="5、建库"></a>5、建库</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">CREATE DATABASE `fx`<span class="hljs-built_in"> DEFAULT </span>CHARACTER <span class="hljs-builtin-name">SET</span> utf8mb4 COLLATE utf8mb4_general_ci;<br></code></pre></td></tr></table></figure><h4 id="6、导出"><a href="#6、导出" class="headerlink" title="6、导出"></a>6、导出</h4><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs arcade">-- 只导出数据<br>./mysqldump -t cpbdb -uroot -proot &gt; <span class="hljs-regexp">/home/</span>cpbdb.sql<br><br>-- 只导出表结构<br>./mysqldump -d cpbdb -uroot -proot &gt; <span class="hljs-regexp">/home/</span>cpbdb.sql<br><br>-- 导出整个数据库<br>./mysqldump -uroot -proot cpbdb &gt; <span class="hljs-regexp">/home/</span>cpbdb.sql<br></code></pre></td></tr></table></figure><h4 id="7、表操作"><a href="#7、表操作" class="headerlink" title="7、表操作"></a>7、表操作</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> t_dict_content_type <span class="hljs-keyword">modify</span> <span class="hljs-keyword">column</span> <span class="hljs-keyword">name</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">1000</span>);<br><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">file</span> <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">md5</span> = <span class="hljs-string">&#x27;1daa30a32b99a92062f481bd3ef8694c&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="8、查询表结构"><a href="#8、查询表结构" class="headerlink" title="8、查询表结构"></a>8、查询表结构</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">SELECT</span><br>  TABLE_NAME 表名,<br>  COLUMN_NAME 列名,<br>  COLUMN_TYPE 数据类型,<br>    COLUMN_DEFAULT 默认值,<br>  IS_NULLABLE 强制,    <br>  COLUMN_COMMENT 注释 <br><span class="hljs-keyword">FROM</span><br> INFORMATION_SCHEMA.COLUMNS<br><span class="hljs-keyword">where</span><br><span class="hljs-comment">-- db2为数据库名称，到时候只需要修改成你要导出表结构的数据库即可</span><br>table_schema =<span class="hljs-string">&#x27;db2&#x27;</span><br><span class="hljs-keyword">and</span> table_name = <span class="hljs-string">&#x27;t_author_area&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/03/30/qHUOgFj9o3WCpnR.png" alt="image-20210330163131838"></p><table><thead><tr><th align="left">列名</th><th align="left">数据类型</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><strong>TABLE_CATALOG</strong></td><td align="left"><strong>nvarchar(128)</strong></td><td align="left">表限定符。</td></tr><tr><td align="left"><strong>TABLE_SCHEMA</strong></td><td align="left"><strong>nvarchar(128)</strong></td><td align="left">表所有者。</td></tr><tr><td align="left"><strong>TABLE_NAME</strong></td><td align="left"><strong>nvarchar(128)</strong></td><td align="left">表名。</td></tr><tr><td align="left"><strong>COLUMN_NAME</strong></td><td align="left"><strong>nvarchar(128)</strong></td><td align="left">列名。</td></tr><tr><td align="left"><strong>ORDINAL_POSITION</strong></td><td align="left"><strong>smallint</strong></td><td align="left">列标识号。</td></tr><tr><td align="left"><strong>COLUMN_DEFAULT</strong></td><td align="left"><strong>nvarchar(4000)</strong></td><td align="left">列的默认值。</td></tr><tr><td align="left"><strong>IS_NULLABLE</strong></td><td align="left"><strong>varchar(3)</strong></td><td align="left">列的为空性。如果列允许 NULL，那么该列返回 YES。否则，返回 NO。</td></tr><tr><td align="left"><strong>DATA_TYPE</strong></td><td align="left"><strong>nvarchar(128)</strong></td><td align="left">系统提供的数据类型。</td></tr><tr><td align="left"><strong>CHARACTER_MAXIMUM_LENGTH</strong></td><td align="left"><strong>smallint</strong></td><td align="left">以字符为单位的最大长度，适于二进制数据、字符数据，或者文本和图像数据。否则，返回 NULL。有关更多信息，请参见数据类型。</td></tr><tr><td align="left"><strong>CHARACTER_OCTET_LENGTH</strong></td><td align="left"><strong>smallint</strong></td><td align="left">以字节为单位的最大长度，适于二进制数据、字符数据，或者文本和图像数据。否则，返回 NULL。</td></tr><tr><td align="left"><strong>NUMERIC_PRECISION</strong></td><td align="left"><strong>tinyint</strong></td><td align="left">近似数字数据、精确数字数据、整型数据或货币数据的精度。否则，返回 NULL。</td></tr><tr><td align="left"><strong>NUMERIC_PRECISION_RADIX</strong></td><td align="left"><strong>smallint</strong></td><td align="left">近似数字数据、精确数字数据、整型数据或货币数据的精度基数。否则，返回 NULL。</td></tr><tr><td align="left"><strong>NUMERIC_SCALE</strong></td><td align="left"><strong>tinyint</strong></td><td align="left">近似数字数据、精确数字数据、整数数据或货币数据的小数位数。否则，返回 NULL。</td></tr><tr><td align="left"><strong>DATETIME_PRECISION</strong></td><td align="left"><strong>smallint</strong></td><td align="left"><strong>datetime</strong> 及 SQL-92 <strong>interval</strong> 数据类型的子类型代码。对于其它数据类型，返回 NULL。</td></tr><tr><td align="left"><strong>CHARACTER_SET_CATALOG</strong></td><td align="left"><strong>varchar(6)</strong></td><td align="left">如果列是字符数据或 <strong>text</strong> 数据类型，那么返回 <strong>master</strong>，指明字符集所在的数据库。否则，返回 NULL。</td></tr><tr><td align="left"><strong>CHARACTER_SET_SCHEMA</strong></td><td align="left"><strong>varchar(3)</strong></td><td align="left">如果列是字符数据或 <strong>text</strong> 数据类型，那么返回 <strong>DBO</strong>，指明字符集的所有者名称。否则，返回 NULL。</td></tr><tr><td align="left"><strong>CHARACTER_SET_NAME</strong></td><td align="left"><strong>nvarchar(128)</strong></td><td align="left">如果该列是字符数据或 <strong>text</strong> 数据类型，那么为字符集返回唯一的名称。否则，返回 NULL。</td></tr><tr><td align="left"><strong>COLLATION_CATALOG</strong></td><td align="left"><strong>varchar(6)</strong></td><td align="left">如果列是字符数据或 <strong>text</strong> 数据类型，那么返回 <strong>master</strong>，指明在其中定义排序次序的数据库。否则此列为 NULL。</td></tr><tr><td align="left"><strong>COLLATION_SCHEMA</strong></td><td align="left"><strong>varchar(3)</strong></td><td align="left">返回 <strong>DBO</strong>，为字符数据或 <strong>text</strong> 数据类型指明排序次序的所有者。否则，返回 NULL。</td></tr><tr><td align="left"><strong>COLLATION_NAME</strong></td><td align="left"><strong>nvarchar(128)</strong></td><td align="left">如果列是字符数据或 <strong>text</strong> 数据类型，那么为排序次序返回唯一的名称。否则，返回 NULL。</td></tr><tr><td align="left"><strong>DOMAIN_CATALOG</strong></td><td align="left"><strong>nvarchar(128)</strong></td><td align="left">如果列是一种用户定义数据类型，那么该列是某个数据库名称，在该数据库名中创建了这种用户定义数据类型。否则，返回 NULL。</td></tr><tr><td align="left"><strong>DOMAIN_SCHEMA</strong></td><td align="left"><strong>nvarchar(128)</strong></td><td align="left">如果列是一种用户定义数据类型，那么该列是这种用户定义数据类型的创建者。否则，返回 NULL。</td></tr><tr><td align="left"><strong>DOMAIN_NAME</strong></td><td align="left"><strong>nvarchar(128)</strong></td><td align="left">如果列是一种用户定义数据类型，那么该列是这种用户定义数据类型的名称。否则，返回 NULL。</td></tr></tbody></table>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Navicat12激活</title>
    <link href="/2020/08/10/Navicat12%E6%BF%80%E6%B4%BB/"/>
    <url>/2020/08/10/Navicat12%E6%BF%80%E6%B4%BB/</url>
    
    <content type="html"><![CDATA[<p>本教程更新时间：2019-4-19 16:37:38</p><p><a href="https://www.52pojie.cn/thread-934566-1-1.html">https://www.52pojie.cn/thread-934566-1-1.html</a></p><p>本文所需软件<br>1、navicat_premium原版安装包<br>官网下载地址：<a href="https://www.navicat.com.cn/download/navicat-premium">https://www.navicat.com.cn/download/navicat-premium</a><br>2、注册工具<br>github地址：<a href="https://github.com/DoubleLabyrinth/navicat-keygen">https://github.com/DoubleLabyrinth/navicat-keygen</a><br>以上本文所需文件已整理到网盘，自取：<br>链接：<a href="https://pan.baidu.com/s/1MDuDFBsS0EI-rz4WkQ7kJw">https://pan.baidu.com/s/1MDuDFBsS0EI-rz4WkQ7kJw</a><br>提取码：gdn5<br>复制这段内容后打开百度网盘手机App，操作更方便哦</p><p>~<del>~ 分割线</del></p><p>好了，教程开始<br><strong>1、安装原版navicat</strong><br>正常安装，一直下一步，直到安装成功，这个我就不截图了。<br>默认安装路径是：C:\Program Files\PremiumSoft\Navicat Premium 12<br><strong>2、开始激活</strong><br><strong>2.1、首先需要先替换掉Navicat激活公钥</strong><br>a、解压navicat-keygen-for-x64.zip文件，开始执行cmd命令<br>b、打开命令提示符（管理员），win+x<br>(因为我是安装在了C盘，文件写入需要管理员权限，如果安装在别的盘，普通的命令提示符就行，或者在解压文件夹按住shift点右键，也能选择命令提示符打开)</p><p><img src="https://attach.52pojie.cn/forum/201904/19/160557tm0i0zk08q0a9f99.png" alt="img"></p><p>c、进入到navicat-keygen-for-x64.zip文件的解压目录，执行如下命令</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs latex">cd [解压目录]<br>.<span class="hljs-tag">\<span class="hljs-name">navicat</span></span>-patcher.exe &quot;C:<span class="hljs-tag">\<span class="hljs-name">Program</span></span> Files<span class="hljs-tag">\<span class="hljs-name">PremiumSoft</span></span><span class="hljs-tag">\<span class="hljs-name">Navicat</span></span> Premium 12&quot;<br></code></pre></td></tr></table></figure><p><img src="https://attach.52pojie.cn/forum/201904/19/161149zmt1zxgarvrqatj2.png" alt="img"></p><p>d、回车继续，一顿飘屏猛如虎，好的，出现这样的提示表示替换成功。成功之后会在当前文件夹下生成RegPrivateKey.pem文件</p><p><img src="https://attach.52pojie.cn/forum/201904/19/161405f9gdzno4z3d4ob5d.png" alt="img"></p><p><strong>2.2、接下来我们就要开始生成序列号和激活码</strong><br>a、和替换公钥类似，执行如下命令</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">.\<span class="hljs-selector-tag">navicat-keygen</span><span class="hljs-selector-class">.exe</span> <span class="hljs-selector-tag">-text</span> .\<span class="hljs-selector-tag">RegPrivateKey</span><span class="hljs-selector-class">.pem</span><br></code></pre></td></tr></table></figure><p>b、接下来你会被要求选择Navicat产品类别、语言以及输入主版本号。之后会随机生成一个序列号。</p><p><img src="https://attach.52pojie.cn/forum/201904/19/162347wpp8fo7pktogsavt.png" alt="img"></p><p>c、得到序列号，复制下来，注意：<strong>窗口不要关闭</strong></p><p>d、此时打开安装的原版Navicat，第一次打开会出现如下提示，点击注册按钮，进入注册页面</p><p><img src="https://attach.52pojie.cn/forum/201904/19/155913jd4w4coog0sx25n5.png" alt="img"></p><p><img src="https://attach.52pojie.cn/forum/201904/19/162730x44dr8xzfg77zwbj.png" alt="img"></p><p>e、接下来输入用户名，组织名和请求码，然后回车两次，获得激活码</p><p><img src="https://attach.52pojie.cn/forum/201904/19/163431if96i5uu2610fs0s.png" alt="img"></p><p>f、把获得到的激活码粘贴到navcat中，点击激活，激活成功。</p><p><img src="https://attach.52pojie.cn/forum/201904/19/163431yrza4l445rprd888.png" alt="img"></p><p><strong>附上激活成功的截图。</strong></p><p><img src="https://attach.52pojie.cn/forum/201904/19/163432k6rbb5wdbb116pp2.png" alt="img"></p><p><img src="https://attach.52pojie.cn/forum/201904/19/164734oam0stsajsuotaja.png" alt="img"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Navicat</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginx反向代理导致请求header头信息丢失</title>
    <link href="/2020/08/10/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%AF%BC%E8%87%B4%E8%AF%B7%E6%B1%82header%E5%A4%B4%E4%BF%A1%E6%81%AF%E4%B8%A2%E5%A4%B1/"/>
    <url>/2020/08/10/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%AF%BC%E8%87%B4%E8%AF%B7%E6%B1%82header%E5%A4%B4%E4%BF%A1%E6%81%AF%E4%B8%A2%E5%A4%B1/</url>
    
    <content type="html"><![CDATA[<p><strong>解决方法：</strong></p><blockquote><p>方法一：NGINX代理时加上请求头信息：</p><pre><code class="hljs">location /fxapi &#123;    proxy_pass   http://fxApi/;    proxy_set_header   Host             $host:$server_port;    proxy_set_header   X-Real-IP        $remote_addr;    proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;    proxy_set_header   Proxy-Client-IP  $remote_addr;&#125;</code></pre><p>由于前端代码request的header中包含_，所以这个配置没有生效</p><p>方法二：从根本解除nginx的限制，nginx默认request的header的那么中包含’_’时，会自动忽略掉。http部分中添加如下配置：underscores_in_headers on; （默认 underscores_in_headers 为off）</p></blockquote><p><img src="https://i.loli.net/2021/06/24/ecgwVKGZrAW1SPf.png" alt="image-20210624143610880"></p>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginx脚本安装</title>
    <link href="/2020/08/10/Nginx%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85/"/>
    <url>/2020/08/10/Nginx%E8%84%9A%E6%9C%AC%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h4 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">1</span> <span class="hljs-string">gcc 安装</span><br><span class="hljs-attr">yum</span> <span class="hljs-string">install -y gcc gcc-c++</span><br><span class="hljs-attr">2</span> <span class="hljs-string">PCRE pcre-devel 安装</span><br><span class="hljs-attr">yum</span> <span class="hljs-string">install -y pcre pcre-devel</span><br><span class="hljs-attr">3</span> <span class="hljs-string">zlib 安装</span><br><span class="hljs-attr">yum</span> <span class="hljs-string">install -y zlib zlib-devel</span><br><span class="hljs-attr">4</span> <span class="hljs-string">OpenSSL 安装</span><br><span class="hljs-attr">yum</span> <span class="hljs-string">install -y openssl openssl-devel</span><br><br></code></pre></td></tr></table></figure><h4 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-comment">#安装目录</span><br>data=<span class="hljs-string">&quot;usr/local&quot;</span><br><span class="hljs-comment">#压缩包目录</span><br>default=<span class="hljs-string">&quot;home/mirror/nginx&quot;</span><br><span class="hljs-comment">#安装依赖</span><br><span class="hljs-comment">#1 gcc 安装</span><br>yum install -y gcc gcc-c++<br><span class="hljs-comment">#2 PCRE pcre-devel 安装</span><br>yum install -y pcre pcre-devel<br><span class="hljs-comment">#3 zlib 安装</span><br>yum install -y zlib zlib-devel<br><span class="hljs-comment">#4 OpenSSL 安装</span><br>yum install -y openssl openssl-devel<br><span class="hljs-comment">## 解压</span><br>tar -xvf ./nginx-1.19.1.tar.gz -C /<span class="hljs-variable">$&#123;data&#125;</span>/<br><br>mv /<span class="hljs-variable">$&#123;data&#125;</span>/nginx-1.19.1 /<span class="hljs-variable">$&#123;data&#125;</span>/nginx<br><br><span class="hljs-comment">##进入nginx目录</span><br><span class="hljs-built_in">cd</span> /<span class="hljs-variable">$&#123;data&#125;</span>/nginx<br><span class="hljs-comment">## 配置</span><br>./configure --prefix=/usr/<span class="hljs-built_in">local</span>/nginx<br><br><span class="hljs-comment"># make</span><br>make<br>make install<br>rm -rf logs<br>mkdir logs<br>chmod 700 logs<br><span class="hljs-comment"># cd到刚才配置的安装目录/usr/loca/nginx/</span><br><span class="hljs-built_in">cd</span> /usr/<span class="hljs-built_in">local</span>/nginx<br>./sbin/nginx -t<br><br><span class="hljs-comment">#在文件的最后一行加入文件引入</span><br><span class="hljs-built_in">cd</span> conf<br>sed -i <span class="hljs-string">&#x27;$d&#x27;</span> nginx.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;include /&#x27;</span><span class="hljs-variable">$&#123;default&#125;</span><span class="hljs-string">&#x27;/default.conf;&#x27;</span> &gt;&gt; nginx.conf<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;&#125;&#x27;</span> &gt;&gt; nginx.conf<br><br>firewall-cmd --zone=public --add-port=80/tcp --permanent<br><br>systemctl restart firewalld.service<br></code></pre></td></tr></table></figure><p>default.conf</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">upstream</span>  /backApi &#123;<br>    <span class="hljs-attribute">server</span> <span class="hljs-number">127.0.0.1:9100</span>;<br>&#125;<br><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span> default_server;<br>    <span class="hljs-attribute">server_name</span>  www.xxxx.com;<br><br>    <span class="hljs-attribute">index</span> index.html;<br>    <span class="hljs-attribute">location</span> / &#123;<br>        <span class="hljs-attribute">alias</span>   /root;<br>        <span class="hljs-attribute">index</span>  index.html index.htm;<br>    &#125;<br>    <span class="hljs-attribute">location</span> /api &#123;<br>        <span class="hljs-attribute">rewrite</span><span class="hljs-regexp"> ^/api/(.*)$</span> /<span class="hljs-variable">$1</span> <span class="hljs-literal">break</span>;<br>        <span class="hljs-attribute">proxy_pass</span>   http://backApi;<br>        <span class="hljs-attribute">proxy_set_header</span>   Host             <span class="hljs-variable">$host</span>:<span class="hljs-variable">$server_port</span>;<br>        <span class="hljs-attribute">proxy_set_header</span>   X-Real-IP        <span class="hljs-variable">$remote_addr</span>;<br>        <span class="hljs-attribute">proxy_set_header</span>   X-Forwarded-For  <span class="hljs-variable">$proxy_add_x_forwarded_for</span>;<br>        <span class="hljs-attribute">proxy_set_header</span>   Proxy-Client-IP  <span class="hljs-variable">$remote_addr</span>;<br>    &#125;<br><br>&#125;<br><br><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span>  <span class="hljs-number">8888</span><br>    server_name  www.xxxx.com;<br><br>    <span class="hljs-attribute">location</span> /wqe/ &#123;<br>        <span class="hljs-attribute">alais</span> /home/xxxx<br>    &#125;<br><br>&#125;<br><br><br></code></pre></td></tr></table></figure><h4 id="目录浏览配置"><a href="#目录浏览配置" class="headerlink" title="目录浏览配置"></a>目录浏览配置</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs applescript">autoindex_localtime <span class="hljs-keyword">on</span>; <br>默认为off，显示的文件时间为GMT时间。<br>改为<span class="hljs-keyword">on</span>后，显示的文件时间为文件的服务器时间。<br>autoindex_exact_size off;    <br>默认为<span class="hljs-keyword">on</span>，显示出文件的确切大小，单位是bytes。<br>改为off后，显示出文件的大概大小，单位是kB或者MB或者GB。<br>charset utf<span class="hljs-number">-8</span>,gbk;<br>解决中文乱码问题。<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SELinux</title>
    <link href="/2020/08/10/SELinux/"/>
    <url>/2020/08/10/SELinux/</url>
    
    <content type="html"><![CDATA[<h4 id="SELinux"><a href="#SELinux" class="headerlink" title="SELinux"></a>SELinux</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs routeros">查看SELinux状态：<br><br>1、/usr/sbin/sestatus -v      ##如果SELinux status参数为enabled即为开启状态<br><br>SELinux status:                 enabled<br><br>2、getenforce                 ##也可以用这个命令检查<br><br>关闭SELinux：<br><br>1、临时关闭（不用重启机器）：<br><br>setenforce 0 ##设置SELinux 成为permissive模式 √<br><br>setenforce 1 ##设置SELinux 成为enforcing模式<br><br>2、修改配置文件需要重启机器：<br><br>修改/etc/selinux<span class="hljs-built_in">/config </span>文件<br><br>将<span class="hljs-attribute">SELINUX</span>=enforcing改为SELINUX=disabled<br><br>重启机器即可<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue代理</title>
    <link href="/2020/08/10/Vue%E7%9B%B8%E5%85%B3/"/>
    <url>/2020/08/10/Vue%E7%9B%B8%E5%85%B3/</url>
    
    <content type="html"><![CDATA[<h4 id="资源路径代理（图片等）"><a href="#资源路径代理（图片等）" class="headerlink" title="资源路径代理（图片等）"></a>资源路径代理（图片等）</h4><h5 id="修改index-js"><a href="#修改index-js" class="headerlink" title="修改index.js"></a>修改index.js</h5><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">proxyTable:</span> &#123;<br>    <span class="hljs-string">&quot;/resources&quot;</span>: &#123;<br><span class="hljs-symbol">        target:</span> <span class="hljs-string">&quot;http://localhost:9100/&quot;</span>, <span class="hljs-comment">//这里填写后端存放资源文件的域名</span><br><span class="hljs-symbol">        ws:</span> true,<br><span class="hljs-symbol">        changeOrigin:</span> true, 是否跨域<br>        <span class="hljs-comment">// 如果接口中是没有api的，那就直接置空（如上）。如果接口中有api，就需要写成&#123;‘^/api’:‘/api’&#125;</span><br><span class="hljs-symbol">        pathRewrite:</span> &#123;<br>        <span class="hljs-string">&quot;/api&quot;</span>: <span class="hljs-string">&quot;/&quot;</span><br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">version:</span> <span class="hljs-string">&#x27;3&#x27;</span><br><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">febs-gateway:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">febs-gateway:latest</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">febs-gateway</span><br>    <span class="hljs-attr">depends_on:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">febs-register</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;/home/docker/febs/logs:/log&quot;</span><br>    <span class="hljs-attr">command:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--nacos.url=192.168.186.140&quot;</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-number">8301</span><span class="hljs-string">:8301</span><br>  <span class="hljs-attr">febs-auth:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">febs-auth:latest</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">febs-auth</span><br>    <span class="hljs-attr">depends_on:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">febs-register</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;/home/docker/febs/logs:/log&quot;</span><br>    <span class="hljs-attr">command:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--nacos.url=192.168.186.140&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--mysql.username=root&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--mysql.password=zkcmroot&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--mysql.url=192.168.30.100&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--redis.url=192.168.30.100&quot;</span><br>  <span class="hljs-attr">febs-server-system:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">febs-server-system:latest</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">febs-server-system</span><br>    <span class="hljs-attr">depends_on:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">febs-register</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;/home/docker/febs/logs:/log&quot;</span><br>    <span class="hljs-attr">command:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--nacos.url=192.168.186.140&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--rabbitmq.url=192.168.186.140&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--rabbitmq.username=admin&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--rabbitmq.password=admin&quot;</span><br>  <span class="hljs-attr">febs-server-test:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">febs-server-test:latest</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">febs-server-test</span><br>    <span class="hljs-attr">depends_on:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">febs-register</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;/home/docker/febs/logs:/log&quot;</span><br>    <span class="hljs-attr">command:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--nacos.url=192.168.186.140&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--rabbitmq.url=192.168.186.140&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--rabbitmq.username=admin&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;--rabbitmq.password=admin&quot;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VMware Workstation 15 Pro 密钥</title>
    <link href="/2020/08/10/VMware%20Workstation%2015%20Pro%20%E5%AF%86%E9%92%A5/"/>
    <url>/2020/08/10/VMware%20Workstation%2015%20Pro%20%E5%AF%86%E9%92%A5/</url>
    
    <content type="html"><![CDATA[<h1 id="VMware-Workstation-15-Pro-密钥"><a href="#VMware-Workstation-15-Pro-密钥" class="headerlink" title="VMware Workstation 15 Pro 密钥"></a>VMware Workstation 15 Pro 密钥</h1><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">UG5J2</span>-<span class="hljs-number">0</span>ME<span class="hljs-number">12</span>-M<span class="hljs-number">89</span>WY-NPWXX-WQH<span class="hljs-number">88</span><br><br><span class="hljs-attribute">GA590</span>-<span class="hljs-number">86</span>Y<span class="hljs-number">05</span>-<span class="hljs-number">4806</span>Y-X<span class="hljs-number">4</span>PEE-ZV<span class="hljs-number">8</span>E<span class="hljs-number">0</span><br><br><span class="hljs-attribute">YA18K</span>-<span class="hljs-number">0</span>WY<span class="hljs-number">8</span>P-H<span class="hljs-number">85</span>DY-L<span class="hljs-number">4</span>NZG-X<span class="hljs-number">7</span>RAD<br><br><span class="hljs-attribute">UA5DR</span>-<span class="hljs-number">2</span>ZD<span class="hljs-number">4</span>H-<span class="hljs-number">089</span>FY-<span class="hljs-number">6</span>YQ<span class="hljs-number">5</span>T-YPRX<span class="hljs-number">6</span><br><br><span class="hljs-attribute">B806Y</span>-<span class="hljs-number">86</span>Y<span class="hljs-number">05</span>-GA<span class="hljs-number">590</span>-X<span class="hljs-number">4</span>PEE-ZV<span class="hljs-number">8</span>E<span class="hljs-number">0</span><br><br><span class="hljs-attribute">ZF582</span>-<span class="hljs-number">0</span>NW<span class="hljs-number">5</span>N-H<span class="hljs-number">8</span>D<span class="hljs-number">2</span>P-<span class="hljs-number">0</span>XZEE-Z<span class="hljs-number">22</span>VA<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>VMware Workstation</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>httpd</title>
    <link href="/2020/08/10/httpd/"/>
    <url>/2020/08/10/httpd/</url>
    
    <content type="html"><![CDATA[<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">yum</span> -y install httpd.x<span class="hljs-number">86</span>_<span class="hljs-number">64</span><br></code></pre></td></tr></table></figure><h4 id="配置文件-位置：-etc-httpd-conf-httpd-conf"><a href="#配置文件-位置：-etc-httpd-conf-httpd-conf" class="headerlink" title="配置文件(位置：/etc/httpd/conf/httpd.conf)"></a>配置文件(位置：/etc/httpd/conf/httpd.conf)</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute"><span class="hljs-nomarkup">Listen</span></span> <span class="hljs-number">80</span><br><span class="hljs-attribute"><span class="hljs-nomarkup">Listen</span></span> <span class="hljs-number">192.168.31.30:8080</span><br><br><span class="hljs-section">&lt;virtualhost <span class="hljs-number">192.168.31.30:8080</span>&gt;</span><br>        <span class="hljs-attribute"><span class="hljs-nomarkup">Documentroot</span></span> /home/diskdata/ftp/minioData<br>        <span class="hljs-section">&lt;Directory <span class="hljs-string">&quot;/home/diskdata/ftp/minioData&quot;</span>&gt;</span><br>            <span class="hljs-attribute"><span class="hljs-nomarkup">Options</span></span> FollowSymLinks<br>            <span class="hljs-attribute">AllowOverride</span> none<br>            <span class="hljs-attribute">Require</span> <span class="hljs-literal">all</span> granted<br>        <span class="hljs-section">&lt;/Directory&gt;</span><br><span class="hljs-section">&lt;/virtualhost&gt;</span><br></code></pre></td></tr></table></figure><h4 id="第一、启动、终止、重启"><a href="#第一、启动、终止、重启" class="headerlink" title="第一、启动、终止、重启"></a>第一、启动、终止、重启</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">systemctl <span class="hljs-literal">start</span> httpd.service <span class="hljs-comment">#启动</span><br>systemctl <span class="hljs-literal">stop</span> httpd.service <span class="hljs-comment">#停止</span><br>systemctl restart httpd.service <span class="hljs-comment">#重启</span><br></code></pre></td></tr></table></figure><h4 id="第二、设置开机启动-关闭"><a href="#第二、设置开机启动-关闭" class="headerlink" title="第二、设置开机启动/关闭"></a>第二、设置开机启动/关闭</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl <span class="hljs-built_in">enable</span> httpd.service <span class="hljs-comment">#开机启动</span><br>systemctl <span class="hljs-built_in">disable</span> httpd.service <span class="hljs-comment">#开机不启动</span><br></code></pre></td></tr></table></figure><h4 id="第三、检查httpd状态"><a href="#第三、检查httpd状态" class="headerlink" title="第三、检查httpd状态"></a>第三、检查httpd状态</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">systemctl</span> <span class="hljs-selector-tag">status</span> <span class="hljs-selector-tag">httpd</span><span class="hljs-selector-class">.service</span><br></code></pre></td></tr></table></figure><h4 id="解决启动Apache遇到的问题Permission-denied-AH00072-make-sock-could-not-bind-to-address-0-0-0-0-8888"><a href="#解决启动Apache遇到的问题Permission-denied-AH00072-make-sock-could-not-bind-to-address-0-0-0-0-8888" class="headerlink" title="解决启动Apache遇到的问题Permission denied: AH00072: make_sock: could not bind to address 0.0.0.0:8888"></a>解决启动Apache遇到的问题Permission denied: AH00072: make_sock: could not bind to address 0.0.0.0:8888</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-number">1</span><span class="hljs-string">.可能原因：SELinux限制了Apache的端口设置</span><br><span class="hljs-number">2</span><span class="hljs-string">.关闭SELinux</span><br><span class="hljs-string">setenforce</span> <span class="hljs-number">0</span> <span class="hljs-comment">##设置SELinux 成为permissive模式 √</span><br><span class="hljs-number">3</span><span class="hljs-string">.</span><br><span class="hljs-string">//安装semanage</span><br><span class="hljs-string">yum</span> <span class="hljs-string">provides</span> <span class="hljs-string">/usr/sbin/semanage</span><br><span class="hljs-string">yum</span> <span class="hljs-string">-y</span> <span class="hljs-string">install</span> <span class="hljs-string">policycoreutils-python</span><br><span class="hljs-string">//查看默认允许的端口</span><br><span class="hljs-string">semanage</span> <span class="hljs-string">port</span> <span class="hljs-string">-l</span> <span class="hljs-string">|</span> <span class="hljs-string">grep</span> <span class="hljs-string">-w</span> <span class="hljs-string">http_port_t</span><br><span class="hljs-string">//</span> <span class="hljs-string">http_port_t</span>  <span class="hljs-string">tcp</span> <span class="hljs-number">80</span><span class="hljs-string">,</span> <span class="hljs-number">81</span><span class="hljs-string">,</span> <span class="hljs-number">443</span><span class="hljs-string">,</span> <span class="hljs-number">488</span><span class="hljs-string">,</span> <span class="hljs-number">8008</span><span class="hljs-string">,</span> <span class="hljs-number">8009</span><span class="hljs-string">,</span> <span class="hljs-number">8443</span><span class="hljs-string">,</span> <span class="hljs-number">9000</span><br><span class="hljs-string">//使用semanage添加apache侦听的端口</span><br><span class="hljs-string">semanage</span> <span class="hljs-string">port</span> <span class="hljs-string">-a</span> <span class="hljs-string">-t</span> <span class="hljs-string">http_port_t</span> <span class="hljs-string">-p</span> <span class="hljs-string">tcp</span> <span class="hljs-number">8888</span><br><span class="hljs-string">//启动apache</span><br><span class="hljs-string">systemctl</span> <span class="hljs-string">start</span> <span class="hljs-string">httpd</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>httpd</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VMWare Centos7 NAT模式</title>
    <link href="/2020/08/10/%E8%99%9A%E6%8B%9F%E6%9C%BANAT%E6%A8%A1%E5%BC%8F/"/>
    <url>/2020/08/10/%E8%99%9A%E6%8B%9F%E6%9C%BANAT%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h2 id="1、VMware设置"><a href="#1、VMware设置" class="headerlink" title="1、VMware设置"></a>1、VMware设置</h2><p>点击 编辑 -&gt; 虚拟网络编辑器 -&gt; 更改设置 </p><p><img src="D:\Photos\1.jpg" alt="img"></p><p>选择 NAT模式，具体勾选如下：</p><p><img src="D:\Photos\2.jpg" alt="img"></p><p>打开 NAT设置，记录子网掩码，网关ip</p><p><img src="D:\Photos\3.jpg" alt="img"></p><p>记录网段信息</p><p><img src="D:\Photos\ccd0b119b11e4b9bb02d3202286a76ab.jpg" alt="img"></p><h2 id="2、登录虚拟机"><a href="#2、登录虚拟机" class="headerlink" title="2、登录虚拟机"></a>2、登录虚拟机</h2><p>root用户登录虚拟机，输入以命令，编辑保存</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs lsl">vi /etc/sysconfig/network-scripts/ifcfg-ens33<br><br>BOOTPROTO=<span class="hljs-string">&quot;static&quot;</span><br>ONBOOT=yes<br>IPADDR=<span class="hljs-number">192.168</span><span class="hljs-number">.186</span><span class="hljs-number">.130</span><br>METMASK=<span class="hljs-number">255.255</span><span class="hljs-number">.255</span><span class="hljs-number">.0</span><br>GATEWAY=<span class="hljs-number">192.168</span><span class="hljs-number">.186</span><span class="hljs-number">.2</span><br>DNS=<span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span><br><br>vi /etc/resolv.conf 编辑DNS，填入网关的IP<br>nameserver <span class="hljs-number">192.168</span><span class="hljs-number">.186</span><span class="hljs-number">.2</span><br></code></pre></td></tr></table></figure><p>输入一下命令，重启network</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">systemctl restart network</span><br></code></pre></td></tr></table></figure><h2 id="3、验证"><a href="#3、验证" class="headerlink" title="3、验证"></a>3、验证</h2><p>  输入以下命令，查看结果</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">ping</span> <span class="hljs-selector-tag">www</span><span class="hljs-selector-class">.baidu</span><span class="hljs-selector-class">.com</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Centos7</tag>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2020/08/07/hello-world/"/>
    <url>/2020/08/07/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    <categories>
      
      <category>Test</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Test</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
